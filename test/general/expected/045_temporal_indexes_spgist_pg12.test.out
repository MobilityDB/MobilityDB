ANALYZE tbl_tint_big;
ANALYZE
ANALYZE tbl_tfloat_big;
ANALYZE
CREATE INDEX tbl_tint_big_spgist_idx ON tbl_tint_big USING SPGIST(temp);
CREATE INDEX
CREATE INDEX tbl_tfloat_big_spgist_idx ON tbl_tfloat_big USING SPGIST(temp);
CREATE INDEX
SELECT k, temp |=| intrange '[90,100]'::tbox FROM tbl_tint_big ORDER BY 2, 1 LIMIT 3;
  k  | ?column? 
-----+----------
 107 |        0
 113 |        0
 140 |        0
(3 rows)

SELECT k, temp |=| tint '[1@2001-06-01, 2@2001-07-01]' FROM tbl_tint_big ORDER BY 2, 1 LIMIT 3;
  k   | ?column? 
------+----------
  168 |        0
 1138 |        0
 1814 |        0
(3 rows)

SELECT k, round((temp |=| floatrange '[100,100]'::tbox)::numeric, 6) FROM tbl_tfloat_big ORDER BY 2, 1 LIMIT 3;
  k   |  round   
------+----------
 2910 | 0.000000
 2922 | 0.000000
 2933 | 0.000000
(3 rows)

SELECT k, round((temp |=| tfloat '[1.5@2001-06-01, 2.5@2001-07-01]')::numeric, 6) FROM tbl_tfloat_big ORDER BY 2, 1 LIMIT 3;
  k   |  round   
------+----------
 5202 | 0.000000
 5302 | 0.000000
 5501 | 0.000000
(3 rows)

DROP INDEX tbl_tint_big_spgist_idx;
DROP INDEX
DROP INDEX tbl_tfloat_big_spgist_idx;
DROP INDEX
CREATE TABLE tbl_tfloat_big_allthesame AS SELECT k, tfloat_seq(5.0, p) AS temp FROM tbl_period_big;
SELECT 12500
CREATE INDEX tbl_tfloat_big_allthesame_spgist_idx ON tbl_tfloat_big_allthesame USING SPGIST(temp);
CREATE INDEX
ANALYZE tbl_tfloat_big_allthesame;
ANALYZE
SELECT COUNT(*) FROM tbl_tfloat_big_allthesame WHERE temp && 5.0;
 count 
-------
 12380
(1 row)

DROP TABLE tbl_tfloat_big_allthesame;
DROP TABLE
