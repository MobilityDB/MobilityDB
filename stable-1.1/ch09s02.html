<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Reduction</title><link rel="stylesheet" type="text/css" href="docbook.css"><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="MobilityDB 1.1 User's Manual"><link rel="up" href="ch09.html" title="Chapter 9. Temporal Types: Analytics Operations"><link rel="prev" href="ch09.html" title="Chapter 9. Temporal Types: Analytics Operations"><link rel="next" href="ch09s03.html" title="Similarity"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Reduction</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch09.html">Prev</a> </td><th width="60%" align="center">Chapter 9. Temporal Types: Analytics Operations</th><td width="20%" align="right"> <a accesskey="n" href="ch09s03.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="temporal_types_reduction"></a>Reduction</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="tsample"></a><a class="indexterm" name="idm5151"></a><p>Sample a temporal value with respect to an interval</p><p><code class="varname">tsample({tnumber,tgeompoint},duration interval,torigin timestamptz='2000-01-03') → </code></p><p><code class="varname">  {tnumber,tgeompoint}</code></p><p>If the origin is not specified, it is set by default to Monday, January 3, 2000. The given interval must be strictly greater than zero. Notice that the result is a temporal instant or a temporal sequence with discrete interpolation.</p><pre class="programlisting">
SELECT tsample(tint '{1@2001-01-01,5@2001-01-05}', '3 days', '2001-01-01');
-- {1@2001-01-01}
SELECT tsample(tfloat '[1@2001-01-01,5@2001-01-05]', '1 day', '2001-01-01');
-- {1@2001-01-01, 2@2001-01-02, 3@2001-01-03, 4@2001-01-04, 5@2001-01-05}
SELECT tsample(tfloat '[1@2001-01-01,5@2001-01-05]', '3 days', '2001-01-01');
-- {1@2001-01-01, 4@2001-01-04}
</pre><pre class="programlisting">
SELECT asText(tsample(tgeompoint '[Point(1 1)@2001-01-01, Point(5 5)@2001-01-05]',
  '2 days', '2001-01-01'));
-- {POINT(1 1)@2001-01-01, POINT(3 3)@2001-01-03, POINT(5 5)@2001-01-05}
SELECT asText(tsample(tgeompoint '{[Point(1 1)@2001-01-01, Point(5 5)@2001-01-05],
  [Point(1 1)@2001-01-06, Point(5 5)@2001-01-08]}', '3 days', '2001-01-01'));
-- {POINT(1 1)@2001-01-01, POINT(4 4)@2001-01-04, POINT(3 3)@2001-01-07}
</pre><p><a class="xref" href="ch09s02.html#fig_tsample" title="Figure 9.2. Sampling of temporal floats with discrete, step, and linear interpolation.">Figure 9.2, “Sampling of temporal floats with discrete, step, and linear interpolation.”</a> illustrates the sampling of temporal floats with various interpolations. As shown in the figure, the sampling operation is best suited for temporal values with continuous interpolation.</p><div class="figure-float"><div class="figure"><a name="fig_tsample"></a><p class="title"><b>Figure 9.2. Sampling of temporal floats with discrete, step, and linear interpolation.</b></p><div class="figure-contents"><div class="mediaobject"><object type="image/svg+xml" data="images/tsample.svg" width="405"></object></div></div></div><br class="figure-break"></div></li><li class="listitem"><a name="tprecision"></a><a class="indexterm" name="idm5174"></a><p>Reduce the temporal precision of a temporal value with respect to an interval computing the time-weighted average/centroid in each time bucket</p><p><code class="varname">tprecision({tnumber,tgeompoint},duration interval,torigin timestamptz='2000-01-03')</code></p><p><code class="varname"> → {tnumber,tpoint}</code></p><p>If the origin is not specified, it is set by default to Monday, January 3, 2000. The given interval must be strictly greater than zero.</p><pre class="programlisting">
SELECT tprecision(tint '[1@2001-01-01,5@2001-01-05,1@2001-01-09]','1 day',
  '2001-01-01');
-- Interp=Step;[1@2001-01-01, 5@2001-01-05, 1@2001-01-09]
SELECT tprecision(tfloat '[1@2001-01-01,5@2001-01-05,1@2001-01-09)','1 day',
  '2001-01-01');
-- [1.5@2001-01-01, 4.5@2001-01-04, 4.5@2001-01-05, 1.5@2001-01-08]
SELECT tprecision(tfloat '[1@2001-01-01,5@2001-01-05,1@2001-01-09]','1 day',
  '2001-01-01');
-- [1.5@2001-01-01, 4.5@2001-01-04, 4.5@2001-01-05, 1.5@2001-01-08, 1@2001-01-09]
SELECT tprecision(tfloat '[1@2001-01-01,5@2001-01-05,1@2001-01-09)','2 days',
  '2001-01-01');
-- [2@2001-01-01, 4@2001-01-03, 4@2001-01-05, 2@2001-01-07]
</pre><pre class="programlisting">
SELECT asText(tprecision(tgeompoint '[Point(1 1)@2001-01-01, Point(5 5)@2001-01-05,
  Point(1 1)@2001-01-09)', '1 day', '2001-01-01'));
/* [POINT(1.5 1.5)@2001-01-01, POINT(4.5 4.5)@2001-01-04, POINT(4.5 4.5)@2001-01-05,
   POINT(1.5 1.5)@2001-01-08] */
SELECT asText(tprecision(tgeompoint '[Point(1 1)@2001-01-01, Point(5 5)@2001-01-05,
  Point(1 1)@2001-01-09)', '2 days', '2001-01-01'));
/* [POINT(2 2)@2001-01-01, POINT(4 4)@2001-01-03, POINT(4 4)@2001-01-05,
   POINT(2 2)@2001-01-07] */
SELECT asText(tprecision(tgeompoint '[Point(1 1)@2001-01-01, Point(5 5)@2001-01-05,
  Point(1 1)@2001-01-09)', '4 days', '2001-01-01'));
-- [POINT(3 3)@2001-01-01, POINT(3 3)@2001-01-05]
</pre><p>Changing the precision of a temporal value is akin to changing its <span class="emphasis"><em>temporal granularity</em></span>, for example, from timestamps to hours or days, although the precision can be set to an arbitrary interval, such as 2 hours and 15 minutes. <a class="xref" href="ch09s02.html#fig_tprecision" title="Figure 9.3. Changing the precision of temporal floats with discrete, step, and linear interpolation.">Figure 9.3, “Changing the precision of temporal floats with discrete, step, and linear interpolation.”</a> illustrates a change of temporal precision for temporal floats with various interpolations.</p><div class="figure-float"><div class="figure"><a name="fig_tprecision"></a><p class="title"><b>Figure 9.3. Changing the precision of temporal floats with discrete, step, and linear interpolation.</b></p><div class="figure-contents"><div class="mediaobject"><object type="image/svg+xml" data="images/tprecision.svg" width="405"></object></div></div></div><br class="figure-break"></div></li></ul></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch09.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch09.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch09s03.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 9. Temporal Types: Analytics Operations </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Similarity</td></tr></table></div></body></html>
