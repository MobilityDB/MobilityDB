<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Instalación a partir de las fuentes</title><link rel="stylesheet" type="text/css" href="docbook.css"><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="MobilityDB 1.1 Manual de usuario"><link rel="up" href="ch01.html" title="Capítulo 1. Introducción"><link rel="prev" href="ch01s04.html" title="Licencias"><link rel="next" href="ch01s06.html" title="Instalación a partir de binarios"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Instalación a partir de las fuentes</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch01s04.html">Anterior</a> </td><th width="60%" align="center">Capítulo 1. Introducción</th><td width="20%" align="right"> <a accesskey="n" href="ch01s06.html">Siguiente</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installation_sources"></a>Instalación a partir de las fuentes</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="short_version"></a>Versión corta</h3></div></div></div><p>
				Para compilar asumiendo que tiene todas las dependencias en su ruta de búsqueda
			</p><pre class="programlisting">
git clone https://github.com/MobilityDB/MobilityDB
mkdir MobilityDB/build
cd MobilityDB/build
cmake  ..
make
sudo make install
</pre><p>
				Los comandos anteriores instalan la rama <code class="varname">master</code>. Si desea instalar otra rama, por ejemplo, <code class="varname">develop</code>, puede reemplazar el primer comando anterior de la siguiente manera:
			</p><pre class="programlisting">
git clone --branch develop https://github.com/MobilityDB/MobilityDB
</pre><p>
				También debe configurar lo siguiente en el archivo <code class="varname">postgresql.conf</code> según la versión de PostGIS que haya instalado (a continuación usamos PostGIS 3):
			</p><pre class="programlisting">
shared_preload_libraries = 'postgis-3'
max_locks_per_transaction = 128
</pre><p>
				Si no carga previamente la biblioteca PostGIS con la configuración anterior, no podrá cargar la biblioteca MobilityDB y obtendrá un mensaje de error como el siguiente:
			</p><pre class="programlisting">
ERROR:  could not load library "/usr/local/pgsql/lib/libMobilityDB-1.1.so":
  undefined symbol: ST_Distance
</pre><p>
				Puede encontrar la ubicación del archivo <code class="varname">postgresql.conf</code> de la manera siguiente.
			</p><pre class="programlisting">
$ which postgres
/usr/local/pgsql/bin/postgres
$ ls /usr/local/pgsql/data/postgresql.conf
/usr/local/pgsql/data/postgresql.conf
</pre><p>
				Como puede verse, los binarios de PostgreSQL están en el subdirectorio <code class="varname">bin</code> mientras que el archivo <code class="varname">postgresql.conf</code> está en el subdirectorio <code class="varname">data</code>.
			</p><p>
				Una vez que MobilityDB está instalado, debe habilitarse en cada base de datos en la que desee usarlo. En el siguiente ejemplo, usamos una base de datos llamada <code class="varname">mobility</code>.
			</p><pre class="programlisting">
createdb mobility
psql mobility -c "CREATE EXTENSION PostGIS"
psql mobility -c "CREATE EXTENSION MobilityDB"
</pre><p>
				Las dos extensiones PostGIS y MobilityDB también se pueden crear en un solo comando.
			</p><pre class="programlisting">
psql mobility -c "CREATE EXTENSION MobilityDB cascade"
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="get_sources"></a>Obtener las fuentes</h3></div></div></div><p>
				La última versión de MobilityDB se puede encontrar en <a class="ulink" href="https://github.com/MobilityDB/MobilityDB/releases/latest" target="_top">https://github.com/MobilityDB/MobilityDB/releases/latest</a>
			</p><p>
				<span class="bold"><strong>wget</strong></span>
			</p><p>
				Para descargar esta versión:
			</p><pre class="programlisting">
wget -O mobilitydb-1.0.tar.gz https://github.com/MobilityDB/MobilityDB/archive/v1.0.tar.gz
</pre><p>
				Ir a la <a class="xref" href="ch01s05.html#short_version" title="Versión corta">“Versión corta”</a> para las instrucciones de extracción y compilación.
			</p><p>
				<span class="bold"><strong>git</strong></span>
			</p><p>
				Para descargar el repositorio
			</p><pre class="programlisting">
git clone https://github.com/MobilityDB/MobilityDB.git
cd MobilityDB
git checkout v1.0
</pre><p>
				Ir a la <a class="xref" href="ch01s05.html#short_version" title="Versión corta">“Versión corta”</a> para las instrucciones de compilación (no hay tar ball).
			</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="enabling_database"></a>Habilitación de la base de datos</h3></div></div></div><p>
				MobilityDB es una extensión que depende de PostGIS. Habilitar PostGIS antes de habilitar MobilityDB en la base de datos se puede hacer de la siguiente manera
			</p><pre class="programlisting">
CREATE EXTENSION postgis;
CREATE EXTENSION mobilitydb;
</pre><p>
				Alternativamente, esto se puede hacer con un solo comando usando <code class="varname">CASCADE</code>, que instala la extensión PostGIS requerida antes de instalar la extensión MobilityDB
			</p><pre class="programlisting">
CREATE EXTENSION mobilitydb CASCADE;
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="dependencies"></a>Dependencias</h3></div></div></div><p>
				<span class="bold"><strong>Dependencias de compilación</strong></span>
			</p><p>
				Para poder compilar MobilityDB, asegúrese de que se cumplan las siguientes dependencias:
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Sistema de compilación multiplataforma <code class="filename">CMake</code>.</p></li><li class="listitem"><p>Compilador C <code class="filename">gcc</code> o <code class="filename">clang</code>. Se pueden usar otros compiladores ANSI C, pero pueden causar problemas al compilar algunas dependencias.</p></li><li class="listitem"><p>GNU Make (<code class="filename">gmake</code> o <code class="filename">make</code>) versión 3.1 o superior. Para muchos sistemas, GNU make es la versión predeterminada de make. Verifique la versión invocando <code class="filename">make -v</code>.</p></li><li class="listitem"><p>PostgreSQL versión 12 o superior. PostgreSQL está disponible en <a class="ulink" href="http://www.postgresql.org" target="_top">http://www.postgresql.org</a>.</p></li><li class="listitem"><p>PostGIS versión 3 o superior. PostGIS está disponible en <a class="ulink" href="https://postgis.net/" target="_top">https://postgis.net/</a>.</p></li><li class="listitem"><p>Biblioteca científica GNU (GSL). GSL está disponible en <a class="ulink" href="https://www.gnu.org/software/gsl/" target="_top">https://www.gnu.org/software/gsl/</a>. GSL se utiliza para los generadores de números aleatorios.</p></li></ul></div><p>
				Nótese que PostGIS tiene sus propias dependencias, como Proj, GEOS, LibXML2 o JSON-C y estas bibliotecas también se utilizan en MobilityDB. Consulte <a class="ulink" href="http://trac.osgeo.org/postgis/wiki/UsersWikiPostgreSQLPostGIS" target="_top">http://trac.osgeo.org/postgis/wiki/UsersWikiPostgreSQLPostGIS</a> para obtener una matriz de compatibilidad de PostGIS con PostgreSQL, GEOS y Proj.
			</p><p>
				<span class="bold"><strong>Dependencias opcionales</strong></span>
			</p><p>Para la documentación del usuario</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Los archivos DocBook DTD y XSL son necesarios para crear la documentación. Para Ubuntu, son proporcionados por los paquetes <code class="varname">docbook</code> y <code class="varname">docbook-xsl</code>.</p></li><li class="listitem"><p>El validador XML <code class="varname">xmllint</code> es necesario para validar los archivos XML de la documentación. Para Ubuntu, lo proporciona el paquete <code class="varname">libxml2</code>.</p></li><li class="listitem"><p>El procesador XSLT <code class="varname">xsltproc</code> es necesario para crear la documentación en formato HTML. Para Ubuntu, lo proporciona el paquete <code class="varname">libxslt</code>.</p></li><li class="listitem"><p>El programa <code class="varname">dblatex</code> es necesario para crear la documentación en formato PDF. Para Ubuntu, lo proporciona el paquete <code class="varname">dblatex</code>.</p></li><li class="listitem"><p>El programa <code class="varname">dbtoepub</code> es necesario para construir la documentación en formato EPUB. Para Ubuntu, lo proporciona el paquete <code class="varname">dbtoepub</code>.</p></li></ul></div><p>Para la documentación de los desarrolladores</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>El programa <code class="varname">doxygen</code> es necesario para construir la documentación. Para Ubuntu, lo proporciona el paquete <code class="varname">doxygen</code>.</p></li></ul></div><p>
				<span class="bold"><strong>Ejemplo: instalar dependencias en Linux</strong></span>
			</p><p>Dependencias de base de datos</p><pre class="programlisting">
sudo apt-get install postgresql-14 postgresql-server-dev-14 postgresql-14-postgis
</pre><p>Dependencias de construcción</p><pre class="programlisting">
sudo apt-get install cmake gcc libgsl-dev
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="configuring"></a>Configuración</h3></div></div></div><p>
				MobilityDB usa el sistema <code class="varname">cmake</code> para realizar la configuración. El directorio de compilación deber ser diferente del directorio de origen.
			</p><p>Para crear el directorio de compilación</p><pre class="programlisting">
mkdir build
</pre><p>Para ver las variables que se pueden configurar</p><pre class="programlisting">
cd build
cmake -L ..
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="build_install"></a>Construir e instalar</h3></div></div></div><p>
				Nótese que la versión actual de MobilityDB solo se ha probado en sistemas Linux, MacOS y Windows. Puede funcionar en otros sistemas similares a Unix, pero no se ha probado. Buscamos voluntarios que nos ayuden a probar MobilityDB en múltiples plataformas.
			</p><p>
				Las siguientes instrucciones comienzan desde <code class="varname">path/to/MobilityDB</code> en un sistema Linux
			</p><pre class="programlisting">
mkdir build
cd build
cmake ..
make
sudo make install
</pre><p>
				Cuando cambia la configuración
			</p><pre class="programlisting">
rm -rf build
</pre><p>
				e inicie el proceso de construcción como se mencionó anteriormente.
			</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="testing"></a>Pruebas</h3></div></div></div><p>
				MobilityDB utiliza <code class="varname">ctest</code>, el programa controlador de pruebas de CMake, para realizar pruebas. Este programa ejecutará las pruebas e informará los resultados.
			</p><p>
				Para ejecutar todas las pruebas
			</p><pre class="programlisting">
ctest
</pre><p>
				Para ejecutar un archivo de prueba dado
			</p><pre class="programlisting">
ctest -R '021_tbox'
</pre><p>
				Para ejecutar un conjunto de archivos de prueba determinados se pueden utilizar comodines
			</p><pre class="programlisting">
ctest -R '022_*'
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="documentation"></a>Documentación</h3></div></div></div><p>
				La documentación del usuario de MobilityDB se puede generar en formato HTML, PDF y EPUB. Además, la documentación está disponible en inglés y en otros idiomas (actualmente, solo en español). La documentación del usuario se puede generar en todos los formatos y en todos los idiomas, o se pueden especificar formatos y/o idiomas específicos. La documentación del desarrollador de MobilityDB solo se puede generar en formato HTML y en inglés.
			</p><p>
				Las variables utilizadas para generar la documentación del usuario y del desarrollador son las siguientes:
			</p><div class="table"><a name="idm297"></a><p class="title"><b>Tabla 1.1. Variables para la documentación del usuario y del desarrollador</b></p><div class="table-contents"><table class="table" summary="Variables para la documentación del usuario y del desarrollador" border="1"><colgroup><col><col><col></colgroup><thead><tr><th align="left">Variable</th><th align="left">Valor por defecto</th><th align="left">Comentario</th></tr></thead><tbody><tr><td align="left"><code class="varname">DOC_ALL</code></td><td align="left"><code class="varname">BOOL=OFF</code></td><td align="left">La documentación del usuario se genera en formatos HTML, PDF y EPUB.</td></tr><tr><td align="left"><code class="varname">DOC_HTML</code></td><td align="left"><code class="varname">BOOL=OFF</code></td><td align="left">La documentación del usuario se genera en formato HTML.</td></tr><tr><td align="left"><code class="varname">DOC_PDF</code></td><td align="left"><code class="varname">BOOL=OFF</code></td><td align="left">La documentación del usuario se genera en formato PDF.</td></tr><tr><td align="left"><code class="varname">DOC_EPUB</code></td><td align="left"><code class="varname">BOOL=OFF</code></td><td align="left">La documentación del usuario se genera en formato EPUB.</td></tr><tr><td align="left"><code class="varname">LANG_ALL</code></td><td align="left"><code class="varname">BOOL=OFF</code></td><td align="left">La documentación del usuario se genera en inglés y en todas las traducciones disponibles.</td></tr><tr><td align="left"><code class="varname">ES</code></td><td align="left"><code class="varname">BOOL=OFF</code></td><td align="left">La documentación del usuario se genera en inglés y en español.</td></tr><tr><td align="left"><code class="varname">DOC_DEV</code></td><td align="left"><code class="varname">BOOL=OFF</code></td><td align="left">La documentación del desarrollador en inglés se genera en formato HTML</td></tr></tbody></table></div></div><br class="table-break"><p>
				Generar la documentación del usuario y del desarrollador en todos los formatos y en todos los idiomas.
			</p><pre class="programlisting">
cmake -D DOC_ALL=ON -D LANG_ALL=ON -D DOC_DEV=ON ..
make doc
make doc_dev
</pre><p>
				Generar la documentación del usuario en formato HTML y en todos los idiomas.
			</p><pre class="programlisting">
cmake -D DOC_HTML=ON -D LANG_ALL=ON ..
make doc
</pre><p>
				Generar la documentación del usuario en inglés en todos los formatos.
			</p><pre class="programlisting">
cmake -D DOC_ALL=ON ..
make doc
</pre><p>
				Generar la documentación del usuario en formato PDF en inglés y en español.
			</p><pre class="programlisting">
cmake -D DOC_PDF=ON -D ES=ON ..
make doc
</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch01s04.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="ch01.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="ch01s06.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">Licencias </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> Instalación a partir de binarios</td></tr></table></div></body></html>
