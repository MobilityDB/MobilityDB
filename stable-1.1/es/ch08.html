<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Capítulo 8. Tipos temporales: Operaciones espaciales</title><link rel="stylesheet" type="text/css" href="docbook.css"><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="MobilityDB 1.1 Manual de usuario"><link rel="up" href="index.html" title="MobilityDB 1.1 Manual de usuario"><link rel="prev" href="ch07s03.html" title="Operaciones de texto"><link rel="next" href="ch08s02.html" title="Sistema de referencia espacial"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Capítulo 8. Tipos temporales: Operaciones espaciales</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch07s03.html">Anterior</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch08s02.html">Siguiente</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="temporal_types_spatial"></a>Capítulo 8. Tipos temporales: Operaciones espaciales</h1></div></div></div><div class="toc"><p><b>Tabla de contenidos</b></p><dl class="toc"><dt><span class="sect1"><a href="ch08.html#tpoint_inout">Entrada y salida</a></span></dt><dt><span class="sect1"><a href="ch08s02.html">Sistema de referencia espacial</a></span></dt><dt><span class="sect1"><a href="ch08s03.html">Operaciones de cuadro delimitador</a></span></dt><dt><span class="sect1"><a href="ch08s04.html">Accessores</a></span></dt><dt><span class="sect1"><a href="ch08s05.html">Transformaciones</a></span></dt><dt><span class="sect1"><a href="ch08s06.html">Operaciones de distancia</a></span></dt><dt><span class="sect1"><a href="ch08s07.html">Relaciones espaciales</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch08s07.html#idm4870">Relaciones espaciales alguna vez o siempre</a></span></dt><dt><span class="sect2"><a href="ch08s07.html#idm4983">Relaciones espaciales temporales</a></span></dt></dl></dd></dl></div><p>A continuación, especificamos con el símbolo <span class="inlinemediaobject"><img src="../images/cube.svg" width="13"></span>
 que la función admite puntos 3D y con el  símbolo <span class="inlinemediaobject"><img src="../images/world.svg" width="13"></span>
 que la función está disponible para geografías.</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tpoint_inout"></a>Entrada y salida</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="asText"></a><a class="indexterm" name="idm3930"></a><p>Obtener la representación de texto conocido (Well-Known Text o WKT) <span class="inlinemediaobject"><img src="../images/cube.svg" width="13"></span>
 <span class="inlinemediaobject"><img src="../images/world.svg" width="13"></span>
</p><p><code class="varname">asText({tpoint,tpoint[],geo[]}) → {text,text[]}</code></p><pre class="programlisting">
SELECT asText(tgeompoint 'SRID=4326;[Point(0 0 0)@2001-01-01, Point(1 1 1)@2001-01-02)');
-- [POINT Z (0 0 0)@2001-01-01, POINT Z (1 1 1)@2001-01-02)
SELECT asText(ARRAY[geometry 'Point(0 0)', 'Point(1 1)']);
-- {"POINT(0 0)","POINT(1 1)"}
</pre></li><li class="listitem"><a name="asEWKT"></a><a class="indexterm" name="idm3952"></a><p>Obtener la representación extendida de texto conocido (Extended Well-Known Text o EWKT)</p><p><code class="varname">asEWKT({tpoint,tpoint[],geo[]}) → {text,text[]}</code></p><pre class="programlisting">
SELECT asEWKT(tgeompoint 'SRID=4326;[Point(0 0 0)@2001-01-01, Point(1 1 1)@2001-01-02)');
-- SRID=4326;[POINT Z (0 0 0)@2001-01-01, POINT Z (1 1 1)@2001-01-02)
SELECT asEWKT(ARRAY[geometry 'SRID=5676;Point(0 0)', 'SRID=5676;Point(1 1)']);
-- {"SRID=5676;POINT(0 0)","SRID=5676;POINT(1 1)"}
</pre></li><li class="listitem"><a name="asMFJSON"></a><a class="indexterm" name="idm3960"></a><p>Obtener la representación JSON de características móviles (Moving Features JSON o MF-JSON) <span class="inlinemediaobject"><img src="../images/cube.svg" width="13"></span>
 <span class="inlinemediaobject"><img src="../images/world.svg" width="13"></span>
</p><p><code class="varname">asMFJSON(tpoint,options=0,flags=0,maxdecdigits=15) → text</code></p><p>El argumento <code class="varname">options</code> puede usarse para agregar BBOX y/o CRS en la salida MFJSON:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>0: significa que no hay opción (valor por defecto)</p></li><li class="listitem"><p>1: MFJSON BBOX</p></li><li class="listitem"><p>2: MFJSON Short CRS (e.g., EPSG:4326)</p></li><li class="listitem"><p>4: MFJSON Long CRS (e.g., urn:ogc:def:crs:EPSG::4326)</p></li></ul></div><p>El argumento <code class="varname">flags</code> puede usarse para personalizar la salida JSON, por ejemplo, para producir una salida JSON fácil de leer (para lectores humanos). Consulte la documentación de la biblioteca <code class="varname">json-c</code> para conocer los valores posibles. Los valores típicos son los siguientes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>0: means no option (default value)</p></li><li class="listitem"><p>1: JSON_C_TO_STRING_SPACED</p></li><li class="listitem"><p>2: JSON_C_TO_STRING_PRETTY</p></li></ul></div><p>El argumento <code class="varname">maxdecdigits</code> puede usarse para establecer el número máximo de decimales en la salida de los valores en punto flotante (por defecto 15).</p><pre class="programlisting">
SELECT asMFJSON(tgeompoint 'Point(1 2)@2001-01-01 18:00:00.15+02');
/* {"type":"MovingPoint","coordinates":[[1,2]],"datetimes":["2001-01-01T17:00:00.15+01"],
   "interpolation":"None"} */
SELECT asMFJSON(tgeompoint 'SRID=4326;
  Point(50.813810 4.384260)@2001-01-01 18:00:00.15+02', 3, 2);
/* {"type":"MovingPoint","crs":{"type":"name","properties":{"name":"EPSG:4326"}},
   "stBoundedBy":{"bbox":[50.81,4.38,50.81,4.38],
   "period":{"begin":"2001-01-01 17:00:00.15+01","end":"2001-01-01 17:00:00.15+01"}},
   "coordinates":[[50.81,4.38]],"datetimes":["2001-01-01T17:00:00.15+01"],
   "interpolation":"None"} */
</pre></li><li class="listitem"><a name="asBinary"></a><a class="indexterm" name="idm4005"></a><p>Obtener la representación binaria conocida (Well-Known Binary o WKB) <span class="inlinemediaobject"><img src="../images/cube.svg" width="13"></span>
 <span class="inlinemediaobject"><img src="../images/world.svg" width="13"></span>
</p><p><code class="varname">asBinary(tpoint,endian text='') → bytea</code></p><p>El resultado se codifica utilizando la codificación little-endian (NDR) o big-endian (XDR). Si no se especifica ninguna codificación, se utiliza la codificación de la máquina.</p><pre class="programlisting">
SELECT asBinary(tgeompoint 'Point(1 2 3)@2001-01-01');
-- \x012e0011000000000000f03f00000000000000400000000000000840009c57d3c11c0000
</pre></li><li class="listitem"><a name="asEWKB"></a><a class="indexterm" name="idm4028"></a><p>Obtener la representación extendida binaria conocida (Extended Well-Known Binary o EWKB) <span class="inlinemediaobject"><img src="../images/cube.svg" width="13"></span>
 <span class="inlinemediaobject"><img src="../images/world.svg" width="13"></span>
</p><p><code class="varname">asEWKB(tpoint,endian text='') → bytea</code></p><p>El resultado se codifica utilizando la codificación little-endian (NDR) o big-endian (XDR). Si no se especifica ninguna codificación, se utiliza la codificación de la máquina.</p><pre class="programlisting">
SELECT asEWKB(tgeogpoint 'SRID=7844;Point(1 2 3)@2001-01-01');
-- \x012f0071a41e0000000000000000f03f00000000000000400000000000000840009c57d3c11c0000
</pre></li><li class="listitem"><a name="asHexEWKB"></a><a class="indexterm" name="idm4051"></a><p>Obtener la representación hexadecimal extendida binaria conocida (Extended Well-Known Binary o EWKB) en formato texto <span class="inlinemediaobject"><img src="../images/cube.svg" width="13"></span>
 <span class="inlinemediaobject"><img src="../images/world.svg" width="13"></span>
</p><p><code class="varname">asHexEWKB(tpoint,endian text='') → text</code></p><p>El resultado se codifica utilizando la codificación little-endian (NDR) o big-endian (XDR). Si no se especifica ninguna codificación, se utiliza la codificación de la máquina.</p><pre class="programlisting">
SELECT asHexEWKB(tgeompoint 'SRID=3812;Point(1 2 3)@2001-01-01');
-- 012E0051E40E0000000000000000F03F00000000000000400000000000000840009C57D3C11C0000
</pre></li><li class="listitem"><a name="tgeompointFromText"></a><a class="indexterm" name="idm4074"></a><a class="indexterm" name="idm4077"></a><p>Entrar un punto temporal en una representación de texto conocido (Well-Known Text o WKT) <span class="inlinemediaobject"><img src="../images/cube.svg" width="13"></span>
 <span class="inlinemediaobject"><img src="../images/world.svg" width="13"></span>
</p><p><code class="varname">tgeompointFromText(text) → tgeompoint</code></p><p><code class="varname">tgeogpointFromText(text) → tgeogpoint</code></p><pre class="programlisting">
SELECT asEWKT(tgeompointFromText(text '[POINT(1 2)@2001-01-01, POINT(3 4)@2001-01-02]'));
-- [POINT(1 2)@2001-01-01, POINT(3 4)@2001-01-02]
SELECT asEWKT(tgeogpointFromText(text '[POINT(1 2)@2001-01-01, POINT(3 4)@2001-01-02]'));
-- SRID=4326;[POINT(1 2)@2001-01-01, POINT(3 4)@2001-01-02]
</pre></li><li class="listitem"><a name="tgeompointFromEWKT"></a><a class="indexterm" name="idm4101"></a><a class="indexterm" name="idm4104"></a><p>Entrar un punto temporal en una representación extendida de texto conocido (Extended Well-Known Text o EWKT) <span class="inlinemediaobject"><img src="../images/cube.svg" width="13"></span>
 <span class="inlinemediaobject"><img src="../images/world.svg" width="13"></span>
</p><p><code class="varname">tgeompointFromEWKT(text) → tgeompoint</code></p><p><code class="varname">tgeogpointFromEWKT(text) → tgeogpoint</code></p><pre class="programlisting">
SELECT asEWKT(tgeompointFromEWKT(text 'SRID=3812;[POINT(1 2)@2001-01-01,
  POINT(3 4)@2001-01-02]'));
-- SRID=3812;[POINT(1 2)@2001-01-01 00:00:00+01, POINT(3 4)@2001-01-02 00:00:00+01]
SELECT asEWKT(tgeogpointFromEWKT(text 'SRID=7844;[POINT(1 2)@2001-01-01,
	POINT(3 4)@2001-01-02]'));
-- SRID=7844;[POINT(1 2)@2001-01-01, POINT(3 4)@2001-01-02]
</pre></li><li class="listitem"><a name="tgeompointFromMFJSON"></a><a class="indexterm" name="idm4128"></a><a class="indexterm" name="idm4131"></a><p>Entrar un punto temporal en una representación JSON de características móviles (Moving Features) <span class="inlinemediaobject"><img src="../images/cube.svg" width="13"></span>
 <span class="inlinemediaobject"><img src="../images/world.svg" width="13"></span>
</p><p><code class="varname">tgeompointFromMFJSON(text) → tgeompoint</code></p><p><code class="varname">tgeogpointFromMFJSON(text) → tgeogpoint</code></p><pre class="programlisting">
SELECT asEWKT(tgeompointFromMFJSON(text '{"type":"MovingGeomPoint","crs":{"type":"name",
  "properties":{"name":"EPSG:4326"}},"coordinates":[[50.81,4.38]],
  "datetimes":["2001-01-01T17:00:00.15+01"],"interpolation":"None"}'));
-- SRID=4326;POINT(50.81 4.38)@2001-01-01 17:00:00.15+01
SELECT asEWKT(tgeogpointFromMFJSON(text '{"type":"MovingGeogPoint","crs":{"type":"name",
  "properties":{"name":"EPSG:4326"}},"coordinates":[[50.81,4.38]],
  "datetimes":["2001-01-01T17:00:00.15+01"],"interpolation":"None"}'));
-- SRID=4326;POINT(50.81 4.38)@2001-01-01 17:00:00.15+01
</pre></li><li class="listitem"><a name="tgeompointFromBinary"></a><a class="indexterm" name="idm4155"></a><a class="indexterm" name="idm4158"></a><p>Entrar un punto temporal en una representación binaria conocida (WKB) <span class="inlinemediaobject"><img src="../images/cube.svg" width="13"></span>
 <span class="inlinemediaobject"><img src="../images/world.svg" width="13"></span>
</p><p><code class="varname">tgeompointFromBinary(bytea) → tgeompoint</code></p><p><code class="varname">tgeogpointFromBinary(bytea) → tgeogpoint</code></p><pre class="programlisting">
SELECT asEWKT(tgeompointFromBinary(
  '\x012e0011000000000000f03f00000000000000400000000000000840009c57d3c11c0000'));
-- POINT Z (1 2 3)@2001-01-01
</pre></li><li class="listitem"><a name="tgeompointFromEWKB"></a><a class="indexterm" name="idm4182"></a><a class="indexterm" name="idm4185"></a><p>Entrar un punto temporal en una representación extendida binaria conocida (EWKB) <span class="inlinemediaobject"><img src="../images/cube.svg" width="13"></span>
 <span class="inlinemediaobject"><img src="../images/world.svg" width="13"></span>
</p><p><code class="varname">tgeompointFromEWKB(bytea) → tgeompoint</code></p><p><code class="varname">tgeogpointFromEWKB(bytea) → tgeogpoint</code></p><pre class="programlisting">
SELECT asEWKT(tgeogpointFromEWKB(
  '\x012f0071a41e0000000000000000f03f00000000000000400000000000000840009c57d3c11c0000'));
-- SRID=7844;POINT Z (1 1 1)@2001-01-01
</pre></li><li class="listitem"><a name="tgeompointFromHexEWKB"></a><a class="indexterm" name="idm4209"></a><a class="indexterm" name="idm4212"></a><p>Entrar un punto temporal geométrico en una representación hexadecimal extendida binaria conocida (HexEWKB) <span class="inlinemediaobject"><img src="../images/cube.svg" width="13"></span>
 <span class="inlinemediaobject"><img src="../images/world.svg" width="13"></span>
</p><p><code class="varname">tgeompointFromHexEWKB(text) → tgeompoint</code></p><p><code class="varname">tgeogpointFromHexEWKB(text) → tgeogpoint</code></p><pre class="programlisting">
SELECT asEWKT(tgeompointFromHexEWKB(
  '012E0051E40E0000000000000000F03F00000000000000400000000000000840009C57D3C11C0000'));
-- SRID=3812;POINT(1 2 3)@2001-01-01
</pre></li></ul></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch07s03.html">Anterior</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch08s02.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">Operaciones de texto </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> Sistema de referencia espacial</td></tr></table></div></body></html>
