<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Capítulo 3. Tipos de cuadro delimitador</title><link rel="stylesheet" type="text/css" href="docbook.css"><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="MobilityDB 1.1 Manual de usuario"><link rel="up" href="index.html" title="MobilityDB 1.1 Manual de usuario"><link rel="prev" href="ch02s12.html" title="Indexación"><link rel="next" href="ch03s02.html" title="Constructores"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Capítulo 3. Tipos de cuadro delimitador</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02s12.html">Anterior</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch03s02.html">Siguiente</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="box_types"></a>Capítulo 3. Tipos de cuadro delimitador</h1></div></div></div><div class="toc"><p><b>Tabla de contenidos</b></p><dl class="toc"><dt><span class="sect1"><a href="ch03.html#box_types_input_output">Entrada y salida</a></span></dt><dt><span class="sect1"><a href="ch03s02.html">Constructores</a></span></dt><dt><span class="sect1"><a href="ch03s03.html">Conversiones de tipo</a></span></dt><dt><span class="sect1"><a href="ch03s04.html">Accesores</a></span></dt><dt><span class="sect1"><a href="ch03s05.html">Transformaciones</a></span></dt><dt><span class="sect1"><a href="ch03s06.html">Sistema de referencia espacial</a></span></dt><dt><span class="sect1"><a href="ch03s07.html">Funciones de división</a></span></dt><dt><span class="sect1"><a href="ch03s08.html">Operaciones de conjuntos</a></span></dt><dt><span class="sect1"><a href="ch03s09.html">Operaciones de cuadro delimitador</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch03s09.html#idm1994">Operaciones topológicas</a></span></dt><dt><span class="sect2"><a href="ch03s09.html#idm2046">Operaciones de posición</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch03s10.html">Comparaciones</a></span></dt><dt><span class="sect1"><a href="ch03s11.html">Aggregaciones</a></span></dt><dt><span class="sect1"><a href="ch03s12.html">Indexación</a></span></dt></dl></div><p>A continuación presentamos las funciones y operadores para tipos cuadro delimitador. Estas funciones y operadores son polimórficos, es decir, sus argumentos pueden ser de varios tipos y el tipo del resultado puede depender del tipo de los argumentos. Para expresar esto, usamos la siguiente notación:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">box</code> representa cualquier tipos cuadro delimitador, es decir <code class="varname">tbox</code> o <code class="varname">stbox</code>.</p></li></ul></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="box_types_input_output"></a>Entrada y salida</h2></div></div></div><p>
			MobilityDB generaliza los formatos de entrada y salida Well-Known Text (WKT) y Well-Known Binary (WKB) del Open Geospatial Consortium para todos los tipos temporales. Presentamos a continuación las funciones de entrada y salida para los tipos de cuadro delimitador.
		</p><p>Un <code class="varname">tbox</code> se compone de dimensiónes de valor numérico y/o de tiempo. Para cada dimensión, se proporciona un rango, es decir, ya sea un <code class="varname">intspan</code> o un <code class="varname">floatspan</code> para la dimensión de valor y un <code class="varname">tstzspan</code> para la dimensión de tiempo. Ejemplos de entrada de valores <code class="varname">tbox</code> son los siguientes:
			</p><pre class="programlisting">
-- Dimensiones de valor y tiempo
SELECT tbox 'TBOXINT XT([1,3),[2001-01-01,2001-01-02])';
SELECT tbox 'TBOXFLOAT XT([1.5,2.5],[2001-01-01,2001-01-02])';
-- Sólo dimensión de valor
SELECT tbox 'TBOXINT X([1,3))';
SELECT tbox 'TBOXFLOAT X((1.5,2.5))';
-- Sólo dimensión de tiempo
SELECT tbox 'TBOX T((2001-01-01,2001-01-02))';
</pre><p>
		</p><p>Un <code class="varname">stbox</code> se compone de dimensiónes espacial y/o temporal, donde las coordenadas de la dimensión espacial pueden ser 2D o 3D. Para la dimensión de tiempo se da un <code class="varname">tstzspan</code>, y para la dimensión espacial se dan los valores mínimos y máximos de las coordenadas, donde estas últimas pueden ser cartesianas (planas) o geodésicas (esféricas). Se puede especificar el SRID de las coordenadas; si no es el caso, se asume un valor de 0 (desconocido) y 4326 (correspondiente a WGS84), respectivamente, para coordenadas planas y geodésicas. Los cuadros geodésicos siempre tienen una dimensión Z para tener en cuenta la curvatura de la esfera o esferoide subyacente. Ejemplos de entrada de valores <code class="varname">stbox</code> son los siguientes:
			</p><pre class="programlisting">
-- Sólo dimensión de valor con coordenadas X e Y
SELECT stbox 'STBOX X((1.0,2.0),(1.0,2.0))';
-- Sólo dimensión de valor con coordenadas X, Y y Z
SELECT stbox 'STBOX Z((1.0,2.0,3.0),(1.0,2.0,3.0))';
-- Dimensiones de valor (con coordenadas X e Y) y de tiempo
SELECT stbox 'STBOX XT(((1.0,2.0),(1.0,2.0)),[2001-01-03,2001-01-03])';
-- Dimensiones de valor (con coordenadas X, Y y Z) y de tiempo
SELECT stbox 'STBOX ZT(((1.0,2.0,3.0),(1.0,2.0,3.0)),[2001-01-01,2001-01-03])';
-- Sólo dimensión de tiempo
SELECT stbox 'STBOX T([2001-01-03,2001-01-03])';
-- Sólo dimensión de valores con coordenadas geodéticas X, Y y Z
SELECT stbox 'GEODSTBOX Z((1.0,2.0,3.0),(1.0,2.0,3.0))';
-- Dimensiones de valor (con coordenadas geodéticas X, Y y Z) y de tiempo
SELECT stbox 'GEODSTBOX ZT(((1.0,2.0,3.0),(1.0,2.0,3.0)),[2001-01-04,2001-01-04])';
-- Sólo dimensión temporal para cuadro geodético
SELECT stbox 'GEODSTBOX T([2001-01-03,2001-01-03])';
-- Se indica el SRID
SELECT stbox 'SRID=5676;STBOX XT(((1.0,2.0),(1.0,2.0)),[2001-01-04,2001-01-04])';
SELECT stbox 'SRID=4326;GEODSTBOX Z((1.0,2.0,3.0),(1.0,2.0,3.0))';
</pre><p>
		</p><p>
				Damos a continuación las funciones de entrada y salida de tipos de cuadro delimitador en formato textual (Well-Known Text o WKT) y binario (Well-Known Binary o WKB).
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="box_asText"></a><a class="indexterm" name="idm1506"></a><p>Obtener la representación textual conocida (Well-Known Text o WKT)</p><p><code class="varname">asText(box,maxdecdigits=15) → text</code></p><p>El argumento <code class="varname">maxdecdigits</code> se puede utilizar para definir el número máximo de decimales para la salida de los valores de coma flotante (por defecto 15).</p><pre class="programlisting">
SELECT asText(tbox 'TBOXFLOAT XT([1.123456789,2.123456789),[2001-01-01,2001-01-02))', 3);
-- TBOXFLOAT XT([1.123, 2.123),[2001-01-01 00:00:00+01, 2001-01-02 00:00:00+01))
SELECT asText(stbox 'STBOX Z((1.55,1.55,1.55),(2.55,2.55,2.55))', 0);
-- STBOX Z((2,2,2),(3,3,3))
</pre></li><li class="listitem"><a name="box_asBinary"></a><a class="indexterm" name="idm1516"></a><p>Obtener la representación binaria conocida (Well-Known Binary o WKB)</p><p><code class="varname">asBinary(box,endian text='') → bytea</code></p><p>El resultado se codifica utilizando la codificación little-endian (NDR) o big-endian (XDR). Si no se especifica ninguna codificación, se utiliza la codificación de la máquina.</p><pre class="programlisting">
SELECT asBinary(tbox 'TBOXFLOAT XT([1,2),[2001-01-01,2001-01-02))');
-- \x0103270001009c57d3c11c000000fc2ef1d51c00000d0001000000000000f03f0000000000000040
SELECT asBinary(tbox 'TBOXFLOAT XT([1,2),[2001-01-01,2001-01-02))', 'XDR');
-- \x000300270100001cc1d3579c0000001cd5f12efc00000d013ff00000000000004000000000000000
SELECT asBinary(stbox 'STBOX X((1,1),(2,2))');
-- \x0101000000000000f03f0000000000000040000000000000f03f0000000000000040
</pre></li><li class="listitem"><a name="box_asHexWKB"></a><a class="indexterm" name="idm1525"></a><p>Obtener la representación hexadecimal binaria conocida (HexWKB) en formato texto</p><p><code class="varname">asHexWKB(box,endian text='') → text</code></p><p>El resultado se codifica utilizando la codificación little-endian (NDR) o big-endian (XDR). Si no se especifica ninguna codificación, se utiliza la codificación de la máquina.</p><pre class="programlisting">
SELECT asHexWKB(tbox 'TBOXFLOAT XT([1,2),[2001-01-01,2001-01-02))');
-- 0103270001009C57D3C11C000000FC2EF1D51C00000D0001000000000000F03F0000000000000040
SELECT asHexWKB(tbox 'TBOXFLOAT XT([1,2)[2001-01-01,2001-01-02))', 'XDR');
-- 000300270100001CC1D3579C0000001CD5F12EFC00000D013FF00000000000004000000000000000
SELECT asHexWKB(stbox 'STBOX X((1,1),(2,2))');
-- 0101000000000000F03F0000000000000040000000000000F03F0000000000000040
</pre></li><li class="listitem"><a name="box_FromBinary"></a><a class="indexterm" name="idm1534"></a><a class="indexterm" name="idm1537"></a><p>Entrar un cuadro delimitador en una representación binaria conocida (WKB)</p><p><code class="varname">tboxFromBinary(bytea) → tbox</code></p><p><code class="varname">stboxFromBinary(bytea) → stbox</code></p><pre class="programlisting">
SELECT tboxFromBinary(
  '\x0103270001009c57d3c11c000000fc2ef1d51c00000d0001000000000000f03f0000000000000040');
-- TBOXFLOAT XT([1,2),[2001-01-01,2001-01-02))
SELECT stboxFromBinary(
  '\x0101000000000000f03f0000000000000040000000000000f03f0000000000000040');
--  STBOX X((1,1),(2,2))
</pre></li><li class="listitem"><a name="box_FromHexWKB"></a><a class="indexterm" name="idm1547"></a><a class="indexterm" name="idm1550"></a><p>Entrar un cuadro delimitador temporal en una representación hexadecimal binaria conocida (HexWKB)</p><p><code class="varname">tboxFromHexWKB(text) → tbox</code></p><p><code class="varname">stboxFromHexWKB(text) → stbox</code></p><pre class="programlisting">
SELECT tboxFromHexWKB(
  '0103270001009C57D3C11C000000FC2EF1D51C00000D0001000000000000F03F0000000000000040');
-- TBOXFLOAT XT([1,2),[2001-01-01,2001-01-02)))
SELECT stboxFromHexWKB(
  '0101000000000000F03F0000000000000040000000000000F03F0000000000000040');
-- STBOX X((1,1),(2,2))
</pre></li></ul></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02s12.html">Anterior</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch03s02.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">Indexación </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> Constructores</td></tr></table></div></body></html>
