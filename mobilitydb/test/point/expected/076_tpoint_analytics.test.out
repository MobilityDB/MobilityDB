SELECT ST_AsText(tgeompoint 'Point(1 1)@2000-01-01'::geometry);
        st_astext        
-------------------------
 POINT M (1 1 946684800)
(1 row)

SELECT array_agg(ST_AsText((dp).geom)) FROM (SELECT ST_DumpPoints(tgeompoint '{Point(1 1)@2000-01-01, Point(2 2)@2000-01-02, Point(1 1)@2000-01-03}'::geometry)) AS t(dp);
                                    array_agg                                    
---------------------------------------------------------------------------------
 {"POINT M (1 1 946684800)","POINT M (2 2 946771200)","POINT M (1 1 946857600)"}
(1 row)

SELECT ST_AsText(tgeompoint '[Point(1 1)@2000-01-01, Point(2 2)@2000-01-02, Point(1 1)@2000-01-03]'::geometry);
                        st_astext                         
----------------------------------------------------------
 LINESTRING M (1 1 946684800,2 2 946771200,1 1 946857600)
(1 row)

SELECT ST_AsText(tgeompoint '{[Point(1 1)@2000-01-01, Point(2 2)@2000-01-02, Point(1 1)@2000-01-03],[Point(3 3)@2000-01-04, Point(3 3)@2000-01-05]}'::geometry);
                                           st_astext                                           
-----------------------------------------------------------------------------------------------
 MULTILINESTRING M ((1 1 946684800,2 2 946771200,1 1 946857600),(3 3 946944000,3 3 947030400))
(1 row)

SELECT ST_AsText(tgeogpoint 'Point(1.5 1.5)@2000-01-01'::geography);
          st_astext          
-----------------------------
 POINT M (1.5 1.5 946684800)
(1 row)

SELECT array_agg(ST_AsText((dp).geom)) FROM (SELECT ST_DumpPoints((tgeogpoint '{Point(1.5 1.5)@2000-01-01, Point(2.5 2.5)@2000-01-02, Point(1.5 1.5)@2000-01-03}'::geography)::geometry)) AS t(dp);
                                          array_agg                                          
---------------------------------------------------------------------------------------------
 {"POINT M (1.5 1.5 946684800)","POINT M (2.5 2.5 946771200)","POINT M (1.5 1.5 946857600)"}
(1 row)

SELECT ST_AsText(tgeogpoint '[Point(1.5 1.5)@2000-01-01, Point(2.5 2.5)@2000-01-02, Point(1.5 1.5)@2000-01-03]'::geography);
                              st_astext                               
----------------------------------------------------------------------
 LINESTRING M (1.5 1.5 946684800,2.5 2.5 946771200,1.5 1.5 946857600)
(1 row)

SELECT ST_AsText(tgeogpoint '{[Point(1.5 1.5)@2000-01-01, Point(2.5 2.5)@2000-01-02, Point(1.5 1.5)@2000-01-03],[Point(3.5 3.5)@2000-01-04, Point(3.5 3.5)@2000-01-05]}'::geography);
                                                     st_astext                                                     
-------------------------------------------------------------------------------------------------------------------
 MULTILINESTRING M ((1.5 1.5 946684800,2.5 2.5 946771200,1.5 1.5 946857600),(3.5 3.5 946944000,3.5 3.5 947030400))
(1 row)

SELECT ST_AsText(tgeompoint 'Point(1 1 1)@2000-01-01'::geometry);
         st_astext          
----------------------------
 POINT ZM (1 1 1 946684800)
(1 row)

SELECT array_agg(ST_AsText((dp).geom)) FROM (SELECT ST_DumpPoints(tgeompoint '{Point(1 1 1)@2000-01-01, Point(2 2 2)@2000-01-02, Point(1 1 1)@2000-01-03}'::geometry)) AS t(dp);
                                        array_agg                                         
------------------------------------------------------------------------------------------
 {"POINT ZM (1 1 1 946684800)","POINT ZM (2 2 2 946771200)","POINT ZM (1 1 1 946857600)"}
(1 row)

SELECT ST_AsText(tgeompoint '[Point(1 1 1)@2000-01-01, Point(2 2 2)@2000-01-02, Point(1 1 1)@2000-01-03]'::geometry);
                            st_astext                            
-----------------------------------------------------------------
 LINESTRING ZM (1 1 1 946684800,2 2 2 946771200,1 1 1 946857600)
(1 row)

SELECT ST_AsText(tgeompoint '{[Point(1 1 1)@2000-01-01, Point(2 2 2)@2000-01-02, Point(1 1 1)@2000-01-03],[Point(3 3 3)@2000-01-04, Point(3 3 3)@2000-01-05]}'::geometry);
                                                st_astext                                                 
----------------------------------------------------------------------------------------------------------
 MULTILINESTRING ZM ((1 1 1 946684800,2 2 2 946771200,1 1 1 946857600),(3 3 3 946944000,3 3 3 947030400))
(1 row)

SELECT ST_AsText(tgeogpoint 'Point(1.5 1.5 1.5)@2000-01-01'::geography);
            st_astext             
----------------------------------
 POINT ZM (1.5 1.5 1.5 946684800)
(1 row)

SELECT array_agg(ST_AsText((dp).geom)) FROM (SELECT ST_DumpPoints((tgeogpoint '{Point(1.5 1.5 1.5)@2000-01-01, Point(2.5 2.5 2.5)@2000-01-02, Point(1.5 1.5 1.5)@2000-01-03}'::geography)::geometry)) AS t(dp);
                                                 array_agg                                                  
------------------------------------------------------------------------------------------------------------
 {"POINT ZM (1.5 1.5 1.5 946684800)","POINT ZM (2.5 2.5 2.5 946771200)","POINT ZM (1.5 1.5 1.5 946857600)"}
(1 row)

SELECT ST_AsText(tgeogpoint '[Point(1.5 1.5 1.5)@2000-01-01, Point(2.5 2.5 2.5)@2000-01-02, Point(1.5 1.5 1.5)@2000-01-03]'::geography);
                                     st_astext                                     
-----------------------------------------------------------------------------------
 LINESTRING ZM (1.5 1.5 1.5 946684800,2.5 2.5 2.5 946771200,1.5 1.5 1.5 946857600)
(1 row)

SELECT ST_AsText(tgeogpoint '{[Point(1.5 1.5 1.5)@2000-01-01, Point(2.5 2.5 2.5)@2000-01-02, Point(1.5 1.5 1.5)@2000-01-03],[Point(3.5 3.5 3.5)@2000-01-04, Point(3.5 3.5 3.5)@2000-01-05]}'::geography);
                                                               st_astext                                                                
----------------------------------------------------------------------------------------------------------------------------------------
 MULTILINESTRING ZM ((1.5 1.5 1.5 946684800,2.5 2.5 2.5 946771200,1.5 1.5 1.5 946857600),(3.5 3.5 3.5 946944000,3.5 3.5 3.5 947030400))
(1 row)

SELECT array_agg(ST_AsText((dp).geom)) FROM (SELECT ST_DumpPoints(tgeompoint 'Interp=Step;[Point(0 0)@2000-01-01, Point(1 1)@2000-01-02]'::geometry)) AS t(dp);
                       array_agg                       
-------------------------------------------------------
 {"POINT M (0 0 946684800)","POINT M (1 1 946771200)"}
(1 row)

SELECT ST_AsText(asGeometry(tgeompoint '[Point(1 1)@2000-01-01, Point(2 2)@2000-01-02, Point(1 1)@2000-01-03]', true));
                                    st_astext                                    
---------------------------------------------------------------------------------
 MULTILINESTRING M ((1 1 946684800,2 2 946771200),(2 2 946771200,1 1 946857600))
(1 row)

SELECT ST_AsText(asGeometry(tgeompoint '{[Point(1 1)@2000-01-01, Point(2 2)@2000-01-02, Point(1 1)@2000-01-03],[Point(3 3)@2000-01-04, Point(3 3)@2000-01-05]}', true));
                                                   st_astext                                                   
---------------------------------------------------------------------------------------------------------------
 MULTILINESTRING M ((1 1 946684800,2 2 946771200),(2 2 946771200,1 1 946857600),(3 3 946944000,3 3 947030400))
(1 row)

SELECT ST_AsText(asGeography(tgeogpoint '[Point(1.5 1.5)@2000-01-01, Point(2.5 2.5)@2000-01-02, Point(1.5 1.5)@2000-01-03]', true));
                                            st_astext                                            
-------------------------------------------------------------------------------------------------
 MULTILINESTRING M ((1.5 1.5 946684800,2.5 2.5 946771200),(2.5 2.5 946771200,1.5 1.5 946857600))
(1 row)

SELECT ST_AsText(asGeography(tgeogpoint '{[Point(1.5 1.5)@2000-01-01, Point(2.5 2.5)@2000-01-02, Point(1.5 1.5)@2000-01-03],[Point(3.5 3.5)@2000-01-04, Point(3.5 3.5)@2000-01-05]}', true));
                                                               st_astext                                                               
---------------------------------------------------------------------------------------------------------------------------------------
 MULTILINESTRING M ((1.5 1.5 946684800,2.5 2.5 946771200),(2.5 2.5 946771200,1.5 1.5 946857600),(3.5 3.5 946944000,3.5 3.5 947030400))
(1 row)

SELECT ST_AsText(asGeometry(tgeompoint '{[Point(1 1)@2000-01-01]}', true));
        st_astext        
-------------------------
 POINT M (1 1 946684800)
(1 row)

select ST_AsText(asGeometry(tgeompoint '{[Point(1 1)@2000-01-01, Point(2 2)@2000-01-02],[Point(3 3)@2000-01-03]}', true));
                                         st_astext                                         
-------------------------------------------------------------------------------------------
 GEOMETRYCOLLECTION M (LINESTRING M (1 1 946684800,2 2 946771200),POINT M (3 3 946857600))
(1 row)

SELECT ST_AsText(asGeometry(tgeompoint '[Point(1 1 1)@2000-01-01, Point(2 2 2)@2000-01-02, Point(1 1 1)@2000-01-03]', true));
                                        st_astext                                         
------------------------------------------------------------------------------------------
 MULTILINESTRING ZM ((1 1 1 946684800,2 2 2 946771200),(2 2 2 946771200,1 1 1 946857600))
(1 row)

SELECT ST_AsText(asGeometry(tgeompoint '{[Point(1 1 1)@2000-01-01, Point(2 2 2)@2000-01-02, Point(1 1 1)@2000-01-03],[Point(3 3 3)@2000-01-04, Point(3 3 3)@2000-01-05]}', true));
                                                         st_astext                                                          
----------------------------------------------------------------------------------------------------------------------------
 MULTILINESTRING ZM ((1 1 1 946684800,2 2 2 946771200),(2 2 2 946771200,1 1 1 946857600),(3 3 3 946944000,3 3 3 947030400))
(1 row)

SELECT ST_AsText(asGeography(tgeogpoint '[Point(1.5 1.5 1.5)@2000-01-01, Point(2.5 2.5 2.5)@2000-01-02, Point(1.5 1.5 1.5)@2000-01-03]', true));
                                                    st_astext                                                     
------------------------------------------------------------------------------------------------------------------
 MULTILINESTRING ZM ((1.5 1.5 1.5 946684800,2.5 2.5 2.5 946771200),(2.5 2.5 2.5 946771200,1.5 1.5 1.5 946857600))
(1 row)

SELECT ST_AsText(asGeography(tgeogpoint '{[Point(1.5 1.5 1.5)@2000-01-01, Point(2.5 2.5 2.5)@2000-01-02, Point(1.5 1.5 1.5)@2000-01-03],[Point(3.5 3.5 3.5)@2000-01-04, Point(3.5 3.5 3.5)@2000-01-05]}', true));
                                                                           st_astext                                                                            
----------------------------------------------------------------------------------------------------------------------------------------------------------------
 MULTILINESTRING ZM ((1.5 1.5 1.5 946684800,2.5 2.5 2.5 946771200),(2.5 2.5 2.5 946771200,1.5 1.5 1.5 946857600),(3.5 3.5 3.5 946944000,3.5 3.5 3.5 947030400))
(1 row)

SELECT asText((tgeompoint 'Point(1 1)@2000-01-01'::geometry)::tgeompoint);
              astext               
-----------------------------------
 POINT(1 1)@2000-01-01 00:00:00+00
(1 row)

SELECT asText((tgeompoint '{Point(1 1)@2000-01-01, Point(2 2)@2000-01-02, Point(1 1)@2000-01-03}'::geometry)::tgeompoint);
                                                  astext                                                   
-----------------------------------------------------------------------------------------------------------
 {POINT(1 1)@2000-01-01 00:00:00+00, POINT(2 2)@2000-01-02 00:00:00+00, POINT(1 1)@2000-01-03 00:00:00+00}
(1 row)

SELECT asText((tgeompoint '[Point(1 1)@2000-01-01, Point(2 2)@2000-01-02, Point(1 1)@2000-01-03]'::geometry)::tgeompoint);
                                                  astext                                                   
-----------------------------------------------------------------------------------------------------------
 [POINT(1 1)@2000-01-01 00:00:00+00, POINT(2 2)@2000-01-02 00:00:00+00, POINT(1 1)@2000-01-03 00:00:00+00]
(1 row)

SELECT asText((tgeompoint '{[Point(1 1)@2000-01-01, Point(2 2)@2000-01-02, Point(1 1)@2000-01-03],[Point(3 3)@2000-01-04, Point(3 3)@2000-01-05]}'::geometry)::tgeompoint);
                                                                                       astext                                                                                        
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 {[POINT(1 1)@2000-01-01 00:00:00+00, POINT(2 2)@2000-01-02 00:00:00+00, POINT(1 1)@2000-01-03 00:00:00+00], [POINT(3 3)@2000-01-04 00:00:00+00, POINT(3 3)@2000-01-05 00:00:00+00]}
(1 row)

SELECT asText((tgeogpoint 'Point(1.5 1.5)@2000-01-01'::geography)::tgeogpoint);
                astext                 
---------------------------------------
 POINT(1.5 1.5)@2000-01-01 00:00:00+00
(1 row)

SELECT asText((tgeogpoint '{Point(1.5 1.5)@2000-01-01, Point(2.5 2.5)@2000-01-02, Point(1.5 1.5)@2000-01-03}'::geography)::tgeogpoint);
                                                        astext                                                         
-----------------------------------------------------------------------------------------------------------------------
 {POINT(1.5 1.5)@2000-01-01 00:00:00+00, POINT(2.5 2.5)@2000-01-02 00:00:00+00, POINT(1.5 1.5)@2000-01-03 00:00:00+00}
(1 row)

SELECT asText((tgeogpoint '[Point(1.5 1.5)@2000-01-01, Point(2.5 2.5)@2000-01-02, Point(1.5 1.5)@2000-01-03]'::geography)::tgeogpoint);
                                                        astext                                                         
-----------------------------------------------------------------------------------------------------------------------
 [POINT(1.5 1.5)@2000-01-01 00:00:00+00, POINT(2.5 2.5)@2000-01-02 00:00:00+00, POINT(1.5 1.5)@2000-01-03 00:00:00+00]
(1 row)

SELECT asText((tgeogpoint '{[Point(1.5 1.5)@2000-01-01, Point(2.5 2.5)@2000-01-02, Point(1.5 1.5)@2000-01-03],[Point(3.5 3.5)@2000-01-04, Point(3.5 3.5)@2000-01-05]}'::geography)::tgeogpoint);
                                                                                                 astext                                                                                                  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 {[POINT(1.5 1.5)@2000-01-01 00:00:00+00, POINT(2.5 2.5)@2000-01-02 00:00:00+00, POINT(1.5 1.5)@2000-01-03 00:00:00+00], [POINT(3.5 3.5)@2000-01-04 00:00:00+00, POINT(3.5 3.5)@2000-01-05 00:00:00+00]}
(1 row)

SELECT asText((tgeompoint 'Point(1 1 1)@2000-01-01'::geometry)::tgeompoint);
                 astext                 
----------------------------------------
 POINT Z (1 1 1)@2000-01-01 00:00:00+00
(1 row)

SELECT asText((tgeompoint '{Point(1 1 1)@2000-01-01, Point(2 2 2)@2000-01-02, Point(1 1 1)@2000-01-03}'::geometry)::tgeompoint);
                                                          astext                                                          
--------------------------------------------------------------------------------------------------------------------------
 {POINT Z (1 1 1)@2000-01-01 00:00:00+00, POINT Z (2 2 2)@2000-01-02 00:00:00+00, POINT Z (1 1 1)@2000-01-03 00:00:00+00}
(1 row)

SELECT asText((tgeompoint '[Point(1 1 1)@2000-01-01, Point(2 2 2)@2000-01-02, Point(1 1 1)@2000-01-03]'::geometry)::tgeompoint);
                                                          astext                                                          
--------------------------------------------------------------------------------------------------------------------------
 [POINT Z (1 1 1)@2000-01-01 00:00:00+00, POINT Z (2 2 2)@2000-01-02 00:00:00+00, POINT Z (1 1 1)@2000-01-03 00:00:00+00]
(1 row)

SELECT asText((tgeompoint '{[Point(1 1 1)@2000-01-01, Point(2 2 2)@2000-01-02, Point(1 1 1)@2000-01-03],[Point(3 3 3)@2000-01-04, Point(3 3 3)@2000-01-05]}'::geometry)::tgeompoint);
                                                                                                    astext                                                                                                    
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 {[POINT Z (1 1 1)@2000-01-01 00:00:00+00, POINT Z (2 2 2)@2000-01-02 00:00:00+00, POINT Z (1 1 1)@2000-01-03 00:00:00+00], [POINT Z (3 3 3)@2000-01-04 00:00:00+00, POINT Z (3 3 3)@2000-01-05 00:00:00+00]}
(1 row)

SELECT asText((tgeogpoint 'Point(1.5 1.5 1.5)@2000-01-01'::geography)::tgeogpoint);
                    astext                    
----------------------------------------------
 POINT Z (1.5 1.5 1.5)@2000-01-01 00:00:00+00
(1 row)

SELECT asText((tgeogpoint '{Point(1.5 1.5 1.5)@2000-01-01, Point(2.5 2.5 2.5)@2000-01-02, Point(1.5 1.5 1.5)@2000-01-03}'::geography)::tgeogpoint);
                                                                   astext                                                                   
--------------------------------------------------------------------------------------------------------------------------------------------
 {POINT Z (1.5 1.5 1.5)@2000-01-01 00:00:00+00, POINT Z (2.5 2.5 2.5)@2000-01-02 00:00:00+00, POINT Z (1.5 1.5 1.5)@2000-01-03 00:00:00+00}
(1 row)

SELECT asText((tgeogpoint '[Point(1.5 1.5 1.5)@2000-01-01, Point(2.5 2.5 2.5)@2000-01-02, Point(1.5 1.5 1.5)@2000-01-03]'::geography)::tgeogpoint);
                                                                   astext                                                                   
--------------------------------------------------------------------------------------------------------------------------------------------
 [POINT Z (1.5 1.5 1.5)@2000-01-01 00:00:00+00, POINT Z (2.5 2.5 2.5)@2000-01-02 00:00:00+00, POINT Z (1.5 1.5 1.5)@2000-01-03 00:00:00+00]
(1 row)

SELECT asText((tgeogpoint '{[Point(1.5 1.5 1.5)@2000-01-01, Point(2.5 2.5 2.5)@2000-01-02, Point(1.5 1.5 1.5)@2000-01-03],[Point(3.5 3.5 3.5)@2000-01-04, Point(3.5 3.5 3.5)@2000-01-05]}'::geography)::tgeogpoint);
                                                                                                                   astext                                                                                                                   
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 {[POINT Z (1.5 1.5 1.5)@2000-01-01 00:00:00+00, POINT Z (2.5 2.5 2.5)@2000-01-02 00:00:00+00, POINT Z (1.5 1.5 1.5)@2000-01-03 00:00:00+00], [POINT Z (3.5 3.5 3.5)@2000-01-04 00:00:00+00, POINT Z (3.5 3.5 3.5)@2000-01-05 00:00:00+00]}
(1 row)

/* Errors */
SELECT geometry 'POINT empty'::tgeompoint;
ERROR:  Only non-empty geometries accepted
SELECT geometry 'POINT(1 1)'::tgeompoint;
ERROR:  Only geometries with M dimension accepted
SELECT geometry 'POLYGON M((1 1 946681200,1 2 946681200,2 2 946681200,2 1 946681200,1 1 946681200))'::tgeompoint;
ERROR:  Invalid geometry type for trajectory
SELECT geometry 'MULTIPOINT M (1 1 946767600,1 1 946681200)'::tgeompoint;
ERROR:  Trajectory must be valid
SELECT geometry 'LINESTRING M (1 1 946767600,1 1 946681200)'::tgeompoint;
ERROR:  Trajectory must be valid
SELECT geometry 'GEOMETRYCOLLECTION M (LINESTRING M (1 1 946681200,2 2 946767600), POLYGON M((1 1 946681200,1 2 946681200,2 2 946681200,2 1 946681200,1 1 946681200)))'::tgeompoint;
ERROR:  Component geometry/geography must be of type Point(Z)M or Linestring(Z)M
SELECT ST_AsText(geoMeasure(tgeompoint 'Point(1 1)@2000-01-01', '5@2000-01-01'));
    st_astext    
-----------------
 POINT M (1 1 5)
(1 row)

SELECT array_agg(ST_AsText((dp).geom)) FROM (SELECT ST_DumpPoints(geoMeasure(tgeompoint '{Point(1 1)@2000-01-01, Point(2 2)@2000-01-02, Point(1 1)@2000-01-03}', '{5@2000-01-01, 7@2000-01-02, 5@2000-01-03}'))) AS t(dp);
                        array_agg                        
---------------------------------------------------------
 {"POINT M (1 1 5)","POINT M (2 2 7)","POINT M (1 1 5)"}
(1 row)

SELECT ST_AsText(geoMeasure(tgeompoint '[Point(1 1)@2000-01-01, Point(2 2)@2000-01-02, Point(1 1)@2000-01-03]', '[5@2000-01-01, 7@2000-01-02, 5@2000-01-03]'));
            st_astext             
----------------------------------
 LINESTRING M (1 1 5,2 2 7,1 1 5)
(1 row)

SELECT ST_AsText(geoMeasure(tgeompoint '{[Point(1 1)@2000-01-01, Point(2 2)@2000-01-02, Point(1 1)@2000-01-03],[Point(3 3)@2000-01-04, Point(3 3)@2000-01-05]}', '{[5@2000-01-01, 7@2000-01-02, 5@2000-01-03],[5@2000-01-04, 5@2000-01-05]}'));
                                st_astext                                
-------------------------------------------------------------------------
 GEOMETRYCOLLECTION M (LINESTRING M (1 1 5,2 2 7,1 1 5),POINT M (3 3 5))
(1 row)

SELECT ST_AsText(geoMeasure(tgeogpoint 'Point(1.5 1.5)@2000-01-01', '5.5@2000-01-01'));
       st_astext       
-----------------------
 POINT M (1.5 1.5 5.5)
(1 row)

SELECT array_agg(ST_AsText((dp).geom)) FROM (SELECT ST_DumpPoints(geoMeasure(tgeogpoint '{Point(1.5 1.5)@2000-01-01, Point(2.5 2.5)@2000-01-02, Point(1.5 1.5)@2000-01-03}', '{5.5@2000-01-01, 7.5@2000-01-02, 5@2000-01-03}')::geometry)) AS t(dp);
                                array_agg                                
-------------------------------------------------------------------------
 {"POINT M (1.5 1.5 5.5)","POINT M (2.5 2.5 7.5)","POINT M (1.5 1.5 5)"}
(1 row)

SELECT ST_AsText(geoMeasure(tgeogpoint '[Point(1.5 1.5)@2000-01-01, Point(2.5 2.5)@2000-01-02, Point(1.5 1.5)@2000-01-03]', '[5.5@2000-01-01, 7.5@2000-01-02, 5.5@2000-01-03]'));
                     st_astext                      
----------------------------------------------------
 LINESTRING M (1.5 1.5 5.5,2.5 2.5 7.5,1.5 1.5 5.5)
(1 row)

SELECT ST_AsText(geoMeasure(tgeogpoint '[Point(1.5 1.5)@2000-01-01, Point(2.5 2.5)@2000-01-02, Point(1.5 1.5)@2000-01-03]', '[5.5@2000-01-01, 7.5@2000-01-02, 5.5@2000-01-03]', true));
                                st_astext                                
-------------------------------------------------------------------------
 MULTILINESTRING M ((1.5 1.5 5.5,2.5 2.5 5.5),(2.5 2.5 7.5,1.5 1.5 7.5))
(1 row)

SELECT ST_AsText(geoMeasure(tgeogpoint '{[Point(1.5 1.5)@2000-01-01, Point(2.5 2.5)@2000-01-02, Point(1.5 1.5)@2000-01-03],[Point(3.5 3.5)@2000-01-04, Point(3.5 3.5)@2000-01-05]}', '{[5.5@2000-01-01, 7.5@2000-01-02, 5.5@2000-01-03],[5.5@2000-01-04, 5.5@2000-01-05]}'));
                                            st_astext                                            
-------------------------------------------------------------------------------------------------
 GEOMETRYCOLLECTION M (LINESTRING M (1.5 1.5 5.5,2.5 2.5 7.5,1.5 1.5 5.5),POINT M (3.5 3.5 5.5))
(1 row)

SELECT ST_AsText(geoMeasure(tgeogpoint '{[Point(1.5 1.5)@2000-01-01, Point(2.5 2.5)@2000-01-02, Point(1.5 1.5)@2000-01-03],[Point(3.5 3.5)@2000-01-04, Point(3.5 3.5)@2000-01-05]}', '{[5.5@2000-01-01, 7.5@2000-01-02, 5.5@2000-01-03],[5.5@2000-01-04, 5.5@2000-01-05]}', true));
                                             st_astext                                             
---------------------------------------------------------------------------------------------------
 MULTILINESTRING M ((1.5 1.5 5.5,2.5 2.5 5.5),(2.5 2.5 7.5,1.5 1.5 7.5),(3.5 3.5 5.5,3.5 3.5 5.5))
(1 row)

SELECT ST_AsText(geoMeasure(tgeompoint 'Point(1 1 1)@2000-01-01', '5@2000-01-01'));
     st_astext      
--------------------
 POINT ZM (1 1 1 5)
(1 row)

SELECT array_agg(ST_AsText((dp).geom)) FROM (SELECT ST_DumpPoints(geoMeasure(tgeompoint '{Point(1 1 1)@2000-01-01, Point(2 2 2)@2000-01-02, Point(1 1 1)@2000-01-03}', '{5@2000-01-01, 7@2000-01-02, 5@2000-01-03}'))) AS t(dp);
                            array_agg                             
------------------------------------------------------------------
 {"POINT ZM (1 1 1 5)","POINT ZM (2 2 2 7)","POINT ZM (1 1 1 5)"}
(1 row)

SELECT ST_AsText(geoMeasure(tgeompoint '[Point(1 1 1)@2000-01-01, Point(2 2 2)@2000-01-02, Point(1 1 1)@2000-01-03]', '[5@2000-01-01, 7@2000-01-02, 5@2000-01-03]'));
                st_astext                
-----------------------------------------
 LINESTRING ZM (1 1 1 5,2 2 2 7,1 1 1 5)
(1 row)

SELECT ST_AsText(geoMeasure(tgeompoint '{[Point(1 1 1)@2000-01-01, Point(2 2 2)@2000-01-02, Point(1 1 1)@2000-01-03],[Point(3 3 3)@2000-01-04, Point(3 3 3)@2000-01-05]}', '{[5@2000-01-01, 7@2000-01-02, 5@2000-01-03],[5@2000-01-04, 5@2000-01-05]}'));
                                     st_astext                                      
------------------------------------------------------------------------------------
 GEOMETRYCOLLECTION ZM (LINESTRING ZM (1 1 1 5,2 2 2 7,1 1 1 5),POINT ZM (3 3 3 5))
(1 row)

SELECT ST_AsText(geoMeasure(tgeogpoint 'Point(1.5 1.5 1.5)@2000-01-01', '5.5@2000-01-01'));
         st_astext          
----------------------------
 POINT ZM (1.5 1.5 1.5 5.5)
(1 row)

SELECT array_agg(ST_AsText((dp).geom)) FROM (SELECT ST_DumpPoints(geoMeasure(tgeogpoint '{Point(1.5 1.5 1.5)@2000-01-01, Point(2.5 2.5 2.5)@2000-01-02, Point(1.5 1.5 1.5)@2000-01-03}', '{5.5@2000-01-01, 7.5@2000-01-02, 5.5@2000-01-03}')::geometry)) AS t(dp);
                                        array_agg                                         
------------------------------------------------------------------------------------------
 {"POINT ZM (1.5 1.5 1.5 5.5)","POINT ZM (2.5 2.5 2.5 7.5)","POINT ZM (1.5 1.5 1.5 5.5)"}
(1 row)

SELECT ST_AsText(geoMeasure(tgeogpoint '[Point(1.5 1.5 1.5)@2000-01-01, Point(2.5 2.5 2.5)@2000-01-02, Point(1.5 1.5 1.5)@2000-01-03]', '[5.5@2000-01-01, 7.5@2000-01-02, 5.5@2000-01-03]'));
                            st_astext                            
-----------------------------------------------------------------
 LINESTRING ZM (1.5 1.5 1.5 5.5,2.5 2.5 2.5 7.5,1.5 1.5 1.5 5.5)
(1 row)

SELECT ST_AsText(geoMeasure(tgeogpoint '{[Point(1.5 1.5 1.5)@2000-01-01, Point(2.5 2.5 2.5)@2000-01-02, Point(1.5 1.5 1.5)@2000-01-03],[Point(3.5 3.5 3.5)@2000-01-04, Point(3.5 3.5 3.5)@2000-01-05]}', '{[5.5@2000-01-01, 7.5@2000-01-02, 5.5@2000-01-03],[5.5@2000-01-04, 5.5@2000-01-05]}'));
                                                     st_astext                                                      
--------------------------------------------------------------------------------------------------------------------
 GEOMETRYCOLLECTION ZM (LINESTRING ZM (1.5 1.5 1.5 5.5,2.5 2.5 2.5 7.5,1.5 1.5 1.5 5.5),POINT ZM (3.5 3.5 3.5 5.5))
(1 row)

SELECT array_agg(ST_AsText((dp).geom)) FROM (SELECT ST_DumpPoints(geoMeasure(tgeompoint 'Interp=Step;[Point(1 1)@2000-01-01, Point(2 2)@2000-01-02, Point(1 1)@2000-01-03]', '[5@2000-01-01, 7@2000-01-02, 5@2000-01-03]'))) AS t(dp);
                        array_agg                        
---------------------------------------------------------
 {"POINT M (1 1 5)","POINT M (2 2 7)","POINT M (1 1 5)"}
(1 row)

SELECT array_agg(ST_AsText((dp).geom)) FROM (SELECT ST_DumpPoints(geoMeasure(tgeompoint 'Interp=Step;[Point(1 1)@2000-01-01, Point(2 2)@2000-01-02]', '[5@2000-01-01, 7@2000-01-02]'))) AS t(dp);
               array_agg               
---------------------------------------
 {"POINT M (1 1 5)","POINT M (2 2 7)"}
(1 row)

SELECT ST_AsText(geoMeasure(tgeompoint '[Point(1 1)@2000-01-01]', '[5@2000-01-01]', true));
    st_astext    
-----------------
 POINT M (1 1 5)
(1 row)

SELECT ST_AsText(geoMeasure(tgeompoint '[Point(1 1)@2000-01-01, Point(2 2)@2000-01-02, Point(1 1)@2000-01-03]', '[5@2000-01-01, 7@2000-01-02, 5@2000-01-03]', true));
                    st_astext                    
-------------------------------------------------
 MULTILINESTRING M ((1 1 5,2 2 5),(2 2 7,1 1 7))
(1 row)

SELECT ST_AsText(geoMeasure(tgeompoint '{[Point(1 1)@2000-01-01]}', '{[5@2000-01-01]}', true));
    st_astext    
-----------------
 POINT M (1 1 5)
(1 row)

SELECT ST_AsText(geoMeasure(tgeompoint '{[Point(1 1)@2000-01-01],[Point(1 1)@2000-01-02, Point(2 2)@2000-01-03]}', '{[5@2000-01-01],[6@2000-01-02, 7@2000-01-03]}', true));
                             st_astext                             
-------------------------------------------------------------------
 GEOMETRYCOLLECTION M (POINT M (1 1 5),LINESTRING M (1 1 6,2 2 6))
(1 row)

SELECT ST_AsText(geoMeasure(tgeompoint 'Point(1 1)@2000-01-01', '5@2000-01-02'));
 st_astext 
-----------
 
(1 row)

SELECT numInstants(DouglasPeuckerSimplify(tfloat '[4@2000-01-01, 1@2000-01-02, 3@2000-01-03, 1@2000-01-04, 3@2000-01-05, 0@2000-01-06, 4@2000-01-07]', 1));
 numinstants 
-------------
           7
(1 row)

SELECT numInstants(DouglasPeuckerSimplify(tfloat '[4@2000-01-01, 1@2000-01-02, 3@2000-01-03, 1@2000-01-04, 3@2000-01-05, 0@2000-01-06, 4@2000-01-07]', 2));
 numinstants 
-------------
           5
(1 row)

SELECT numInstants(DouglasPeuckerSimplify(tfloat '[4@2000-01-01, 1@2000-01-02, 3@2000-01-03, 1@2000-01-04, 3@2000-01-05, 0@2000-01-06, 4@2000-01-07]', 4));
 numinstants 
-------------
           2
(1 row)

SELECT DouglasPeuckerSimplify(tfloat '{[4@2000-01-01, 1@2000-01-02, 3@2000-01-03, 1@2000-01-04, 3@2000-01-05, 0@2000-01-06, 4@2000-01-07]}', 4);
                 douglaspeuckersimplify                 
--------------------------------------------------------
 {[4@2000-01-01 00:00:00+00, 4@2000-01-07 00:00:00+00]}
(1 row)

SELECT DouglasPeuckerSimplify(tfloat '{[4@2000-01-01, 1@2000-01-02, 3@2000-01-03, 1@2000-01-04], [3@2000-01-05, 0@2000-01-06, 4@2000-01-07]}', 4);
                                            douglaspeuckersimplify                                            
--------------------------------------------------------------------------------------------------------------
 {[4@2000-01-01 00:00:00+00, 1@2000-01-04 00:00:00+00], [3@2000-01-05 00:00:00+00, 4@2000-01-07 00:00:00+00]}
(1 row)

SELECT DouglasPeuckerSimplify(tfloat '{[4@2000-01-01, 1@2000-01-02, 3@2000-01-03, 1@2000-01-04], [3@2000-01-05, 0@2000-01-06, 4@2000-01-07], [4@2000-01-08]}', 4);
                                                          douglaspeuckersimplify                                                          
------------------------------------------------------------------------------------------------------------------------------------------
 {[4@2000-01-01 00:00:00+00, 1@2000-01-04 00:00:00+00], [3@2000-01-05 00:00:00+00, 4@2000-01-07 00:00:00+00], [4@2000-01-08 00:00:00+00]}
(1 row)

SELECT DouglasPeuckerSimplify(tfloat '4@2000-01-01', 1.5);
  douglaspeuckersimplify  
--------------------------
 4@2000-01-01 00:00:00+00
(1 row)

SELECT DouglasPeuckerSimplify(tfloat '{4@2000-01-01, 1@2000-01-02}', 1.5);
                douglaspeuckersimplify                
------------------------------------------------------
 {4@2000-01-01 00:00:00+00, 1@2000-01-02 00:00:00+00}
(1 row)

SELECT DouglasPeuckerSimplify(tfloat '[4@2000-01-01, 1@2000-01-02]', 1.5);
                douglaspeuckersimplify                
------------------------------------------------------
 [4@2000-01-01 00:00:00+00, 1@2000-01-02 00:00:00+00]
(1 row)

SELECT DouglasPeuckerSimplify(tfloat 'Interp=Step;[4@2000-01-01, 1@2000-01-02, 3@2000-01-03]', 1.5);
                                   douglaspeuckersimplify                                   
--------------------------------------------------------------------------------------------
 Interp=Step;[4@2000-01-01 00:00:00+00, 1@2000-01-02 00:00:00+00, 3@2000-01-03 00:00:00+00]
(1 row)

SELECT numInstants(DouglasPeuckerSimplify(tfloat '[47@2000-01-01, 69@2000-01-02, 75@2000-01-03, 77@2000-01-04, 73@2000-01-05, 69@2000-01-06, 70@2000-01-07, 65@2000-01-08, 67@2000-01-09, 61@2000-01-10, 54@2000-01-11, 46@2000-01-12, 41@2000-01-13, 48@2000-01-14, 41@2000-01-15, 44@2000-01-16, 48@2000-01-17, 41@2000-01-18, 33@2000-01-19, 37@2000-01-20, 42@2000-01-21, 41@2000-01-22, 47@2000-01-23, 46@2000-01-24, 52@2000-01-25, 50@2000-01-26, 50@2000-01-27, 48@2000-01-28, 53@2000-01-29, 55@2000-01-30, 47@2000-01-31, 45@2000-02-01, 45@2000-02-02, 53@2000-02-03, 63@2000-02-04, 70@2000-02-05, 63@2000-02-06, 63@2000-02-07, 56@2000-02-08, 60@2000-02-09, 65@2000-02-10, 61@2000-02-11, 68@2000-02-12, 76@2000-02-13, 70@2000-02-14, 79@2000-02-15, 81@2000-02-16, 88@2000-02-17, 81@2000-02-18, 85@2000-02-19, 86@2000-02-20, 94@2000-02-21, 87@2000-02-22, 84@2000-02-23, 80@2000-02-24, 89@2000-02-25, 95@2000-02-26, 89@2000-02-27, 86@2000-02-28, 87@2000-02-29, 85@2000-03-01, 84@2000-03-02, 92@2000-03-03, 83@2000-03-04, 80@2000-03-05, 88@2000-03-06, 94@2000-03-07, 94@2000-03-08, 92@2000-03-09, 83@2000-03-10, 78@2000-03-11, 70@2000-03-12, 65@2000-03-13, 56@2000-03-14, 48@2000-03-15, 46@2000-03-16, 36@2000-03-17, 40@2000-03-18, 35@2000-03-19, 28@2000-03-20, 25@2000-03-21, 32@2000-03-22, 22@2000-03-23, 22@2000-03-24, 17@2000-03-25, 14@2000-03-26, 13@2000-03-27, 10@2000-03-28, 9@2000-03-29, 15@2000-03-30, 16@2000-03-31, 18@2000-04-01, 13@2000-04-02, 12@2000-04-03, 12@2000-04-04, 14@2000-04-05, 11@2000-04-06, 7@2000-04-07,  16@2000-04-08, 21@2000-04-09, 16@2000-04-10, 12@2000-04-11, 20@2000-04-12, 19@2000-04-13, 17@2000-04-14, 26@2000-04-15, 33@2000-04-16, 31@2000-04-17, 34@2000-04-18, 27@2000-04-19, 28@2000-04-20, 38@2000-04-21, 47@2000-04-22, 49@2000-04-23, 49@2000-04-24, 43@2000-04-25, 51@2000-04-26, 60@2000-04-27, 54@2000-04-28, 45@2000-04-29, 55@2000-05-01, 58@2000-05-02, 68@2000-05-03, 62@2000-05-04, 55@2000-05-05, 57@2000-05-06, 58@2000-05-07, 58@2000-05-08, 61@2000-05-09, 57@2000-05-10, 62@2000-05-11, 71@2000-05-12, 65@2000-05-13, 59@2000-05-14, 56@2000-05-15, 49@2000-05-16, 41@2000-05-17, 51@2000-05-19, 46@2000-05-20, 42@2000-05-21, 47@2000-05-22, 42@2000-05-23, 49@2000-05-24, 44@2000-05-25, 43@2000-05-26, 48@2000-05-27, 42@2000-05-28, 45@2000-05-29, 52@2000-05-30, 61@2000-05-31, 59@2000-06-01, 58@2000-06-02, 67@2000-06-03, 69@2000-06-04, 72@2000-06-05, 72@2000-06-06, 58@2000-06-08, 52@2000-06-09, 50@2000-06-10, 58@2000-06-11, 51@2000-06-12, 53@2000-06-13, 46@2000-06-14, 46@2000-06-15, 51@2000-06-16, 46@2000-06-17, 40@2000-06-18, 40@2000-06-19, 41@2000-06-20, 40@2000-06-21, 36@2000-06-22, 41@2000-06-23, 38@2000-06-24, 38@2000-06-25, 33@2000-06-26, 24@2000-06-27, 29@2000-06-28, 45@2000-06-30, 48@2000-07-01, 44@2000-07-02, 41@2000-07-03, 44@2000-07-04, 51@2000-07-05, 42@2000-07-06, 34@2000-07-07, 25@2000-07-08, 18@2000-07-09, 14@2000-07-10, 13@2000-07-11, 5@2000-07-12, 4@2000-07-13, 13@2000-07-14, 8@2000-07-15, 17@2000-07-16, 22@2000-07-17, 22@2000-07-18, 15@2000-07-19, 11@2000-07-20, 2@2000-07-21, 4@2000-07-22, 5@2000-07-23, 11@2000-07-24, 20@2000-07-25, 12@2000-07-26, 2@2000-07-27, 12@2000-07-28, 19@2000-07-29, 35@2000-07-31, 35@2000-08-01, 29@2000-08-02, 25@2000-08-03, 9@2000-08-05, 5@2000-08-06, 10@2000-08-07, 3@2000-08-08, 3@2000-08-10, 4@2000-08-11, 6@2000-08-12, 15@2000-08-13, 17@2000-08-14, 24@2000-08-15, 32@2000-08-16, 30@2000-08-17, 27@2000-08-18, 18@2000-08-19, 20@2000-08-20, 19@2000-08-21, 22@2000-08-22, 15@2000-08-23, 10@2000-08-24, 12@2000-08-25, 7@2000-08-26, 3@2000-08-27, 5@2000-08-28, 14@2000-08-29, 8@2000-08-30, 8@2000-08-31, 10@2000-09-01, 7@2000-09-02, 14@2000-09-03, 17@2000-09-04, 17@2000-09-05, 9@2000-09-06, 18@2000-09-07, 19@2000-09-08, 22@2000-09-09, 20@2000-09-10, 13@2000-09-11, 8@2000-09-12, 6@2000-09-13, 10@2000-09-14, 2@2000-09-15, 7@2000-09-16, 14@2000-09-17, 14@2000-09-18, 10@2000-09-19, 15@2000-09-20, 22@2000-09-21, 31@2000-09-22, 40@2000-09-23, 32@2000-09-24, 33@2000-09-25, 26@2000-09-26, 24@2000-09-27, 12@2000-09-29, 14@2000-09-30, 24@2000-10-02, 34@2000-10-03, 35@2000-10-04, 33@2000-10-06, 36@2000-10-07, 34@2000-10-08, 24@2000-10-09, 21@2000-10-10, 27@2000-10-11, 20@2000-10-12, 21@2000-10-13, 15@2000-10-14, 22@2000-10-15, 26@2000-10-16, 24@2000-10-17, 15@2000-10-18, 7@2000-10-19, 17@2000-10-21, 27@2000-10-22, 31@2000-10-23, 34@2000-10-24, 26@2000-10-25, 22@2000-10-26, 28@2000-10-27, 28@2000-10-28, 27@2000-10-29, 18@2000-10-30, 10@2000-10-31, 4@2000-11-01, 10@2000-11-02, 1@2000-11-03, 6@2000-11-04, 1@2000-11-05, 2@2000-11-06, 0@2000-11-07, 3@2000-11-08, 3@2000-11-09, 9@2000-11-10, 7@2000-11-11, 11@2000-11-12, 7@2000-11-13, 11@2000-11-15, 20@2000-11-16]', 10));
 numinstants 
-------------
          53
(1 row)

SELECT ST_AsText(trajectory(DouglasPeuckerSimplify(tgeompoint '[Point(0 4)@2000-01-01,
  Point(1 1)@2000-01-02, Point(2 3)@2000-01-03, Point(3 1)@2000-01-04,
  Point(4 3)@2000-01-05, Point(5 0)@2000-01-06, Point(6 4)@2000-01-07]', 1.5)));
            st_astext            
---------------------------------
 LINESTRING(0 4,1 1,4 3,5 0,6 4)
(1 row)

SELECT ST_AsText(trajectory(DouglasPeuckerSimplify(tgeompoint '[Point(0 4)@2000-01-01,
  Point(1 1)@2000-01-02, Point(2 3)@2000-01-03, Point(3 1)@2000-01-04,
  Point(4 3)@2000-01-05, Point(5 0)@2000-01-06, Point(6 4)@2000-01-07]', 4)));
      st_astext      
---------------------
 LINESTRING(0 4,6 4)
(1 row)

SELECT ST_AsText(trajectory(DouglasPeuckerSimplify(tgeompoint '{[Point(0 4)@2000-01-01,
  Point(1 1)@2000-01-02, Point(2 3)@2000-01-03, Point(3 1)@2000-01-04,
  Point(4 3)@2000-01-05, Point(5 0)@2000-01-06, Point(6 4)@2000-01-07]}', 4)));
      st_astext      
---------------------
 LINESTRING(0 4,6 4)
(1 row)

SELECT ST_AsText(trajectory(DouglasPeuckerSimplify(tgeompoint '{[Point(0 4)@2000-01-01,
  Point(1 1)@2000-01-02, Point(2 3)@2000-01-03, Point(3 1)@2000-01-04],
  [Point(4 3)@2000-01-05, Point(5 0)@2000-01-06, Point(6 4)@2000-01-07]}', 4)));
              st_astext               
--------------------------------------
 MULTILINESTRING((0 4,3 1),(4 3,6 4))
(1 row)

SELECT ST_AsText(trajectory(DouglasPeuckerSimplify(tgeompoint '{[Point(0 4)@2000-01-01,
  Point(1 1)@2000-01-02, Point(2 3)@2000-01-03, Point(3 1)@2000-01-04],
  [Point(4 3)@2000-01-05, Point(5 0)@2000-01-06, Point(6 4)@2000-01-07],[Point(7 4)@2000-01-08]}', 4)));
                               st_astext                                
------------------------------------------------------------------------
 GEOMETRYCOLLECTION(LINESTRING(0 4,3 1),LINESTRING(4 3,6 4),POINT(7 4))
(1 row)

SELECT ST_AsText(trajectory(DouglasPeuckerSimplify(tgeompoint '[Point(0 4 0)@2000-01-01,
  Point(1 1 1)@2000-01-02, Point(2 3 2)@2000-01-03, Point(3 1 3)@2000-01-04,
  Point(4 3 4)@2000-01-05, Point(5 0 5)@2000-01-06, Point(6 4 6)@2000-01-07]', 1.5)));
                  st_astext                   
----------------------------------------------
 LINESTRING Z (0 4 0,1 1 1,4 3 4,5 0 5,6 4 6)
(1 row)

SELECT ST_AsText(trajectory(DouglasPeuckerSimplify(tgeompoint '[Point(0 4 0)@2000-01-01,
  Point(1 1 1)@2000-01-02, Point(2 3 2)@2000-01-03, Point(3 1 3)@2000-01-04,
  Point(4 3 4)@2000-01-05, Point(5 0 5)@2000-01-06, Point(6 4 6)@2000-01-07]', 4)));
         st_astext          
----------------------------
 LINESTRING Z (0 4 0,6 4 6)
(1 row)

SELECT asText(DouglasPeuckerSimplify(tgeompoint 'Point(0 4)@2000-01-01', 1.5));
              astext               
-----------------------------------
 POINT(0 4)@2000-01-01 00:00:00+00
(1 row)

SELECT asText(DouglasPeuckerSimplify(tgeompoint '{Point(0 4)@2000-01-01, Point(1 1)@2000-01-02}', 1.5));
                                 astext                                 
------------------------------------------------------------------------
 {POINT(0 4)@2000-01-01 00:00:00+00, POINT(1 1)@2000-01-02 00:00:00+00}
(1 row)

SELECT asText(DouglasPeuckerSimplify(tgeompoint '[Point(0 4)@2000-01-01, Point(1 1)@2000-01-02]', 1.5));
                                 astext                                 
------------------------------------------------------------------------
 [POINT(0 4)@2000-01-01 00:00:00+00, POINT(1 1)@2000-01-02 00:00:00+00]
(1 row)

SELECT asText(DouglasPeuckerSimplify(tgeompoint 'Interp=Step;[Point(0 4)@2000-01-01, Point(1 1)@2000-01-02, Point(2 3)@2000-01-03]', 1.5));
                                                        astext                                                         
-----------------------------------------------------------------------------------------------------------------------
 Interp=Step;[POINT(0 4)@2000-01-01 00:00:00+00, POINT(1 1)@2000-01-02 00:00:00+00, POINT(2 3)@2000-01-03 00:00:00+00]
(1 row)

SELECT asText(DouglasPeuckerSimplify(tgeompoint '[Point(1 3 5)@2000-01-01, Point(1 4 7)@2000-01-02, Point(1 3 5)@2000-01-03]', 2));
                                                          astext                                                          
--------------------------------------------------------------------------------------------------------------------------
 [POINT Z (1 3 5)@2000-01-01 00:00:00+00, POINT Z (1 4 7)@2000-01-02 00:00:00+00, POINT Z (1 3 5)@2000-01-03 00:00:00+00]
(1 row)

SELECT asText(DouglasPeuckerSimplify(tgeompoint '[Point(1 3 5)@2000-01-01, Point(1 3 5)@2000-01-02, Point(1 4 7)@2000-01-03]', 2));
                                      astext                                      
----------------------------------------------------------------------------------
 [POINT Z (1 3 5)@2000-01-01 00:00:00+00, POINT Z (1 4 7)@2000-01-03 00:00:00+00]
(1 row)

SELECT asText(DouglasPeuckerSimplify(tgeompoint '[Point(1 3 5)@2000-01-01, Point(1 4 7)@2000-01-02, Point(1 3 5)@2000-01-03]', 2, false));
                                                          astext                                                          
--------------------------------------------------------------------------------------------------------------------------
 [POINT Z (1 3 5)@2000-01-01 00:00:00+00, POINT Z (1 4 7)@2000-01-02 00:00:00+00, POINT Z (1 3 5)@2000-01-03 00:00:00+00]
(1 row)

SELECT asText(DouglasPeuckerSimplify(tgeompoint '[Point(1 3 5)@2000-01-01, Point(1 3 5)@2000-01-02, Point(1 4 7)@2000-01-03]', 2, false));
                                      astext                                      
----------------------------------------------------------------------------------
 [POINT Z (1 3 5)@2000-01-01 00:00:00+00, POINT Z (1 4 7)@2000-01-03 00:00:00+00]
(1 row)

SELECT asText(DouglasPeuckerSimplify(tgeompoint '[POINT(77 69)@2000-01-02, POINT(83 75)@2000-01-03, POINT(85 77)@2000-01-04, POINT(82 73)@2000-01-05, POINT(77 69)@2000-01-06, POINT(78 70)@2000-01-07, POINT(73 65)@2000-01-08, POINT(75 67)@2000-01-09, POINT(69 61)@2000-01-10, POINT(62 54)@2000-01-11, POINT(54 46)@2000-01-12, POINT(49 41)@2000-01-13, POINT(57 48)@2000-01-14, POINT(49 41)@2000-01-15, POINT(52 44)@2000-01-16, POINT(56 48)@2000-01-17, POINT(50 41)@2000-01-18, POINT(41 33)@2000-01-19, POINT(45 37)@2000-01-20, POINT(50 42)@2000-01-21, POINT(49 41)@2000-01-22, POINT(55 47)@2000-01-23, POINT(54 46)@2000-01-24, POINT(60 52)@2000-01-25, POINT(58 50)@2000-01-26, POINT(58 50)@2000-01-27, POINT(56 48)@2000-01-28, POINT(62 53)@2000-01-29, POINT(64 55)@2000-01-30, POINT(56 47)@2000-01-31, POINT(53 45)@2000-02-01, POINT(54 45)@2000-02-02, POINT(61 53)@2000-02-03, POINT(71 63)@2000-02-04, POINT(78 70)@2000-02-05, POINT(71 63)@2000-02-06, POINT(72 63)@2000-02-07, POINT(64 56)@2000-02-08, POINT(69 60)@2000-02-09, POINT(73 65)@2000-02-10, POINT(69 61)@2000-02-11, POINT(76 68)@2000-02-12, POINT(85 76)@2000-02-13, POINT(78 70)@2000-02-14, POINT(87 79)@2000-02-15, POINT(89 81)@2000-02-16, POINT(97 88)@2000-02-17, POINT(89 81)@2000-02-18, POINT(93 85)@2000-02-19, POINT(94 86)@2000-02-20, POINT(87 94)@2000-02-21, POINT(80 87)@2000-02-22, POINT(77 84)@2000-02-23, POINT(74 80)@2000-02-24, POINT(83 89)@2000-02-25, POINT(88 95)@2000-02-26, POINT(95 89)@2000-02-27, POINT(92 86)@2000-02-28, POINT(93 87)@2000-02-29, POINT(91 85)@2000-03-01, POINT(90 84)@2000-03-02, POINT(98 92)@2000-03-03, POINT(89 83)@2000-03-04, POINT(86 80)@2000-03-05, POINT(94 88)@2000-03-06, POINT(100 94)@2000-03-07, POINT(100 94)@2000-03-08, POINT(98 92)@2000-03-09, POINT(89 83)@2000-03-10, POINT(84 78)@2000-03-11, POINT(76 70)@2000-03-12, POINT(71 65)@2000-03-13, POINT(62 56)@2000-03-14, POINT(54 48)@2000-03-15, POINT(52 46)@2000-03-16, POINT(42 36)@2000-03-17, POINT(45 40)@2000-03-18, POINT(41 35)@2000-03-19, POINT(34 28)@2000-03-20, POINT(31 25)@2000-03-21, POINT(38 32)@2000-03-22, POINT(28 22)@2000-03-23, POINT(28 22)@2000-03-24, POINT(23 17)@2000-03-25, POINT(20 14)@2000-03-26, POINT(18 13)@2000-03-27, POINT(8 3)@2000-03-28, POINT(2 9)@2000-03-29, POINT(8 15)@2000-03-30, POINT(9 16)@2000-03-31, POINT(10 18)@2000-04-01, POINT(5 13)@2000-04-02, POINT(4 12)@2000-04-03, POINT(5 12)@2000-04-04, POINT(6 14)@2000-04-05, POINT(3 11)@2000-04-06, POINT(7 7)@2000-04-07, POINT(15 16)@2000-04-08, POINT(20 21)@2000-04-09, POINT(15 16)@2000-04-10, POINT(11 12)@2000-04-11, POINT(19 20)@2000-04-12, POINT(18 19)@2000-04-13, POINT(16 17)@2000-04-14, POINT(25 26)@2000-04-15, POINT(32 33)@2000-04-16, POINT(30 31)@2000-04-17, POINT(33 34)@2000-04-18, POINT(26 27)@2000-04-19, POINT(27 28)@2000-04-20, POINT(37 38)@2000-04-21, POINT(46 47)@2000-04-22, POINT(48 49)@2000-04-23, POINT(48 49)@2000-04-24, POINT(42 43)@2000-04-25, POINT(50 51)@2000-04-26, POINT(59 60)@2000-04-27, POINT(53 54)@2000-04-28, POINT(44 45)@2000-04-29, POINT(54 55)@2000-05-01, POINT(57 58)@2000-05-02, POINT(67 68)@2000-05-03, POINT(61 62)@2000-05-04, POINT(54 55)@2000-05-05, POINT(56 57)@2000-05-06, POINT(57 58)@2000-05-07, POINT(57 58)@2000-05-08, POINT(60 61)@2000-05-09, POINT(56 57)@2000-05-10, POINT(61 62)@2000-05-11, POINT(71 71)@2000-05-12, POINT(64 65)@2000-05-13, POINT(59 59)@2000-05-14, POINT(55 56)@2000-05-15, POINT(48 49)@2000-05-16, POINT(40 41)@2000-05-17, POINT(50 51)@2000-05-19, POINT(46 46)@2000-05-20, POINT(41 42)@2000-05-21, POINT(46 47)@2000-05-22, POINT(41 42)@2000-05-23, POINT(48 49)@2000-05-24, POINT(43 44)@2000-05-25, POINT(42 43)@2000-05-26, POINT(47 48)@2000-05-27, POINT(41 42)@2000-05-28, POINT(45 45)@2000-05-29, POINT(51 52)@2000-05-30, POINT(60 61)@2000-05-31, POINT(58 59)@2000-06-01, POINT(58 58)@2000-06-02, POINT(66 67)@2000-06-03, POINT(68 69)@2000-06-04, POINT(71 72)@2000-06-05, POINT(71 72)@2000-06-06, POINT(57 58)@2000-06-08, POINT(51 52)@2000-06-09, POINT(49 50)@2000-06-10, POINT(58 58)@2000-06-11, POINT(51 51)@2000-06-12, POINT(52 53)@2000-06-13, POINT(45 46)@2000-06-14, POINT(45 46)@2000-06-15, POINT(50 51)@2000-06-16, POINT(45 46)@2000-06-17, POINT(39 40)@2000-06-18, POINT(39 40)@2000-06-19, POINT(40 41)@2000-06-20, POINT(40 40)@2000-06-21, POINT(35 36)@2000-06-22, POINT(40 41)@2000-06-23, POINT(37 38)@2000-06-24, POINT(38 38)@2000-06-25, POINT(32 33)@2000-06-26, POINT(23 24)@2000-06-27, POINT(28 29)@2000-06-28, POINT(44 45)@2000-06-30, POINT(47 48)@2000-07-01, POINT(43 44)@2000-07-02, POINT(40 41)@2000-07-03, POINT(43 44)@2000-07-04, POINT(50 51)@2000-07-05, POINT(41 42)@2000-07-06, POINT(33 34)@2000-07-07, POINT(24 25)@2000-07-08, POINT(17 18)@2000-07-09, POINT(13 14)@2000-07-10, POINT(12 13)@2000-07-11, POINT(4 5)@2000-07-12, POINT(3 4)@2000-07-13, POINT(12 13)@2000-07-14, POINT(7 8)@2000-07-15, POINT(16 17)@2000-07-16, POINT(21 22)@2000-07-17, POINT(22 22)@2000-07-18, POINT(14 15)@2000-07-19, POINT(10 11)@2000-07-20, POINT(1 2)@2000-07-21, POINT(3 4)@2000-07-22, POINT(4 5)@2000-07-23, POINT(10 11)@2000-07-24, POINT(19 20)@2000-07-25, POINT(11 12)@2000-07-26, POINT(2 2)@2000-07-27, POINT(11 12)@2000-07-28, POINT(18 19)@2000-07-29, POINT(34 35)@2000-07-31, POINT(34 35)@2000-08-01, POINT(28 29)@2000-08-02, POINT(24 25)@2000-08-03, POINT(8 9)@2000-08-05, POINT(4 5)@2000-08-06, POINT(10 10)@2000-08-07, POINT(2 3)@2000-08-08, POINT(2 3)@2000-08-10, POINT(3 4)@2000-08-11, POINT(5 6)@2000-08-12, POINT(15 15)@2000-08-13, POINT(17 17)@2000-08-14, POINT(24 24)@2000-08-15, POINT(31 32)@2000-08-16, POINT(29 30)@2000-08-17, POINT(26 27)@2000-08-18, POINT(17 18)@2000-08-19, POINT(19 20)@2000-08-20, POINT(18 19)@2000-08-21, POINT(21 22)@2000-08-22, POINT(14 15)@2000-08-23, POINT(9 10)@2000-08-24, POINT(11 12)@2000-08-25, POINT(6 7)@2000-08-26, POINT(2 3)@2000-08-27, POINT(4 5)@2000-08-28, POINT(13 14)@2000-08-29, POINT(7 8)@2000-08-30, POINT(7 8)@2000-08-31, POINT(9 10)@2000-09-01, POINT(6 7)@2000-09-02, POINT(13 14)@2000-09-03, POINT(16 17)@2000-09-04, POINT(16 17)@2000-09-05, POINT(9 9)@2000-09-06, POINT(17 18)@2000-09-07, POINT(18 19)@2000-09-08, POINT(21 22)@2000-09-09, POINT(20 20)@2000-09-10, POINT(12 13)@2000-09-11, POINT(7 8)@2000-09-12, POINT(5 6)@2000-09-13, POINT(10 10)@2000-09-14, POINT(1 2)@2000-09-15, POINT(6 7)@2000-09-16, POINT(14 14)@2000-09-17, POINT(13 14)@2000-09-18, POINT(9 10)@2000-09-19, POINT(14 15)@2000-09-20, POINT(21 22)@2000-09-21, POINT(31 31)@2000-09-22, POINT(39 40)@2000-09-23, POINT(31 32)@2000-09-24, POINT(32 33)@2000-09-25, POINT(25 26)@2000-09-26, POINT(23 24)@2000-09-27, POINT(11 12)@2000-09-29, POINT(13 14)@2000-09-30, POINT(23 24)@2000-10-02, POINT(33 34)@2000-10-03, POINT(34 35)@2000-10-04, POINT(32 33)@2000-10-06, POINT(36 36)@2000-10-07, POINT(33 34)@2000-10-08, POINT(23 24)@2000-10-09, POINT(20 21)@2000-10-10, POINT(26 27)@2000-10-11, POINT(19 20)@2000-10-12, POINT(20 21)@2000-10-13, POINT(14 15)@2000-10-14, POINT(22 22)@2000-10-15, POINT(25 26)@2000-10-16, POINT(24 24)@2000-10-17, POINT(14 15)@2000-10-18, POINT(6 7)@2000-10-19, POINT(16 17)@2000-10-21, POINT(26 27)@2000-10-22, POINT(30 31)@2000-10-23, POINT(33 34)@2000-10-24, POINT(25 26)@2000-10-25, POINT(21 22)@2000-10-26, POINT(27 28)@2000-10-27, POINT(27 28)@2000-10-28, POINT(27 27)@2000-10-29, POINT(17 18)@2000-10-30, POINT(9 10)@2000-10-31, POINT(3 4)@2000-11-01, POINT(9 10)@2000-11-02, POINT(0 1)@2000-11-03, POINT(5 6)@2000-11-04, POINT(0 1)@2000-11-05, POINT(1 2)@2000-11-06, POINT(2 0)@2000-11-07, POINT(5 3)@2000-11-08, POINT(6 3)@2000-11-09, POINT(11 9)@2000-11-10, POINT(9 7)@2000-11-11, POINT(13 11)@2000-11-12, POINT(9 7)@2000-11-13, POINT(13 11)@2000-11-15, POINT(22 20)@2000-11-16]', 10));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    astext                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 [POINT(77 69)@2000-01-02 00:00:00+00, POINT(85 77)@2000-01-04 00:00:00+00, POINT(75 67)@2000-01-09 00:00:00+00, POINT(49 41)@2000-01-13 00:00:00+00, POINT(56 48)@2000-01-17 00:00:00+00, POINT(41 33)@2000-01-19 00:00:00+00, POINT(60 52)@2000-01-25 00:00:00+00, POINT(64 55)@2000-01-30 00:00:00+00, POINT(54 45)@2000-02-02 00:00:00+00, POINT(78 70)@2000-02-05 00:00:00+00, POINT(64 56)@2000-02-08 00:00:00+00, POINT(69 61)@2000-02-11 00:00:00+00, POINT(97 88)@2000-02-17 00:00:00+00, POINT(89 81)@2000-02-18 00:00:00+00, POINT(87 94)@2000-02-21 00:00:00+00, POINT(74 80)@2000-02-24 00:00:00+00, POINT(88 95)@2000-02-26 00:00:00+00, POINT(90 84)@2000-03-02 00:00:00+00, POINT(98 92)@2000-03-03 00:00:00+00, POINT(86 80)@2000-03-05 00:00:00+00, POINT(100 94)@2000-03-08 00:00:00+00, POINT(42 36)@2000-03-17 00:00:00+00, POINT(31 25)@2000-03-21 00:00:00+00, POINT(38 32)@2000-03-22 00:00:00+00, POINT(2 9)@2000-03-29 00:00:00+00, POINT(10 18)@2000-04-01 00:00:00+00, POINT(7 7)@2000-04-07 00:00:00+00, POINT(20 21)@2000-04-09 00:00:00+00, POINT(11 12)@2000-04-11 00:00:00+00, POINT(16 17)@2000-04-14 00:00:00+00, POINT(32 33)@2000-04-16 00:00:00+00, POINT(27 28)@2000-04-20 00:00:00+00, POINT(46 47)@2000-04-22 00:00:00+00, POINT(42 43)@2000-04-25 00:00:00+00, POINT(59 60)@2000-04-27 00:00:00+00, POINT(44 45)@2000-04-29 00:00:00+00, POINT(67 68)@2000-05-03 00:00:00+00, POINT(54 55)@2000-05-05 00:00:00+00, POINT(56 57)@2000-05-10 00:00:00+00, POINT(71 71)@2000-05-12 00:00:00+00, POINT(40 41)@2000-05-17 00:00:00+00, POINT(50 51)@2000-05-19 00:00:00+00, POINT(41 42)@2000-05-28 00:00:00+00, POINT(60 61)@2000-05-31 00:00:00+00, POINT(71 72)@2000-06-06 00:00:00+00, POINT(51 52)@2000-06-09 00:00:00+00, POINT(58 58)@2000-06-11 00:00:00+00, POINT(39 40)@2000-06-18 00:00:00+00, POINT(38 38)@2000-06-25 00:00:00+00, POINT(23 24)@2000-06-27 00:00:00+00, POINT(44 45)@2000-06-30 00:00:00+00, POINT(40 41)@2000-07-03 00:00:00+00, POINT(50 51)@2000-07-05 00:00:00+00, POINT(17 18)@2000-07-09 00:00:00+00, POINT(3 4)@2000-07-13 00:00:00+00, POINT(22 22)@2000-07-18 00:00:00+00, POINT(1 2)@2000-07-21 00:00:00+00, POINT(19 20)@2000-07-25 00:00:00+00, POINT(2 2)@2000-07-27 00:00:00+00, POINT(34 35)@2000-07-31 00:00:00+00, POINT(2 3)@2000-08-08 00:00:00+00, POINT(5 6)@2000-08-12 00:00:00+00, POINT(31 32)@2000-08-16 00:00:00+00, POINT(2 3)@2000-08-27 00:00:00+00, POINT(13 14)@2000-08-29 00:00:00+00, POINT(9 9)@2000-09-06 00:00:00+00, POINT(21 22)@2000-09-09 00:00:00+00, POINT(1 2)@2000-09-15 00:00:00+00, POINT(14 14)@2000-09-17 00:00:00+00, POINT(9 10)@2000-09-19 00:00:00+00, POINT(39 40)@2000-09-23 00:00:00+00, POINT(11 12)@2000-09-29 00:00:00+00, POINT(33 34)@2000-10-03 00:00:00+00, POINT(36 36)@2000-10-07 00:00:00+00, POINT(14 15)@2000-10-14 00:00:00+00, POINT(24 24)@2000-10-17 00:00:00+00, POINT(6 7)@2000-10-19 00:00:00+00, POINT(33 34)@2000-10-24 00:00:00+00, POINT(21 22)@2000-10-26 00:00:00+00, POINT(27 27)@2000-10-29 00:00:00+00, POINT(3 4)@2000-11-01 00:00:00+00, POINT(9 10)@2000-11-02 00:00:00+00, POINT(0 1)@2000-11-03 00:00:00+00, POINT(9 7)@2000-11-13 00:00:00+00, POINT(22 20)@2000-11-16 00:00:00+00]
(1 row)

SELECT asText(DouglasPeuckerSimplify(tgeompoint '[Point(1 1)@2000-01-01, Point(2 2)@2000-01-02, Point(3 1)@2000-01-04]', 1));
                                                  astext                                                   
-----------------------------------------------------------------------------------------------------------
 [POINT(1 1)@2000-01-01 00:00:00+00, POINT(2 2)@2000-01-02 00:00:00+00, POINT(3 1)@2000-01-04 00:00:00+00]
(1 row)

SELECT asText(DouglasPeuckerSimplify(tgeompoint '[Point(1 1)@2000-01-01, Point(2 2)@2000-01-02, Point(3 1)@2000-01-04]', 1, false));
                                 astext                                 
------------------------------------------------------------------------
 [POINT(1 1)@2000-01-01 00:00:00+00, POINT(3 1)@2000-01-04 00:00:00+00]
(1 row)

SELECT array_agg(ST_AsText((dp).geom)) FROM (SELECT ST_DumpPoints(ST_AsText((mvt).geom))
FROM (SELECT asMVTGeom(tgeompoint '{Point(0 0 0)@2000-01-01, Point(100 100 100)@2000-04-10}',
  stbox 'STBOX X((0,0),(1000,1000))') AS mvt ) AS t) AS t(dp);
                    array_agg                    
-------------------------------------------------
 {"POINT Z (0 4096 0)","POINT Z (410 3686 100)"}
(1 row)

SELECT ST_AsText((mvt).geom)
FROM (SELECT asMVTGeom(tgeompoint '[Point(0 0)@2000-01-01, Point(100 100)@2000-04-10]',
  stbox 'STBOX X((40,40),(60,60))', clip := false) AS mvt ) AS t;
              st_astext              
-------------------------------------
 LINESTRING(-8192 12288,12288 -8192)
(1 row)

SELECT ST_AsText((mvt).geom)
FROM (SELECT asMVTGeom(tgeompoint '[Point(0 0)@2000-01-01, Point(100 100)@2000-04-10]',
  stbox 'STBOX X((40,40),(60,60))') AS mvt ) AS t;
            st_astext            
---------------------------------
 LINESTRING(-256 4352,4352 -256)
(1 row)

SELECT ST_AsText((mvt).geom)
FROM (SELECT asMVTGeom(tgeompoint '[Point(0 0 0)@2000-01-01, Point(100 100 100)@2000-04-10]',
  stbox 'STBOX X((40,40),(60,60))') AS mvt ) AS t;
                   st_astext                    
------------------------------------------------
 LINESTRING Z (-256 4352 38.75,4352 -256 61.25)
(1 row)

SELECT ST_AsText((mvt).geom)
FROM (SELECT asMVTGeom(tgeompoint '{[Point(0 0)@2000-01-01], [Point(100 100)@2000-04-10]}',
  stbox 'STBOX X((0,0),(60,60))') AS mvt ) AS t;
 st_astext 
-----------
 
(1 row)

SELECT ST_AsText((mvt).geom)
FROM (SELECT asMVTGeom(tgeompoint '[Point(0 0)@2000-01-01, Point(0 0)@2000-02-10, Point(100 100)@2000-04-10]',
  stbox 'STBOX X((0,0),(60,60))') AS mvt ) AS t;
          st_astext           
------------------------------
 LINESTRING(0 4096,4352 -256)
(1 row)

SELECT ST_AsText((mvt).geom)
FROM (SELECT asMVTGeom(tgeompoint '[Point(0 0)@2000-01-01, Point(100 100)@2000-02-10, Point(100 100)@2000-04-10]',
  stbox 'STBOX X((0,0),(60,60))') AS mvt ) AS t;
          st_astext           
------------------------------
 LINESTRING(0 4096,4352 -256)
(1 row)

/* Errors */
SELECT asMVTGeom(tgeompoint '[Point(0 0)@2000-01-01, Point(100 100)@2000-04-10]',
  stbox 'STBOX X((40,40),(40,40))');
ERROR:  tpoint_AsMVTGeom: Geometric bounds are too small
SELECT asMVTGeom(tgeompoint '[Point(0 0)@2000-01-01, Point(100 100)@2000-04-10]',
  stbox 'STBOX X((40,40),(60,60))', 0);
ERROR:  tpoint_AsMVTGeom: Extent must be greater than 0
