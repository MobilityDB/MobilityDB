<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Operaciones matemáticas</title><link rel="stylesheet" type="text/css" href="docbook.css"><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="MobilityDB 1.3 Manual de usuario"><link rel="up" href="ch06.html" title="Capítulo 6. Tipos alfanuméricos temporales"><link rel="prev" href="ch06s06.html" title="Operaciones booleanas"><link rel="next" href="ch06s08.html" title="Operaciones de texto"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Operaciones matemáticas</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch06s06.html">Anterior</a> </td><th width="60%" align="center">Capítulo 6. Tipos alfanuméricos temporales</th><td width="20%" align="right"> <a accesskey="n" href="ch06s08.html">Siguiente</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tnumber_ops"></a>Operaciones matemáticas</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="tnumber_add"></a><a class="indexterm" name="id4462"></a><a class="indexterm" name="id4465"></a><a class="indexterm" name="id4468"></a><a class="indexterm" name="id4471"></a><p>Adición, resta, multiplicación y división temporal</p><p><code class="varname">{number,tnumber} {+, -, *, /} {number,tnumber} → tnumber</code></p><p>La división temporal genera un error si el denominador es alguna vez igual a cero durante el intervalo de tiempo común de los argumentos.</p><pre class="programlisting">
SELECT tint '[2@2001-01-01, 2@2001-01-04)' + 1;
-- [3@2001-01-01, 3@2001-01-04)
SELECT tfloat '[2@2001-01-01, 2@2001-01-04)' + tfloat '[1@2001-01-01, 4@2001-01-04)';
-- [3@2001-01-01, 6@2001-01-04)
SELECT tfloat '[1@2001-01-01, 4@2001-01-04)' +
  tfloat '{[1@2001-01-01, 2@2001-01-02), [1@2001-01-02, 2@2001-01-04)}';
-- {[2@2001-01-01, 4@2001-01-04), [3@2001-01-02, 6@2001-01-04)}
</pre><pre class="programlisting">
SELECT tint '[1@2001-01-01, 1@2001-01-04)' - tint '[2@2001-01-03, 2@2001-01-05)';
-- [-1@2001-01-03, -1@2001-01-04)
SELECT tfloat '[3@2001-01-01, 6@2001-01-04)' - tfloat '[2@2001-01-01, 2@2001-01-04)';
-- [1@2001-01-01, 4@2001-01-04)
</pre><pre class="programlisting">
SELECT tint '[1@2001-01-01, 4@2001-01-04]' * 2;
-- [2@2001-01-01, 8@2001-01-04]
SELECT tfloat '[1@2001-01-01, 4@2001-01-04)' * tfloat '[2@2001-01-01, 2@2001-01-04)';
-- [2@2001-01-01, 8@2001-01-04)
SELECT tfloat '[1@2001-01-01, 3@2001-01-03)' * '[3@2001-01-01, 1@2001-01-03)';
-- {[3@2001-01-01, 4@2001-01-02, 3@2001-01-03)}
</pre><pre class="programlisting">
SELECT 2 / tfloat '[1@2001-01-01, 3@2001-01-04)';
-- [2@2001-01-01, 0.666666666666667@2001-01-04)
SELECT tfloat '[1@2001-01-01, 5@2001-01-05)' / tfloat '[5@2001-01-01, 1@2001-01-05)';
-- {[0.2@2001-01-01, 1@2001-01-03,2001-01-03, 5@2001-01-03,2001-01-05)}
SELECT 2 / tfloat '[-1@2001-01-01, 1@2001-01-02]';
-- ERROR:  Division by zero
SELECT tfloat '[-1@2001-01-04, 1@2001-01-05]' / tfloat '[-1@2001-01-01, 1@2001-01-05]';
-- [-2@2001-01-04, 1@2001-01-05]
</pre></li><li class="listitem"><a name="tnumber_abs"></a><a class="indexterm" name="id4483"></a><p>Devuelve el valor absoluto del número temporal</p><p><code class="varname">abs(tnumber) → tnumber</code></p><pre class="programlisting">
SELECT abs(tfloat '[1@2001-01-01, -1@2001-01-03, 1@2001-01-05]');
-- [1@2001-01-01, 0@2001-01-02, 1@2001-01-03, 0@2001-01-04, 1@2001-01-05],
SELECT abs(tint '[1@2001-01-01, -1@2001-01-03, 1@2001-01-05]');
-- [1@2001-01-01, 1@2001-01-05]
</pre></li><li class="listitem"><a name="tnumber_deltaValue"></a><a class="indexterm" name="id4491"></a><p>Devuelve la diferencia de valor entre instantes consectivos del número temporal</p><p><code class="varname">deltaValue(tnumber) → tnumber</code></p><pre class="programlisting">
SELECT deltaValue(tint '[1@2001-01-01, 2@2001-01-02, 1@2001-01-03]');
-- [1@2001-01-01, -1@2001-01-02, -1@2001-01-03)
SELECT deltaValue(tfloat '{[1.5@2001-01-01, 2@2001-01-02, 1@2001-01-03],
  [2@2001-01-04, 2@2001-01-05]}');
/* Interp=Step;{[0.5@2001-01-01, -1@2001-01-02, -1@2001-01-03),
  [0@2001-01-04, 0@2001-01-05)} */
</pre></li><li class="listitem"><a name="tnumber_floor"></a><a class="indexterm" name="id4499"></a><a class="indexterm" name="id4502"></a><p>Redondear al entero inferior o superior</p><p><code class="varname">floor(tfloat) → tfloat</code></p><p><code class="varname">ceil(tfloat) → tfloat</code></p><pre class="programlisting">
SELECT floor(tfloat '[0.5@2001-01-01, 1.5@2001-01-02]');
-- [0@2001-01-01, 1@2001-01-02]
SELECT ceil(tfloat '[0.5@2001-01-01, 0.6@2001-01-02, 0.7@2001-01-03]');
-- [1@2001-01-01, 1@2001-01-03]
</pre></li><li class="listitem"><a name="tnumber_round"></a><a class="indexterm" name="id4512"></a><p>Redondear a un número de posiciones decimales</p><p><code class="varname">round(tfloat,integer=0) → tfloat</code></p><pre class="programlisting">
SELECT round(tfloat '[0.785398163397448@2001-01-01, 2.356194490192345@2001-01-02]', 2);
-- [0.79@2001-01-01, 2.36@2001-01-02]
</pre></li><li class="listitem"><a name="tnumber_degrees"></a><a class="indexterm" name="id4520"></a><a class="indexterm" name="id4523"></a><p>Convertir a grados o radianes</p><p><code class="varname">degrees({float,tfloat},normalize=false) → tfloat</code></p><p><code class="varname">radians(tfloat) → tfloat</code></p><p>El parámetro adicional en la función <code class="varname">degrees</code> puede ser utilizado para normalizar los valores entre 0 y 360 grados.</p><pre class="programlisting">
SELECT degrees(pi() * 5);
-- 900
SELECT degrees(pi() * 5, true);
-- 180
SELECT round(degrees(tfloat '[0.7853981633974@2001-01-01, 2.3561944901923@2001-01-02]'));
-- [45@2001-01-01, 135@2001-01-02]
SELECT radians(tfloat '[45@2001-01-01, 135@2001-01-02]');
-- [0.785398163397448@2001-01-01, 2.356194490192345@2001-01-02]
</pre></li><li class="listitem"><a name="tnumber_derivative"></a><a class="indexterm" name="id4535"></a><p>Devuelve la derivada sobre el tiempo del número flotante temporal en unidades por segundo</p><p><code class="varname">derivative(tfloat) → tfloat</code></p><p>El número flotante temporal debe tener interpolación linear. Nótese que esta función corresponde a la función <a class="link" href="ch07s05.html#tgeo_speed"><code class="varname">speed</code></a> para los puntos temporales.</p><pre class="programlisting">
SELECT derivative(tfloat '{[0@2001-01-01, 10@2001-01-02, 5@2001-01-03],
  [1@2001-01-04, 0@2001-01-05]}') * 3600 * 24;
/* Interp=Step;{[-10@2001-01-01, 5@2001-01-02, 5@2001-01-03],
  [1@2001-01-04, 1@2001-01-05]} */
SELECT derivative(tfloat 'Interp=Step;[0@2001-01-01, 10@2001-01-02, 5@2001-01-03]');
-- ERROR:  The temporal value must have linear interpolation
</pre></li><li class="listitem"><a name="tnumber_integral"></a><a class="indexterm" name="id4546"></a><p>Devuelve el área bajo la curva</p><p><code class="varname">integral(tnumber) → float</code></p><pre class="programlisting">
SELECT  integral(tint '[1@2001-01-01,2@2001-01-02]') / (24 * 3600 * 1e6);
-- 1
SELECT integral(tfloat '[1@2001-01-01,2@2001-01-02]') / (24 * 3600 * 1e6);
-- 1.5
</pre></li><li class="listitem"><a name="tnumber_twAvg"></a><a class="indexterm" name="id4554"></a><p>Devuelve el promedio ponderado en el tiempo</p><p><code class="varname">twAvg(tnumber) → float</code></p><pre class="programlisting">
SELECT twAvg(tfloat '{[1@2001-01-01, 2@2001-01-03), [2@2001-01-04, 2@2001-01-06)}');
-- 1.75
</pre></li><li class="listitem"><a name="tnumber_ln"></a><a class="indexterm" name="id4562"></a><a class="indexterm" name="id4565"></a><p>Devuelve el logaritmo natural y el logaritmo base 10 de un número flotante temporal</p><p><code class="varname">ln(tfloat) → tfloat</code></p><p><code class="varname">log10(tfloat) → tfloat</code></p><p>El número flotante temporal no puede ser cero o negativo</p><pre class="programlisting">
SELECT ln(tfloat '{[1@2001-01-01, 10@2001-01-02, 5@2001-01-03],
  [1@2001-01-04, 1@2001-01-05]}');
/* {[0@2001-01-01, 2.302585092994046@2001-01-02, 1.6094379124341@2001-01-03], 
   [0@2001-01-04, 0@2001-01-05]} */
SELECT log10(tfloat 'Interp=Step;[-10@2001-01-01, 10@2001-01-02]');
-- ERROR:  Cannot take logarithm of zero or a negative number
</pre></li><li class="listitem"><a name="tnumber_exp"></a><a class="indexterm" name="id4576"></a><p>Devuelve el exponencial (e elevado a la potencia dada) de un número flotante temporal</p><p><code class="varname">exp(tfloat) → tfloat</code></p><pre class="programlisting">
SELECT exp(tfloat '{[1@2001-01-01, 10@2001-01-02],
  [1@2001-01-04, 1@2001-01-05]}');
/* {[2.718281828459045@2001-01-01, 22026.465794806718@2001-01-02], 
   [2.718281828459045@2001-01-04, 2.718281828459045@2001-01-05]} */
SELECT exp(tfloat '{-10@2001-01-01, 0@2001-01-02, 10@2001-01-03}');
-- {0.000045399929762@2001-01-01, 1@2001-01-02, 22026.465794806718@2001-01-03}
</pre></li></ul></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch06s06.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="ch06.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="ch06s08.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">Operaciones booleanas </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> Operaciones de texto</td></tr></table></div></body></html>
