<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Reducción</title><link rel="stylesheet" type="text/css" href="docbook.css"><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="MobilityDB 1.3 Manual de usuario"><link rel="up" href="ch09.html" title="Capítulo 9. Tipos temporales: Operaciones de análisis"><link rel="prev" href="ch09.html" title="Capítulo 9. Tipos temporales: Operaciones de análisis"><link rel="next" href="ch09s03.html" title="Similaridad"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Reducción</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch09.html">Anterior</a> </td><th width="60%" align="center">Capítulo 9. Tipos temporales: Operaciones de análisis</th><td width="20%" align="right"> <a accesskey="n" href="ch09s03.html">Siguiente</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="temporal_types_reduction"></a>Reducción</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="tsample"></a><a class="indexterm" name="idm5242"></a><p>Muestrear un valor temporal con respecto a un intervalo</p><p><code class="varname">tsample({tnumber,tgeompoint},duration interval,torigin timestamptz='2000-01-03',</code></p><p><code class="varname">  interp='discrete') →{tnumber,tgeompoint}</code></p><p>Si el origen no se especifica, su valor se establece por defecto en lunes 3 de enero de 2000. El intervalo dado debe ser estrictamente mayor que cero.</p><pre class="programlisting">
SELECT tsample(tint '{1@2001-01-01,5@2001-01-05}', '3 days', '2001-01-01');
-- {1@2001-01-01}
SELECT tsample(tfloat '[1@2001-01-01,5@2001-01-05]', '1 day', '2001-01-01');
-- {1@2001-01-01, 2@2001-01-02, 3@2001-01-03, 4@2001-01-04, 5@2001-01-05}
SELECT tsample(tfloat '[1@2001-01-01,5@2001-01-05]', '3 days', '2001-01-01');
-- {1@2001-01-01, 4@2001-01-04}
SELECT tsample(tfloat '[1@2001-01-01,5@2001-01-05]', '3 days', '2001-01-01', 'linear');
-- [1@2001-01-01, 4@2001-01-04]
SELECT asText(tsample(tgeompoint '{[Point(1 1)@2001-01-01, Point(5 5)@2001-01-05],
  [Point(1 1)@2001-01-06, Point(5 5)@2001-01-08]}', '3 days', '2001-01-01', 'step'));
-- Interp=Step;[POINT(1 1)@2001-01-01, POINT(4 4)@2001-01-04, POINT(3 3)@2001-01-07]
</pre><pre class="programlisting">
SELECT asText(tsample(tgeompoint '[Point(1 1)@2001-01-01, Point(5 5)@2001-01-05]',
  '2 days', '2001-01-01'));
-- {POINT(1 1)@2001-01-01, POINT(3 3)@2001-01-03, POINT(5 5)@2001-01-05}
SELECT asText(tsample(tgeompoint '{[Point(1 1)@2001-01-01, Point(5 5)@2001-01-05],
  [Point(1 1)@2001-01-06, Point(5 5)@2001-01-08]}', '3 days', '2001-01-01'));
-- {POINT(1 1)@2001-01-01, POINT(4 4)@2001-01-04, POINT(3 3)@2001-01-07}
</pre><p>La <a class="xref" href="ch09s02.html#fig_tsample" title="Figura 9.2. Muestreo de flotantes temporales con interpolación discreta, escalonada y lineal.">Figura 9.2, “Muestreo de flotantes temporales con interpolación discreta, escalonada y lineal.”</a> ilustra el muestreo para números flotantes temporales con varias interpolaciones. Como ilustra la figura, la operación de muestreo es más adecuada para valores temporales con interpolación continua.</p></li></ul></div><div class="figure"><a name="fig_tsample"></a><p class="title"><b>Figura 9.2. Muestreo de flotantes temporales con interpolación discreta, escalonada y lineal.</b></p><div class="figure-contents"><div class="mediaobject"><object type="image/svg+xml" data="../images/tsample.svg" width="405"></object></div></div></div><br class="figure-break"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="tprecision"></a><a class="indexterm" name="idm5266"></a><p>Reducir la precisión temporal de un valor temporal con respecto a un intervalo calculando el promedio/centroide ponderado por el tiempo en cada intervalo de tiempo</p><p><code class="varname">tprecision({tnumber,tgeompoint},duration interval,torigin timestamptz='2000-01-03')</code></p><p><code class="varname"> → {tnumber,tgeompoint}</code></p><p>Si el origen no se especifica, su valor se establece por defecto en lunes 3 de enero de 2000. El intervalo dado debe ser estrictamente mayor que cero.</p><pre class="programlisting">
SELECT tprecision(tint '[1@2001-01-01,5@2001-01-05,1@2001-01-09]','1 day',
  '2001-01-01');
-- Interp=Step;[1@2001-01-01, 5@2001-01-05, 1@2001-01-09]
SELECT tprecision(tfloat '[1@2001-01-01,5@2001-01-05,1@2001-01-09)','1 day',
  '2001-01-01');
-- [1.5@2001-01-01, 4.5@2001-01-04, 4.5@2001-01-05, 1.5@2001-01-08]
SELECT tprecision(tfloat '[1@2001-01-01,5@2001-01-05,1@2001-01-09]','1 day',
  '2001-01-01');
-- [1.5@2001-01-01, 4.5@2001-01-04, 4.5@2001-01-05, 1.5@2001-01-08, 1@2001-01-09]
SELECT tprecision(tfloat '[1@2001-01-01,5@2001-01-05,1@2001-01-09)','2 days',
  '2001-01-01');
-- [2@2001-01-01, 4@2001-01-03, 4@2001-01-05, 2@2001-01-07]
</pre><pre class="programlisting">
SELECT asText(tprecision(tgeompoint '[Point(1 1)@2001-01-01, Point(5 5)@2001-01-05,
  Point(1 1)@2001-01-09)', '1 day', '2001-01-01'));
/* [POINT(1.5 1.5)@2001-01-01, POINT(4.5 4.5)@2001-01-04, POINT(4.5 4.5)@2001-01-05,
   POINT(1.5 1.5)@2001-01-08] */
SELECT asText(tprecision(tgeompoint '[Point(1 1)@2001-01-01, Point(5 5)@2001-01-05,
  Point(1 1)@2001-01-09)', '2 days', '2001-01-01'));
/* [POINT(2 2)@2001-01-01, POINT(4 4)@2001-01-03, POINT(4 4)@2001-01-05,
   POINT(2 2)@2001-01-07] */
SELECT asText(tprecision(tgeompoint '[Point(1 1)@2001-01-01, Point(5 5)@2001-01-05,
  Point(1 1)@2001-01-09)', '4 days', '2001-01-01'));
-- [POINT(3 3)@2001-01-01, POINT(3 3)@2001-01-05]
</pre><p>Cambiar la precisión de un valor temporal es similar a cambiar su <span class="emphasis"><em>granularidad temporal</em></span>, por ejemplo, de marcas de tiempo a horas o días, aunque la precisión se puede establecer en un intervalo arbitrario, como 2 horas y 15 minutos. La <a class="xref" href="ch09s02.html#fig_tprecision" title="Figura 9.3. Cambio de precisión de números flotantes temporales con interpolación discreta, escalonada y lineal.">Figura 9.3, “Cambio de precisión de números flotantes temporales con interpolación discreta, escalonada y lineal.”</a> ilustra un cambio de precisión temporal para números flotantes temporales con varias interpolaciones.</p><div class="figure"><a name="fig_tprecision"></a><p class="title"><b>Figura 9.3. Cambio de precisión de números flotantes temporales con interpolación discreta, escalonada y lineal.</b></p><div class="figure-contents"><div class="mediaobject"><object type="image/svg+xml" data="../images/tprecision.svg" width="405"></object></div></div></div><br class="figure-break"></li></ul></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch09.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="ch09.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="ch09s03.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">Capítulo 9. Tipos temporales: Operaciones de análisis </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> Similaridad</td></tr></table></div></body></html>
