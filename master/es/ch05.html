<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Capítulo 5. Tipos temporales: Operaciones genéricas (Parte 1)</title><link rel="stylesheet" type="text/css" href="docbook.css"><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="MobilityDB 1.1 Manual de usuario"><link rel="up" href="index.html" title="MobilityDB 1.1 Manual de usuario"><link rel="prev" href="ch04s03.html" title="Validez de los tipos temporales"><link rel="next" href="ch05s02.html" title="Entrada y salida"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Capítulo 5. Tipos temporales: Operaciones genéricas (Parte 1)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04s03.html">Anterior</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch05s02.html">Siguiente</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="temporal_types_ops_p1"></a>Capítulo 5. Tipos temporales: Operaciones genéricas (Parte 1)</h1></div></div></div><div class="toc"><p><b>Tabla de contenidos</b></p><dl class="toc"><dt><span class="sect1"><a href="ch05.html#temporal_types_operations">Introducción</a></span></dt><dt><span class="sect1"><a href="ch05s02.html">Entrada y salida</a></span></dt><dt><span class="sect1"><a href="ch05s03.html">Constructores</a></span></dt><dt><span class="sect1"><a href="ch05s04.html">Conversión de tipos</a></span></dt><dt><span class="sect1"><a href="ch05s05.html">Accesores</a></span></dt><dt><span class="sect1"><a href="ch05s06.html">Transformaciones</a></span></dt></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="temporal_types_operations"></a>Introducción</h2></div></div></div><p>A continuación presentamos las funciones y operadores para tipos temporales. Estas funciones y operadores son polimórficos, es decir, sus argumentos pueden ser de varios tipos y el tipo del resultado puede depender del tipo de los argumentos. Para expresar esto, usamos la siguiente notación:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">time</code> representa cualquier tipo de tiempo, es decir, <code class="varname">timestamptz</code>, <code class="varname">tstzspan</code>, <code class="varname">tstzset</code> o <code class="varname">tstzspanset</code>,</p></li><li class="listitem"><p><code class="varname">ttype</code> representa cualquier tipo temporal,</p></li><li class="listitem"><p><code class="varname">tdisc</code> representa cualquier tipo temporal con tipo de base discreto, es decir, <code class="varname">tbool</code>, <code class="varname">tint</code> o <code class="varname">ttext</code>,</p></li><li class="listitem"><p><code class="varname">tcont</code> representa cualquier tipo temporal con tipo de base continuo, es decir, <code class="varname">tfloat</code>, <code class="varname">tgeompoint</code> o <code class="varname">tgeogpoint</code>,</p></li><li class="listitem"><p><code class="varname">torder</code> representa cualquier tipo temporal cuyo tipo de base tiene definido un orden total, es decir, <code class="varname">tint</code>, <code class="varname">tfloat</code> o <code class="varname">ttext</code>,</p></li><li class="listitem"><p><code class="varname">talpha</code> representa cualquier tipo temporal alfanumérico, por ejemplo, <code class="varname">tint</code> or <code class="varname">ttext</code>,</p></li><li class="listitem"><p><code class="varname">tnumber</code> representa cualquier tipo de número temporal, es decir, <code class="varname">tint</code> o <code class="varname">tfloat</code>,</p></li><li class="listitem"><p><code class="varname">tpoint</code> representa un tipo de punto temporal, es decir, <code class="varname">tgeompoint</code> o <code class="varname">tgeogpoint</code>,</p></li><li class="listitem"><p><code class="varname">ttypeInst</code> representa cualquier tipo temporal con subtipo instante,</p></li><li class="listitem"><p><code class="varname">ttypeDiscSeq</code> representa cualquier tipo temporal con subtipo secuencia e interpolación discreta,</p></li><li class="listitem"><p><code class="varname">ttypeContSeq</code> representa cualquier tipo temporal con subtipo secuencia e interpolación contínua,</p></li><li class="listitem"><p><code class="varname">ttypeSeqSet</code> representa cualquier tipo temporal con subtipo conjunto de secuencias</p></li><li class="listitem"><p><code class="varname">base</code> representa cualquier tipo de base de un tipo temporal, es decir, <code class="varname">boolean</code>, <code class="varname">integer</code>, <code class="varname">float</code>, <code class="varname">text</code>, <code class="varname">geometry</code> o <code class="varname">geography</code>,</p></li><li class="listitem"><p><code class="varname">values</code> representa cualquier conjunto de valores de un tipo base de un tipo temporal, por ejemplo, <code class="varname">integer</code>, <code class="varname">intset</code>, <code class="varname">intspan </code> y <code class="varname">intspanset</code> para el tipo base <code class="varname">integer</code></p></li><li class="listitem"><p><code class="varname">number</code> representa cualquier tipo de base numérico, es decir, <code class="varname">integer</code> o <code class="varname">float</code>,</p></li><li class="listitem"><p><code class="varname">numspan</code> representa cualquier tipo de rango numérico, es decir, <code class="varname">intspan</code> o <code class="varname">floatspan</code>,</p></li><li class="listitem"><p><code class="varname">geo</code> representa los tipos <code class="varname">geometry</code> o <code class="varname">geography</code>,</p></li><li class="listitem"><p><code class="varname">geompoint</code> representa el tipo <code class="varname">geometry</code> restringido a un punto.</p></li><li class="listitem"><p><code class="varname">point</code> representa los tipos  <code class="varname">geometry</code> o <code class="varname">geography</code> restringidos a un punto.</p></li><li class="listitem"><p><code class="varname">lines</code> representa los tipos  <code class="varname">geometry</code> o <code class="varname">geography</code> restringidos a una (multi)línea.</p></li><li class="listitem"><p><code class="varname">type[]</code> representa una matriz de <code class="varname">type</code>.</p></li><li class="listitem"><p><code class="varname">&lt;type&gt;</code> en el nombre de una función representa las funciones obtenidas al remplazar <code class="varname">&lt;type&gt;</code> por un <code class="varname">type</code> específico. Por ejemplo, <code class="varname">tintDiscSeq</code> o <code class="varname">tfloatDiscSeq</code> son representadas por <code class="varname">ttypeDiscSeq</code>.</p></li></ul></div><p>
			Una forma común de generalizar las operaciones tradicionales a los tipos temporales es aplicar la operación en <span class="emphasis"><em>cada instante</em></span>, lo que da un valor temporal como resultado. En ese caso, la operación sólo se define en la intersección de las extensiones temporales de los operandos; si las extensiones temporales son disjuntas, el resultado es nulo. Por ejemplo, los operadores de comparación temporal, como <code class="varname">#&lt;</code>, determinan si los valores tomados por sus operandos en cada instante satisfacen la condición y devuelven un booleano temporal. A continuación se dan ejemplos de las diversas generalizaciones de los operadores.
		</p><pre class="programlisting">
-- Comparación temporal
SELECT tfloat '[2@2001-01-01, 2@2001-01-03)' #&lt; tfloat '[1@2001-01-01, 3@2001-01-03)';
-- {[f@2001-01-01, f@2001-01-02], (t@2001-01-02, t@2001-01-03)}
SELECT tfloat '[1@2001-01-01, 3@2001-01-03)' #&lt; tfloat '[3@2001-01-03, 1@2001-01-05)';
-- NULL

-- Adición temporal
SELECT tint '[1@2001-01-01, 1@2001-01-03)' + tint '[2@2001-01-02, 2@2001-01-05)';
-- [3@2001-01-02, 3@2001-01-03)

-- Intersección temporal
SELECT tintersects(tgeompoint '[Point(0 1)@2001-01-01, Point(3 1)@2001-01-04)',
geometry 'Polygon((1 0,1 2,2 2,2 0,1 0))');
-- {[f@2001-01-01, t@2001-01-02, t@2001-01-03], (f@2001-01-03, f@2001-01-04]}

-- Distancia temporal
SELECT tgeompoint '[Point(0 0)@2001-01-01 08:00:00, Point(0 1)@2001-01-03 08:10:00)' &lt;-&gt;
tgeompoint '[Point(0 0)@2001-01-02 08:05:00, Point(1 1)@2001-01-05 08:15:00)';
-- [0.5@2001-01-02 08:05:00+00, 0.745184033794557@2001-01-03 08:10:00+00)
</pre><p>
			Otro requisito común es determinar si los operandos satisfacen <span class="emphasis"><em>alguna vez</em></span> o <span class="emphasis"><em>siempre</em></span> una condición con respecto a una operación. Estos se pueden obtener aplicando los operadores de comparación alguna vez o siempre. Estos operadores se indican anteponiendo los operadores de comparación tradicionales con, respectivamente, <code class="varname">?</code> (alguna vez) y <code class="varname">%</code> (siempre). A continuación se dan ejemplos de operadores de comparación alguna vez y siempre.
		</p><pre class="programlisting">
-- ¿Se cruzan los operandos alguna vez?
SELECT eIntersects(tgeompoint '[Point(0 1)@2001-01-01, Point(3 1)@2001-01-04)',
  geometry 'Polygon((1 0,1 2,2 2,2 0,1 0))') ?= true;
-- true

-- ¿Se cruzan los operandos siempre?
SELECT aIntersects(tgeompoint '[Point(0 1)@2001-01-01, Point(3 1)@2001-01-04)',
  geometry 'Polygon((0 0,0 2,4 2,4 0,0 0))') %= true;
-- true

-- ¿Es el operando izquierdo alguna vez menor que el derecho?
SELECT (tfloat '[1@2001-01-01, 3@2001-01-03)' ?&lt;
  tfloat '[3@2001-01-01, 1@2001-01-03)') ?= true;
-- true

-- ¿Es el operando izquierdo siempre menor que el derecho?
SELECT (tfloat '[1@2001-01-01, 3@2001-01-03)' %&lt;
  tfloat '[2@2001-01-01, 4@2001-01-03)') %= true;
-- true
</pre><p>
			Por ejemplo, la función <code class="varname">eIntersects</code> determina si hay un instante en el que los dos argumentos se cruzan espacialmente.
		</p><p>
			A continuación describimos las funciones y operadores para tipos temporales. Para mayor concisión, en los ejemplos usamos principalmente secuencias compuestas por dos instantes.
		</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04s03.html">Anterior</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch05s02.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">Validez de los tipos temporales </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> Entrada y salida</td></tr></table></div></body></html>
