<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Mathematical Operations</title><link rel="stylesheet" type="text/css" href="docbook.css"><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="MobilityDB 1.3 User's Manual"><link rel="up" href="ch06.html" title="Chapter 6. Temporal Alphanumeric Types"><link rel="prev" href="ch06s06.html" title="Boolean Operations"><link rel="next" href="ch06s08.html" title="Text Operations"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Mathematical Operations</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch06s06.html">Prev</a> </td><th width="60%" align="center">Chapter 6. Temporal Alphanumeric Types</th><td width="20%" align="right"> <a accesskey="n" href="ch06s08.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="temporal_types_math"></a>Mathematical Operations</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="tnumber_add"></a><a class="indexterm" name="id4980"></a><a class="indexterm" name="id4983"></a><a class="indexterm" name="id4986"></a><a class="indexterm" name="id4989"></a><p>Temporal addition, subtraction, multiplication, and division</p><p><code class="varname">{number,tnumber} {+, -, *, /} {number,tnumber} → tnumber</code></p><p>The temporal division will raise an error if the denominator is ever equal to zero during the common timespan of the arguments.</p><pre class="programlisting">
SELECT tint '[2@2001-01-01, 2@2001-01-04)' + 1;
-- [3@2001-01-01, 3@2001-01-04)
SELECT tfloat '[2@2001-01-01, 2@2001-01-04)' + tfloat '[1@2001-01-01, 4@2001-01-04)';
-- [3@2001-01-01, 6@2001-01-04)
SELECT tfloat '[1@2001-01-01, 4@2001-01-04)' +
  tfloat '{[1@2001-01-01, 2@2001-01-02), [1@2001-01-02, 2@2001-01-04)}';
-- {[2@2001-01-01, 4@2001-01-04), [3@2001-01-02, 6@2001-01-04)}
</pre><pre class="programlisting">
SELECT tint '[1@2001-01-01, 1@2001-01-04)' - tint '[2@2001-01-03, 2@2001-01-05)';
-- [-1@2001-01-03, -1@2001-01-04)
SELECT tfloat '[3@2001-01-01, 6@2001-01-04)' - tfloat '[2@2001-01-01, 2@2001-01-04)';
-- [1@2001-01-01, 4@2001-01-04)
</pre><pre class="programlisting">
SELECT tint '[1@2001-01-01, 4@2001-01-04]' * 2;
-- [2@2001-01-01, 8@2001-01-04]
SELECT tfloat '[1@2001-01-01, 4@2001-01-04)' * tfloat '[2@2001-01-01, 2@2001-01-04)';
-- [2@2001-01-01, 8@2001-01-04)
SELECT tfloat '[1@2001-01-01, 3@2001-01-03)' * '[3@2001-01-01, 1@2001-01-03)'
-- {[3@2001-01-01, 4@2001-01-02, 3@2001-01-03)}
</pre><pre class="programlisting">
SELECT 2 / tfloat '[1@2001-01-01, 3@2001-01-04)';
-- [2@2001-01-01, 0.666666666666667@2001-01-04)
SELECT tfloat '[1@2001-01-01, 5@2001-01-05)' / tfloat '[5@2001-01-01, 1@2001-01-05)';
-- {[0.2@2001-01-01, 1@2001-01-03,2001-01-03, 5@2001-01-03,2001-01-05)}
SELECT 2 / tfloat '[-1@2001-01-01, 1@2001-01-02]';
-- ERROR:  Division by zero
SELECT tfloat '[-1@2001-01-04, 1@2001-01-05]' / tfloat '[-1@2001-01-01, 1@2001-01-05]';
-- [-2@2001-01-04, 1@2001-01-05]
</pre></li><li class="listitem"><a name="tnumber_abs"></a><a class="indexterm" name="id5001"></a><p>Return the absolute value of the temporal number</p><p><code class="varname">abs(tnumber) → tnumber</code></p><pre class="programlisting">
SELECT abs(tfloat '[1@2001-01-01, -1@2001-01-03, 1@2001-01-05]');
-- [1@2001-01-01, 0@2001-01-02, 1@2001-01-03, 0@2001-01-04, 1@2001-01-05]
SELECT abs(tint '[1@2001-01-01, -1@2001-01-03, 1@2001-01-05]');
-- [1@2001-01-01, 1@2001-01-05]
</pre></li><li class="listitem"><a name="tnumber_deltaValue"></a><a class="indexterm" name="id5009"></a><p>Return the value difference between consecutive instants of the temporal number</p><p><code class="varname">deltaValue(tnumber) → tnumber</code></p><pre class="programlisting">
SELECT deltaValue(tint '[1@2001-01-01, 2@2001-01-02, 1@2001-01-03]');
-- [1@2001-01-01, -1@2001-01-02, -1@2001-01-03)
SELECT deltaValue(tfloat '{[1.5@2001-01-01, 2@2001-01-02, 1@2001-01-03],
  [2@2001-01-04, 2@2001-01-05]}');
/* Interp=Step;{[0.5@2001-01-01, -1@2001-01-02, -1@2001-01-03),
  [0@2001-01-04, 0@2001-01-05)} */
</pre></li><li class="listitem"><a name="tnumber_floor"></a><a class="indexterm" name="id5017"></a><a class="indexterm" name="id5020"></a><p>Round up or down to the neareast integer</p><p><code class="varname">floor(tfloat) → tfloat</code></p><p><code class="varname">ceil(tfloat) → tfloat</code></p><pre class="programlisting">
SELECT floor(tfloat '[0.5@2001-01-01, 1.5@2001-01-02]');
-- [0@2001-01-01, 1@2001-01-02]
SELECT ceil(tfloat '[0.5@2001-01-01, 0.6@2001-01-02, 0.7@2001-01-03]');
-- [1@2001-01-01, 1@2001-01-03]
</pre></li><li class="listitem"><a name="tnumber_round"></a><a class="indexterm" name="id5030"></a><p>Round to a number of decimal places</p><p><code class="varname">round(tfloat,integer=0) → tfloat</code></p><pre class="programlisting">
SELECT round(tfloat '[0.785398163397448@2001-01-01, 2.356194490192345@2001-01-02]', 2);
-- [0.79@2001-01-01, 2.36@2001-01-02]
</pre></li><li class="listitem"><a name="tnumber_degrees"></a><a class="indexterm" name="id5038"></a><a class="indexterm" name="id5041"></a><p>Convert to degrees or radians</p><p><code class="varname">degrees({float,tfloat},normalize=false) → tfloat</code></p><p><code class="varname">radians(tfloat) → tfloat</code></p><p>The additional parameter in the <code class="varname">degrees</code> function can be used to normalize the values between 0 and 360 degrees.</p><pre class="programlisting">
SELECT degrees(pi() * 5);
-- 900
SELECT degrees(pi() * 5, true);
-- 180
SELECT round(degrees(tfloat '[0.785398163397448@2001-01-01, 2.356194490192345@2001-01-02]'));
-- [45@2001-01-01, 135@2001-01-02]
SELECT radians(tfloat '[45@2001-01-01, 135@2001-01-02]');
-- [0.785398163397448@2001-01-01, 2.356194490192345@2001-01-02]
</pre></li><li class="listitem"><a name="tnumber_derivative"></a><a class="indexterm" name="id5053"></a><p>Return the derivative over time of a temporal float in units per second</p><p><code class="varname">derivative(tfloat) → tfloat</code></p><p>The temporal float must have linear interpolation. Note that this function corresponds to the <a class="link" href="ch07s05.html#tgeo_speed"><code class="varname">speed</code></a> function for temporal points.</p><pre class="programlisting">
SELECT derivative(tfloat '{[0@2001-01-01, 10@2001-01-02, 5@2001-01-03],
  [1@2001-01-04, 0@2001-01-05]}') * 3600 * 24;
/* Interp=Step;{[-10@2001-01-01, 5@2001-01-02, 5@2001-01-03],
  [1@2001-01-04, 1@2001-01-05]} */
SELECT derivative(tfloat 'Interp=Step;[0@2001-01-01, 10@2001-01-02, 5@2001-01-03]');
-- ERROR:  The temporal value must have linear interpolation
</pre></li><li class="listitem"><a name="tnumber_integral"></a><a class="indexterm" name="id5064"></a><p>Return the area under the curve</p><p><code class="varname">integral(tnumber) → float</code></p><pre class="programlisting">
SELECT  integral(tint '[1@2001-01-01,2@2001-01-02]') / (24 * 3600 * 1e6);
-- 1
SELECT integral(tfloat '[1@2001-01-01,2@2001-01-02]') / (24 * 3600 * 1e6);
-- 1.5
</pre></li><li class="listitem"><a name="tnumber_twAvg"></a><a class="indexterm" name="id5072"></a><p>Return the time-weighted average</p><p><code class="varname">twAvg(tnumber) → float</code></p><pre class="programlisting">
SELECT twAvg(tfloat '{[1@2001-01-01, 2@2001-01-03), [2@2001-01-04, 2@2001-01-06)}');
-- 1.75
</pre></li><li class="listitem"><a name="tnumber_ln"></a><a class="indexterm" name="id5080"></a><a class="indexterm" name="id5083"></a><p>Return the natural logarithm and the base 10 logarithm of a temporal float</p><p><code class="varname">ln(tfloat) → tfloat</code></p><p><code class="varname">log10(tfloat) → tfloat</code></p><p>The temporal float cannot be zero or negative</p><pre class="programlisting">
SELECT ln(tfloat '{[1@2001-01-01, 10@2001-01-02, 5@2001-01-03],
  [1@2001-01-04, 1@2001-01-05]}');
/* {[0@2001-01-01, 2.302585092994046@2001-01-02, 1.6094379124341@2001-01-03], 
   [0@2001-01-04, 0@2001-01-05]} */
SELECT log10(tfloat 'Interp=Step;[-10@2001-01-01, 10@2001-01-02]');
-- ERROR:  Cannot take logarithm of zero or a negative number
</pre></li><li class="listitem"><a name="tnumber_exp"></a><a class="indexterm" name="id5094"></a><p>Return the exponential (e raised to the given power) of a temporal float</p><p><code class="varname">exp(tfloat) → tfloat</code></p><pre class="programlisting">
SELECT exp(tfloat '{[1@2001-01-01, 10@2001-01-02],
  [1@2001-01-04, 1@2001-01-05]}');
/* {[2.718281828459045@2001-01-01, 22026.465794806718@2001-01-02], 
   [2.718281828459045@2001-01-04, 2.718281828459045@2001-01-05]} */
SELECT exp(tfloat '{-10@2001-01-01, 0@2001-01-02, 10@2001-01-03}');
-- {0.000045399929762@2001-01-01, 1@2001-01-02, 22026.465794806718@2001-01-03}
</pre></li></ul></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch06s06.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch06.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch06s08.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Boolean Operations </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Text Operations</td></tr></table></div></body></html>
