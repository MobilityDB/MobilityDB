<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Transformations</title><link rel="stylesheet" type="text/css" href="docbook.css"><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="MobilityDB 1.1 User's Manual"><link rel="up" href="ch03.html" title="Chapter 3. Bounding Box Types"><link rel="prev" href="ch03s04.html" title="Accessors"><link rel="next" href="ch03s06.html" title="Spatial Reference System"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Transformations</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch03s04.html">Prev</a> </td><th width="60%" align="center">Chapter 3. Bounding Box Types</th><td width="20%" align="right"> <a accesskey="n" href="ch03s06.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="box_types_transformations"></a>Transformations</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="box_shift"></a><a class="indexterm" name="idm1833"></a><a class="indexterm" name="idm1836"></a><p>Shift the span or the period of the bounding box by a value or interval</p><p><code class="varname">shiftValue(box,{integer,float}) → box</code></p><p><code class="varname">shiftTime(box,interval) → box</code></p><pre class="programlisting">
SELECT shiftValue(tbox 'TBOXFLOAT XT([1.5, 2.5],[2001-01-01,2001-01-02])', 1.0);
-- TBOXFLOAT XT([2.5, 3.5],[2001-01-01, 2001-01-02])
SELECT shiftTime(tbox 'TBOXFLOAT XT([1.5, 2.5],[2001-01-01,2001-01-02])',
  interval '1 day');
-- TBOXFLOAT XT([1.5, 2.5],[2001-01-02, 2001-01-03])
SELECT shiftTime(stbox 'STBOX T([2001-01-01,2001-01-02])', interval '-1 day');
-- STBOX T([2001-12-31, 2001-01-01])
SELECT shiftTime(stbox 'STBOX ZT(((1,1,1),(2,2,2)),[2001-01-01,2001-01-02])',
  interval '1 day');
-- STBOX ZT(((1,1,1),(2,2,2)),[2001-01-02, 2001-01-03])
</pre></li><li class="listitem"><a name="box_scale"></a><a class="indexterm" name="idm1846"></a><a class="indexterm" name="idm1849"></a><p>Scale the span or the period of the bounding box to a value or interval. If the width or the time span of the period is zero (that is, the lower and upper bound are equal), the result is the box. The given value or interval must be strictly greater than zero.</p><p><code class="varname">scaleValue(box,{integer,float}) → box</code></p><p><code class="varname">scaleTime(box,interval) → box</code></p><pre class="programlisting">
SELECT scaleValue(tbox 'TBOXFLOAT XT([1.5, 2.5],[2001-01-01,2001-01-02])', 2.0);
-- TBOXFLOAT XT([1.5, 3.5],[2001-01-01, 2001-01-02])
SELECT scaleTime(tbox 'TBOXFLOAT XT([1.5, 2.5],[2001-01-01,2001-01-02])',
  interval '2 days');
-- TBOXFLOAT XT([1.5, 2.5],[2001-01-01, 2001-01-03])
SELECT scaleTime(stbox 'STBOX ZT(((1,1,1),(2,2,2)),[2001-01-01,2001-01-02])',
  interval '1 hour');
-- STBOX ZT(((1,1,1),(2,2,2)),[2001-01-01 00:00:00, 2001-01-01 01:00:00])
SELECT scaleTime(stbox 'STBOX ZT(((1,1,1),(2,2,2)),[2001-01-01,2001-01-02])',
  interval '-1 day');
-- ERROR:  The interval must be positive: -1 days
</pre></li><li class="listitem"><a name="box_shiftScale"></a><a class="indexterm" name="idm1859"></a><a class="indexterm" name="idm1862"></a><p>Shift and scale the span or the period of the bounding box to the two values or intervals</p><p><code class="varname">shiftScaleValue(tbox,{integer,float},{integer,float}) → box</code></p><p><code class="varname">shiftScaleTime(box,interval,interval) → box</code></p><p>These functions combine the functions <a class="link" href="ch03s05.html#box_shift"><code class="varname">shiftValue</code></a> and <a class="link" href="ch03s05.html#box_scale"><code class="varname">scaleValue</code></a> or <a class="link" href="ch03s05.html#box_shift"><code class="varname">shiftTime</code></a> and <a class="link" href="ch03s05.html#box_scale"><code class="varname">scaleTime</code></a>.</p><pre class="programlisting">
SELECT shiftScaleValue(tbox 'TBOXFLOAT XT([1.5, 2.5],[2001-01-01,2001-01-02])', 2.0, 3.0);
-- TBOXFLOAT XT([3.5, 6.5],[2001-01-01, 2001-01-02])
SELECT shiftScaleTime(tbox 'TBOXFLOAT XT([1.5, 2.5],[2001-01-01,2001-01-02])',
  interval '1 day', interval '3 days');
-- TBOXFLOAT XT([1.5, 2.5],[2001-01-02, 2001-01-05])
SELECT shiftScaleTime(stbox 'STBOX ZT(((1,1,1),(2,2,2)),[2001-01-01,2001-01-02])',
  interval '1 hour', interval '3 hours');
-- STBOX ZT(((1,1,1),(2,2,2)),[2001-01-01 01:00:00, 2001-01-01 04:00:00])
</pre></li><li class="listitem"><a name="getSpace"></a><a class="indexterm" name="idm1881"></a><p>Return the spatial dimension of the bounding box, removing the temporal dimension if any</p><p><code class="varname">getSpace(stbox) → stbox</code></p><pre class="programlisting">
SELECT getSpace(stbox 'STBOX ZT(((1,1,1),(2,2,2)),[2001-01-01,2001-01-03])');
-- STBOX Z((1,1,1),(2,2,2))
</pre></li></ul></div><p>
			The functions given next expand the bounding boxes on the value and the time dimension or set the precision of the value dimension. These functions raise an error if the corresponding dimension is not present.
		</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="expandValue"></a><a class="indexterm" name="idm1891"></a><p>Expand the numeric dimension of the bounding box by a float value</p><p><code class="varname">expandValue(tbox,{integer,float}) → tbox</code></p><pre class="programlisting">
SELECT expandValue(tbox 'TBOXFLOAT XT((1,2),[2001-01-01,2001-01-03])', 1.0);
-- TBOXFLOAT XT((0,3),[2001-01-01,2001-01-03])
SELECT expandValue(tbox 'TBOX T([2001-01-01,2001-01-03))', 1);
-- The box must have value dimension
</pre></li><li class="listitem"><a name="expandSpace"></a><a class="indexterm" name="idm1899"></a><p>Expand the spatial dimension of the bounding box by a float value</p><p><code class="varname">expandSpace(stbox,float) → stbox</code></p><pre class="programlisting">
SELECT expandSpace(stbox 'STBOX ZT(((1,1,1),(2,2,2)),[2001-01-01,2001-01-03])', 1);
-- STBOX ZT(((0,0,0),(3,3,3)),[2001-01-01,2001-01-03])
SELECT expandSpace(stbox 'STBOX T([2001-01-01,2001-01-03))', 1);
-- The box must have space dimension
</pre></li><li class="listitem"><a name="expandTime"></a><a class="indexterm" name="idm1907"></a><p>Expand the temporal dimension of the bounding box by a time interval</p><p><code class="varname">expandTime(box,interval) → box</code></p><pre class="programlisting">
SELECT expandTime(tbox 'TBOXFLOAT XT((1,2),[2001-01-01,2001-01-03])', interval '1 day');
-- TBOXFLOAT XT((1,2),[2011-12-31,2001-01-04])
SELECT expandTime(stbox 'STBOX ZT(((1,1,1),(2,2,2)),[2001-01-01,2001-01-03])',
  interval '1 day');
-- STBOX ZT(((1,1,1),(2,2,2)),[2011-12-31,2001-01-04])
</pre></li><li class="listitem"><a name="box_round"></a><a class="indexterm" name="idm1915"></a><p>Round the value or the coordinates of the bounding box to a number of decimal places</p><p><code class="varname">round(box,integer=0) → box</code></p><pre class="programlisting">
SELECT round(tbox 'TBOXFLOAT XT((1.12345,2.12345),[2001-01-01,2001-01-02])', 2);
-- TBOXFLOAT XT((1.12,2.12),[2001-01-01, 2001-01-02])
SELECT round(stbox 'STBOX XT(((1.12345, 1.12345),(2.12345, 2.12345)),
  [2001-01-01,2001-01-02])', 2);
-- STBOX XT(((1.12,1.12),(2.12,2.12)),[2001-01-01, 2001-01-02])
</pre></li></ul></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03s04.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch03.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch03s06.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Accessors </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Spatial Reference System</td></tr></table></div></body></html>
