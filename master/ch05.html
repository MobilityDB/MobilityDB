<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter 5. Temporal Types: Generic Operations (Part 1)</title><link rel="stylesheet" type="text/css" href="docbook.css"><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="MobilityDB 1.1 User's Manual"><link rel="up" href="index.html" title="MobilityDB 1.1 User's Manual"><link rel="prev" href="ch04s03.html" title="Validity of Temporal Types"><link rel="next" href="ch05s02.html" title="Input and Output"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 5. Temporal Types: Generic Operations (Part 1)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04s03.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch05s02.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="temporal_types_ops_p1"></a>Chapter 5. Temporal Types: Generic Operations (Part 1)</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="ch05.html#temporal_types_operations">Introduction</a></span></dt><dt><span class="sect1"><a href="ch05s02.html">Input and Output</a></span></dt><dt><span class="sect1"><a href="ch05s03.html">Constructors</a></span></dt><dt><span class="sect1"><a href="ch05s04.html">Conversions</a></span></dt><dt><span class="sect1"><a href="ch05s05.html">Accessors</a></span></dt><dt><span class="sect1"><a href="ch05s06.html">Transformations</a></span></dt></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="temporal_types_operations"></a>Introduction</h2></div></div></div><p>We present next the functions and operators for temporal types. These functions and operators are polymorphic, that is, their arguments may be of several types, and the result type may depend on the type of the arguments. To express this, we use the following notation:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">time</code> represents any time type, that is, <code class="varname">timestamptz</code>, <code class="varname">tstzspan</code>, <code class="varname">tstzset</code>, or <code class="varname">tstzspanset</code>,</p></li><li class="listitem"><p><code class="varname">ttype</code> represents any temporal type,</p></li><li class="listitem"><p><code class="varname">tdisc</code> represents any temporal type with a discrete base type, that is, <code class="varname">tbool</code>, <code class="varname">tint</code>, or <code class="varname">ttext</code>,</p></li><li class="listitem"><p><code class="varname">tcont</code> represents any temporal type with a continuous base type, that is, <code class="varname">tfloat</code>, <code class="varname">tgeompoint</code>, or <code class="varname">tgeogpoint</code>,</p></li><li class="listitem"><p><code class="varname">torder</code> represents any temporal type whose base type has a total order defined, that is, <code class="varname">tint</code>, <code class="varname">tfloat</code>, or <code class="varname">ttext</code>,</p></li><li class="listitem"><p><code class="varname">talpha</code> represents any temporal alphanumeric type, such as, <code class="varname">tint</code> or <code class="varname">ttext</code>,</p></li><li class="listitem"><p><code class="varname">tnumber</code> represents any temporal number type, that is, <code class="varname">tint</code> or <code class="varname">tfloat</code>,</p></li><li class="listitem"><p><code class="varname">tpoint</code> represents a temporal point type, that is, <code class="varname">tgeompoint</code> or <code class="varname">tgeogpoint</code>,</p></li><li class="listitem"><p><code class="varname">ttypeInst</code> represents any temporal type with instant subtype,</p></li><li class="listitem"><p><code class="varname">ttypeDiscSeq</code> represents any temporal type with sequence subtype and discrete interpolation,</p></li><li class="listitem"><p><code class="varname">ttypeContSeq</code> represents any temporal type with sequence subtype and continuous interpolation,</p></li><li class="listitem"><p><code class="varname">ttypeSeqSet</code> represents any temporal type with sequence set subtype,</p></li><li class="listitem"><p><code class="varname">base</code> represents any base type of a temporal type, that is, <code class="varname">boolean</code>, <code class="varname">integer</code>, <code class="varname">float</code>, <code class="varname">text</code>, <code class="varname">geometry</code>, or <code class="varname">geography</code>,</p></li><li class="listitem"><p><code class="varname">values</code> represents any set of values of a base type of a temporal type, for example, <code class="varname">integer</code>, <code class="varname">intset</code>, <code class="varname">intspan</code>, and <code class="varname">intspanset</code> for the base type <code class="varname">integer</code></p></li><li class="listitem"><p><code class="varname">number</code> represents any number base type, that is, <code class="varname">integer</code> or <code class="varname">float</code>,</p></li><li class="listitem"><p><code class="varname">numspan</code> represents any number span type, that is, either <code class="varname">intspan</code> or <code class="varname">floatspan</code>,</p></li><li class="listitem"><p><code class="varname">geo</code> represents the types <code class="varname">geometry</code> or <code class="varname">geography</code>,</p></li><li class="listitem"><p><code class="varname">geompoint</code> represents the type <code class="varname">geometry</code> restricted to a point.</p></li><li class="listitem"><p><code class="varname">point</code> represents the types <code class="varname">geometry</code> or <code class="varname">geography</code> restricted to a point.</p></li><li class="listitem"><p><code class="varname">lines</code> represents the types <code class="varname">geometry</code> or <code class="varname">geography</code> restricted to a (multi)line.</p></li><li class="listitem"><p><code class="varname">type[]</code> represents an array of <code class="varname">type</code>.</p></li><li class="listitem"><p><code class="varname">&lt;type&gt;</code> in the name of a function represents the functions obtained by replacing <code class="varname">&lt;type&gt;</code> by a specific <code class="varname">type</code>. For example, <code class="varname">tintDiscSeq</code> or <code class="varname">tfloatDiscSeq</code> are represented by <code class="varname">ttypeDiscSeq</code>.</p></li></ul></div><p>
			A common way to generalize the traditional operations to the temporal types is to apply the operation <span class="emphasis"><em>at each instant</em></span>, which yields a temporal value as result. In that case, the operation is only defined on the intersection of the emporal extents of the operands; if the temporal extents are disjoint, then the result is null. For example, the temporal comparison operators, such as <code class="varname">#&lt;</code>, test whether the values taken by their operands at each instant satisfy the condition and return a temporal Boolean. Examples of the various generalizations of the operators are given next.
		</p><pre class="programlisting">
-- Temporal comparison
SELECT tfloat '[2@2001-01-01, 2@2001-01-03)' #&lt; tfloat '[1@2001-01-01, 3@2001-01-03)';
-- {[f@2001-01-01, f@2001-01-02], (t@2001-01-02, t@2001-01-03)}
SELECT tfloat '[1@2001-01-01, 3@2001-01-03)' #&lt; tfloat '[3@2001-01-03, 1@2001-01-05)';
-- NULL

-- Temporal addition
SELECT tint '[1@2001-01-01, 1@2001-01-03)' + tint '[2@2001-01-02, 2@2001-01-05)';
-- [3@2001-01-02, 3@2001-01-03)

-- Temporal intersects
SELECT tIntersects(tgeompoint '[Point(0 1)@2001-01-01, Point(3 1)@2001-01-04)',
  geometry 'Polygon((1 0,1 2,2 2,2 0,1 0))');
-- {[f@2001-01-01, t@2001-01-02, t@2001-01-03], (f@2001-01-03, f@2001-01-04]}

-- Temporal distance
SELECT tgeompoint '[Point(0 0)@2001-01-01 08:00:00, Point(0 1)@2001-01-03 08:10:00)' &lt;-&gt;
  tgeompoint '[Point(0 0)@2001-01-02 08:05:00, Point(1 1)@2001-01-05 08:15:00)';
-- [0.5@2001-01-02 08:05:00+00, 0.745184033794557@2001-01-03 08:10:00+00)
</pre><p>
			Another common requirement is to determine whether the operands <span class="emphasis"><em>ever</em></span> or <span class="emphasis"><em>always</em></span> satisfy a condition with respect to an operation. These can be obtained by applying the ever or always comparison operators. These operators are denoted by prefixing the traditional comparison operators with, respectively, <code class="varname">?</code> (ever) and <code class="varname">%</code> (always). Examples of ever and always comparison operators are given next.
		</p><pre class="programlisting">
-- Does the operands ever intersect?
SELECT eIntersects(tgeompoint '[Point(0 1)@2001-01-01, Point(3 1)@2001-01-04)',
  geometry 'Polygon((1 0,1 2,2 2,2 0,1 0))') ?= true;
-- true

-- Does the operands always intersect?
SELECT aIntersects(tgeompoint '[Point(0 1)@2001-01-01, Point(3 1)@2001-01-04)',
  geometry 'Polygon((0 0,0 2,4 2,4 0,0 0))') %= true;
-- true

-- Is the left operand ever less than the right one ?
SELECT (tfloat '[1@2001-01-01, 3@2001-01-03)' #&lt;
  tfloat '[3@2001-01-01, 1@2001-01-03)') ?= true;
-- true

-- Is the left operand always less than the right one ?
SELECT (tfloat '[1@2001-01-01, 3@2001-01-03)' #&lt;
  tfloat '[2@2001-01-01, 4@2001-01-03)') %= true;
-- true
</pre><p>
		For example, the <code class="varname">eIntersects</code> function determines whether there is an instant at which the two arguments spatially intersect.
		</p><p>
			We describe next the functions and operators for temporal types. For conciseness, in the examples we mostly use sequences composed of two instants.
		</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04s03.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch05s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Validity of Temporal Types </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Input and Output</td></tr></table></div></body></html>
