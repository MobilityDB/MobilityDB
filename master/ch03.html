<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter 3. Bounding Box Types</title><link rel="stylesheet" type="text/css" href="docbook.css"><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="MobilityDB 1.1 User's Manual"><link rel="up" href="index.html" title="MobilityDB 1.1 User's Manual"><link rel="prev" href="ch02s12.html" title="Indexing"><link rel="next" href="ch03s02.html" title="Constructors"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 3. Bounding Box Types</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02s12.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch03s02.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="box_types"></a>Chapter 3. Bounding Box Types</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="ch03.html#box_types_input_output">Input and Output</a></span></dt><dt><span class="sect1"><a href="ch03s02.html">Constructors</a></span></dt><dt><span class="sect1"><a href="ch03s03.html">Conversions</a></span></dt><dt><span class="sect1"><a href="ch03s04.html">Accessors</a></span></dt><dt><span class="sect1"><a href="ch03s05.html">Transformations</a></span></dt><dt><span class="sect1"><a href="ch03s06.html">Spatial Reference System</a></span></dt><dt><span class="sect1"><a href="ch03s07.html">Split Functions</a></span></dt><dt><span class="sect1"><a href="ch03s08.html">Set Operations</a></span></dt><dt><span class="sect1"><a href="ch03s09.html">Bounding Box Operations</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch03s09.html#idm1978">Topological Operations</a></span></dt><dt><span class="sect2"><a href="ch03s09.html#idm2030">Position Operations</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch03s10.html">Comparisons</a></span></dt><dt><span class="sect1"><a href="ch03s11.html">Aggregations</a></span></dt><dt><span class="sect1"><a href="ch03s12.html">Indexing</a></span></dt></dl></div><p>We present next the functions and operators for bounding box types. These functions and operators are polimorhic, that is, their argumentos can be of various types and their result type may depend on the type of the arguments. To express this in the signature of the operators, we use the following notation:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">box</code> represents any bounding box type, that is, <code class="varname">tbox</code> or <code class="varname">stbox</code>.</p></li></ul></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="box_types_input_output"></a>Input and Output</h2></div></div></div><p>
				MobilityDB generalizes Open Geospatial Consortium's Well-Known Text (WKT) and Well-Known Binary (WKB) input and output format for all temporal types. We present next the functions for input and output box types.
			</p><p>A <code class="varname">tbox</code> is composed of a numeric and/or time dimensions. For each dimension, a span given, that is, either an <code class="varname">intspan</code> or a <code class="varname">floatspan</code> for the value dimension and a <code class="varname">tstzspan</code> for the time dimension. Examples of input of <code class="varname">tbox</code> values are as follows:
			</p><pre class="programlisting">
-- Both value and time dimensions
SELECT tbox 'TBOXINT XT([1,3),[2001-01-01,2001-01-02])';
SELECT tbox 'TBOXFLOAT XT([1.5,2.5],[2001-01-01,2001-01-02])';
-- Only value dimension
SELECT tbox 'TBOXINT X([1,3))';
SELECT tbox 'TBOXFLOAT X((1.5,2.5))';
-- Only time dimension
SELECT tbox 'TBOX T((2001-01-01,2001-01-02))';
</pre><p>
		</p><p>An <code class="varname">stbox</code> is composed of a spatial and/or time dimensions, where the coordinates of the spatial dimension may be 2D or 3D. For the time dimension a <code class="varname">tstzspan</code> is given and for the spatial dimension minimum and maximum coordinate values are given, where the latter may be Cartesian (planar) or geodetic (spherical). The SRID of the coordinates may be specified; if it is not the case, a value of 0 (unknown) and 4326 (corresponding to WGS84) is assumed, respectively, for planar and geodetic boxes. Geodetic boxes always have a Z dimension to account for the curvature of the underlying sphere or spheroid. Examples of input of <code class="varname">stbox</code> values are as follows:
			</p><pre class="programlisting">
-- Only value dimension with X and Y coordinates
SELECT stbox 'STBOX X((1.0,2.0),(1.0,2.0))';
-- Only value dimension with X, Y, and Z coordinates
SELECT stbox 'STBOX Z((1.0,2.0,3.0),(1.0,2.0,3.0))';
-- Both value (with X and Y coordinates) and time dimensions
SELECT stbox 'STBOX XT(((1.0,2.0),(1.0,2.0)),[2001-01-03,2001-01-03])';
-- Both value (with X, Y, and Z coordinates) and time dimensions
SELECT stbox 'STBOX ZT(((1.0,2.0,3.0),(1.0,2.0,3.0)),[2001-01-01,2001-01-03])';
-- Only time dimension
SELECT stbox 'STBOX T([2001-01-03,2001-01-03])';
-- Only value dimension with X, Y, and Z geodetic coordinates
SELECT stbox 'GEODSTBOX Z((1.0,2.0,3.0),(1.0,2.0,3.0))';
-- Both value (with X, Y and Z geodetic coordinates) and time dimension
SELECT stbox 'GEODSTBOX ZT(((1.0,2.0,3.0),(1.0,2.0,3.0)),[2001-01-04,2001-01-04])';
-- Only time dimension for geodetic box
SELECT stbox 'GEODSTBOX T([2001-01-03,2001-01-03])';
-- SRID is given
SELECT stbox 'SRID=5676;STBOX XT(((1.0,2.0),(1.0,2.0)),[2001-01-04,2001-01-04])';
SELECT stbox 'SRID=4326;GEODSTBOX Z((1.0,2.0,3.0),(1.0,2.0,3.0))';
</pre><p>
		</p><p>
				We give next the functions for input and output of box types in Well-Known Text and Well-Known Binary format.
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="box_asText"></a><a class="indexterm" name="idm1489"></a><p>Return the Well-Known Text (WKT) representation</p><p><code class="varname">asText(box,maxdecdigits=15) → text</code></p><p>The <code class="varname">maxdecdigits</code> argument can be used to set the maximum number of decimal places in the output of floating point values (default 15).</p><pre class="programlisting">
SELECT asText(tbox 'TBOXFLOAT XT([1.123456789,2.123456789),[2001-01-01,2001-01-02))', 3);
-- TBOXFLOAT XT([1.123, 2.123),[2001-01-01 00:00:00+01, 2001-01-02 00:00:00+01))
SELECT asText(stbox 'STBOX Z((1.55,1.55,1.55),(2.55,2.55,2.55))', 0);
-- STBOX Z((2,2,2),(3,3,3))
</pre></li><li class="listitem"><a name="box_asBinary"></a><a class="indexterm" name="idm1499"></a><p>Return the Well-Known Binary (WKB) representation</p><p><code class="varname">asBinary(box,endian text='') → bytea</code></p><p>The result is encoded using either the little-endian (NDR) or the big-endian (XDR) encoding. If no encoding is specified, then the encoding of the machine is used.</p><pre class="programlisting">
SELECT asBinary(tbox 'TBOXFLOAT XT([1,2),[2001-01-01,2001-01-02))');
-- \x0103270001009c57d3c11c000000fc2ef1d51c00000d0001000000000000f03f0000000000000040
SELECT asBinary(tbox 'TBOXFLOAT XT([1,2),[2001-01-01,2001-01-02))', 'XDR');
-- \x000300270100001cc1d3579c0000001cd5f12efc00000d013ff00000000000004000000000000000
SELECT asBinary(stbox 'STBOX X((1,1),(2,2))');
-- \x0101000000000000f03f0000000000000040000000000000f03f0000000000000040
</pre></li><li class="listitem"><a name="box_asHexWKB"></a><a class="indexterm" name="idm1508"></a><p>Return the Hexadecimal Well-Known Binary (HexWKB) representation as text</p><p><code class="varname">asHexWKB(box,endian text='') → text</code></p><p>The result is encoded using either the little-endian (NDR) or the big-endian (XDR) encoding. If no encoding is specified, then the encoding of the machine is used.</p><pre class="programlisting">
SELECT asHexWKB(tbox 'TBOXFLOAT XT([1,2),[2001-01-01,2001-01-02))');
-- 0103270001009C57D3C11C000000FC2EF1D51C00000D0001000000000000F03F0000000000000040
SELECT asHexWKB(tbox 'TBOXFLOAT XT([1,2)[2001-01-01,2001-01-02))', 'XDR');
-- 000300270100001CC1D3579C0000001CD5F12EFC00000D013FF00000000000004000000000000000
SELECT asHexWKB(stbox 'STBOX X((1,1),(2,2))');
-- 0101000000000000F03F0000000000000040000000000000F03F0000000000000040
</pre></li><li class="listitem"><a name="box_FromBinary"></a><a class="indexterm" name="idm1517"></a><a class="indexterm" name="idm1520"></a><p>Input from a Well-Known Binary (WKB) representation</p><p><code class="varname">tboxFromBinary(bytea) → tbox</code></p><p><code class="varname">stboxFromBinary(bytea) → stbox</code></p><pre class="programlisting">
SELECT tboxFromBinary(
  '\x0103270001009c57d3c11c000000fc2ef1d51c00000d0001000000000000f03f0000000000000040');
-- TBOXFLOAT XT([1,2),[2001-01-01,2001-01-02))
SELECT stboxFromBinary(
  '\x0101000000000000f03f0000000000000040000000000000f03f0000000000000040');
--  STBOX X((1,1),(2,2))
</pre></li><li class="listitem"><a name="box_FromHexWKB"></a><a class="indexterm" name="idm1530"></a><a class="indexterm" name="idm1533"></a><p>Input from an Hexadecimal Well-Known Binary (HexWKB) representation</p><p><code class="varname">tboxFromHexWKB(text) → tbox</code></p><p><code class="varname">stboxFromHexWKB(text) → stbox</code></p><pre class="programlisting">
SELECT tboxFromHexWKB(
  '0103270001009C57D3C11C000000FC2EF1D51C00000D0001000000000000F03F0000000000000040');
-- TBOXFLOAT XT([1,2),[2001-01-01,2001-01-02)))
SELECT stboxFromHexWKB(
  '0101000000000000F03F0000000000000040000000000000F03F0000000000000040');
-- STBOX X((1,1),(2,2))
</pre></li></ul></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02s12.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch03s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Indexing </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Constructors</td></tr></table></div></body></html>
