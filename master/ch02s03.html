<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Conversions</title><link rel="stylesheet" type="text/css" href="docbook.css"><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="MobilityDB 1.3 User's Manual"><link rel="up" href="ch02.html" title="Chapter 2. Set and Span Types"><link rel="prev" href="ch02s02.html" title="Constructors"><link rel="next" href="ch02s04.html" title="Accessors"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Conversions</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02s02.html">Prev</a> </td><th width="60%" align="center">Chapter 2. Set and Span Types</th><td width="20%" align="right"> <a accesskey="n" href="ch02s04.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm735"></a>Conversions</h2></div></div></div><p>
			Values of set and span types can be converted to one another or converted to and from PostgreSQL range types using the function <code class="varname">CAST</code> or using the <code class="varname">::</code> notation.
		</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="base_convert"></a><a class="indexterm" name="idm742"></a><a class="indexterm" name="idm745"></a><a class="indexterm" name="idm748"></a><a class="indexterm" name="idm751"></a><p>Convert a base value to a set, span, or span set value</p><p><code class="varname">base::{set,span,spanset}</code></p><p><code class="varname">set(base) → set</code></p><p><code class="varname">span(base) → span</code></p><p><code class="varname">spanset(base) → spanset</code></p><pre class="programlisting">
SELECT CAST(timestamptz '2001-01-01 08:00:00' AS tstzset);
-- {2001-01-01 08:00:00}
SELECT timestamptz '2001-01-01 08:00:00'::tstzspan;
-- [2001-01-01 08:00:00, 2001-01-01 08:00:00]
SELECT spanset(timestamptz '2001-01-01 08:00:00');
-- {[2001-01-01 08:00:00, 2001-01-01 08:00:00]}
</pre></li><li class="listitem"><a name="set_convert"></a><a class="indexterm" name="idm765"></a><p>Convert a set value to a span set value</p><p><code class="varname">set::spanset</code></p><p><code class="varname">spanset(set) → spanset</code></p><pre class="programlisting">
SELECT spanset(tstzset '{2001-01-01 08:00:00, 2001-01-01 08:15:00,
  2001-01-01 08:25:00}');
/* {[2001-01-01 08:00:00, 2001-01-01 08:00:00],
   [2001-01-01 08:15:00, 2001-01-01 08:15:00],
   [2001-01-01 08:25:00, 2001-01-01 08:25:00]} */
</pre></li><li class="listitem"><a name="span_convert"></a><a class="indexterm" name="idm775"></a><a class="indexterm" name="idm778"></a><p>Convert a span value to a span set value</p><p><code class="varname">span::spanset</code></p><p><code class="varname">spanset(span) → spanset</code></p><pre class="programlisting">
SELECT floatspan '[1.5,2.5]'::floatspanset;
-- {[1.5, 2.5]}
SELECT tstzspan '[2001-01-01 08:00:00, 2001-01-01 08:30:00)'::tstzspanset;
-- {[2001-01-01 08:00:00, 2001-01-01 08:30:00)}
</pre></li><li class="listitem"><a name="setspan_span"></a><a class="indexterm" name="idm788"></a><p>Convert a set or a span set into a span, ignoring the potential time gaps</p><p><code class="varname">{set,spanset}::span</code></p><p><code class="varname">span({set,spanset}) → span</code></p><pre class="programlisting">
SELECT span(dateset '{2001-01-01, 2001-01-03, 2001-01-05}');
-- [2001-01-01, 2001-01-06)
SELECT span(tstzspanset '{[2001-01-01, 2001-01-02), [2001-01-03, 2001-01-04)}');
-- [2001-01-01, 2001-01-04)
</pre></li><li class="listitem"><a name="range_convert"></a><a class="indexterm" name="idm798"></a><a class="indexterm" name="idm801"></a><a class="indexterm" name="idm804"></a><p>Convert a span value to and from a PostgreSQL range value</p><p><code class="varname">span::range</code></p><p><code class="varname">range::span</code></p><p><code class="varname">range(span) → range</code></p><p><code class="varname">span(range) → span</code></p><p>Notice that PostgreSQL range values accept empty ranges and ranges with infinite values, which are not allowed as span values in MobilityDB</p><pre class="programlisting">
SELECT intspan '[10, 20)'::int4range;
-- [10,20)
SELECT tstzspan '[2001-01-01 08:00:00, 2001-01-01 08:30:00)'::tstzrange;
-- ["2001-01-01 08:00:00","2001-01-01 08:30:00")
SELECT int4range '[10, 20)'::intspan;
-- [10,20)
SELECT int4range 'empty'::intspan;
-- ERROR:  Range cannot be empty
SELECT int4range '[10,)'::intspan;
-- ERROR:  Range bounds cannot be infinite
SELECT tstzrange '[2001-01-01 08:00:00, 2001-01-01 08:30:00)'::tstzspan;
-- [2001-01-01 08:00:00, 2001-01-01 08:30:00)
</pre></li><li class="listitem"><a name="multirange_convert"></a><a class="indexterm" name="idm819"></a><a class="indexterm" name="idm822"></a><a class="indexterm" name="idm825"></a><p>Convert a span set value to and from a PostgreSQL multirange value</p><p><code class="varname">spanset::multirange</code></p><p><code class="varname">multirange::spanset</code></p><p><code class="varname">multirange(spanset) → multirange</code></p><p><code class="varname">spanset(multirange) → spanset</code></p><pre class="programlisting">
SELECT intspanset '{[1,2],[4,5]}'::int4multirange;
-- {[1,3),[4,6)}
SELECT tstzspanset '{[2001-01-01,2001-01-02],[2001-01-04,2001-01-05]}'::tstzmultirange;
-- {[2001-01-01,2001-01-02],[2001-01-04,2001-01-05]}
SELECT int4multirange '{[1,2],[4,5]}'::intspanset;
-- {[1, 3), [4, 6)}
SELECT tstzmultirange '{[2001-01-01,2001-01-02],[2001-01-04,2001-01-05]}'::tstzspanset;
-- {[2001-01-01, 2001-01-02], [2001-01-04, 2001-01-05]}
</pre></li></ul></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch02.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch02s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Constructors </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Accessors</td></tr></table></div></body></html>
