<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter 9. Temporal Types: Analytics Operations</title><link rel="stylesheet" type="text/css" href="docbook.css"><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="MobilityDB 1.1 User's Manual"><link rel="up" href="index.html" title="MobilityDB 1.1 User's Manual"><link rel="prev" href="ch08s07.html" title="Spatial Relationships"><link rel="next" href="ch09s02.html" title="Reduction"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 9. Temporal Types: Analytics Operations</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch08s07.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch09s02.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="temporal_types_analytics"></a>Chapter 9. Temporal Types: Analytics Operations</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="ch09.html#temporal_types_simplification">Simplification</a></span></dt><dt><span class="sect1"><a href="ch09s02.html">Reduction</a></span></dt><dt><span class="sect1"><a href="ch09s03.html">Similarity</a></span></dt><dt><span class="sect1"><a href="ch09s04.html">Multidimensional Tiling</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch09s04.html#bucket_functions">Bucket Functions</a></span></dt><dt><span class="sect2"><a href="ch09s04.html#tile_functions">Tile Functions</a></span></dt><dt><span class="sect2"><a href="ch09s04.html#split_functions">Split Functions</a></span></dt></dl></dd></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="temporal_types_simplification"></a>Simplification</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="minDistSimplify"></a><a class="indexterm" name="idm5181"></a><a class="indexterm" name="idm5184"></a><p>Return a temporal float or a temporal point simplified ensuring that consecutive values are at least a certain distance or time interval apart <span class="inlinemediaobject"><img src="images/cube.svg" width="13"></span>
 <span class="inlinemediaobject"><img src="images/world.svg" width="13"></span>
</p><p><code class="varname">minDistSimplify({tfloat,tpoint},mindist float) → {tfloat,tpoint}</code></p><p><code class="varname">minTimeDeltaSimplify({tfloat,tpoint},mint interval) → {tfloat,tpoint}</code></p><p>In the case of temporal points, the distance is specified in the units of the coordinate system. Notice that simplification applies only to temporal sequences or sequence sets with linear interpolation. In all other cases, a copy of the given temporal value is returned.</p><pre class="programlisting">
SELECT minDistSimplify(tfloat '[1@2001-01-01,2@2001-01-02,3@2001-01-04,4@2001-01-05]', 1);
-- [1@2001-01-01, 3@2001-01-04, 4@2001-01-05]
SELECT asText(minDistSimplify(tgeompoint '[Point(1 1 1)@2001-01-01,
  Point(2 2 2)@2001-01-02, Point(3 3 3)@2001-01-04, Point(5 5 5)@2001-01-05)', sqrt(3)));
-- [POINT Z (1 1 1)@2001-01-01, POINT Z (3 3 3)@2001-01-04, POINT Z (5 5 5)@2001-01-05)
SELECT asText(minDistSimplify(tgeompoint '[Point(1 1 1)@2001-01-01,
  Point(2 2 2)@2001-01-02, Point(3 3 3)@2001-01-04, Point(4 4 4)@2001-01-05)', sqrt(3)));
-- [POINT Z (1 1 1)@2001-01-01, POINT Z (3 3 3)@2001-01-04, POINT Z (4 4 4)@2001-01-05]
</pre><pre class="programlisting">
SELECT minTimeDeltaSimplify(tfloat '[1@2001-01-01, 2@2001-01-02, 3@2001-01-04,
  4@2001-01-05]', '1 day');
-- [1@2001-01-01, 3@2001-01-04, 4@2001-01-05]
SELECT asText(minTimeDeltaSimplify(tgeogpoint '[Point(1 1 1)@2001-01-01,
  Point(2 2 2)@2001-01-02, Point(3 3 3)@2001-01-04, Point(5 5 5)@2001-01-05)', '1 day'));
-- [POINT Z (1 1 1)@2001-01-01, POINT Z (3 3 3)@2001-01-04, POINT Z (5 5 5)@2001-01-05]
</pre></li><li class="listitem"><a name="douglasPeuckerSimplify"></a><a class="indexterm" name="idm5210"></a><a class="indexterm" name="idm5213"></a><p>Return a temporal float or a temporal point simplified using the <a class="ulink" href="https://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm" target="_top">Douglas-Peucker algorithm</a> <span class="inlinemediaobject"><img src="images/cube.svg" width="13"></span>
</p><p><code class="varname">maxDistSimplify({tfloat,tgeompoint},maxdist float,syncdist=true) →</code></p><p><code class="varname">  {tfloat,tgeompoint}</code></p><p><code class="varname">douglasPeuckerSimplify({tfloat,tgeompoint},maxdist float,syncdist=true) →</code></p><p><code class="varname">  {tfloat,tgeompoint}</code></p><p>The difference between the two functions is that <code class="varname">maxDistSimplify</code> uses a single-pass version of the algorithm whereas <code class="varname">douglasPeuckerSimplify</code> uses the standard recursive algorithm.</p><p>The function removes values or points that are less than or equal to the distance passed as second argument. In the case of temporal points, the distance is specified in the units of the coordinate system. The third argument applies only for temporal points and specifies whether the spatial or the synchronized distance is used. Notice that simplification applies only to temporal sequences or sequence sets with linear interpolation. In all other cases, a copy of the given temporal value is returned.</p><pre class="programlisting">
-- Only synchronous distance for temporal floats
SELECT maxDistSimplify(tfloat '[1@2001-01-01, 2@2001-01-02, 1@2001-01-03, 3@2001-01-04,
  1@2001-01-05]', 1, false);
-- [1@2001-01-01, 1@2001-01-03, 3@2001-01-04, 1@2001-01-05]
-- Synchronous distance by default for temporal points
SELECT asText(maxDistSimplify(tgeompoint '[Point(1 1)@2001-01-01, Point(2 2)@2001-01-02,
  Point(3 1)@2001-01-03, Point(3 3)@2001-01-05, Point(5 1)@2001-01-06]', 2));
-- [POINT(1 1)@2001-01-01, POINT(3 3)@2001-01-05, POINT(5 1)@2001-01-06]
-- Spatial distance
SELECT asText(maxDistSimplify(tgeompoint '[Point(1 1)@2001-01-01, Point(2 2)@2001-01-02,
  Point(3 1)@2001-01-03, Point(3 3)@2001-01-05, Point(5 1)@2001-01-06]', 2, false));
-- [POINT(1 1)@2001-01-01, POINT(5 1)@2001-01-06]
</pre><pre class="programlisting">
-- Spatial vs synchronized Euclidean distance
SELECT asText(douglasPeuckerSimplify(tgeompoint '[Point(1 1)@2001-01-01,
  Point(6 1)@2001-01-06, Point(7 4)@2001-01-07]', 2.3, false));
-- [POINT(1 1)@2001-01-01, POINT(7 4)@2001-01-07]
SELECT asText(douglasPeuckerSimplify(tgeompoint '[Point(1 1)@2001-01-01,
  Point(6 1)@2001-01-06, Point(7 4)@2001-01-07]', 2.3, true));
-- [POINT(1 1)@2001-01-01, POINT(6 1)@2001-01-06, POINT(7 4)@2001-01-07]
</pre><p>The difference between the spatial and the synchronized distance is illustrated in the last two examples above and in <a class="xref" href="ch09.html#dist_vs_sed" title="Figure 9.1. Difference between the spatial and the synchronous distance.">Figure 9.1, “Difference between the spatial and the synchronous distance.”</a>. In the first example, which uses the spatial distance, the second instant is removed since the perperdicular distance between <code class="varname">POINT(6 1)</code> and the line defined by <code class="varname">POINT(1 1)</code> and <code class="varname">POINT(7 4)</code> is equal to 2.23. On the contrary, in the second example the second instant is kept since the projection of <code class="varname">Point(6 2)</code> at timestamp <code class="varname">2001-01-06</code> over the temporal line segment results in <code class="varname">Point(6 3.5)</code> and the distance between the original point and its projection is 2.5.</p><div class="figure-float"><div class="figure"><a name="dist_vs_sed"></a><p class="title"><b>Figure 9.1. Difference between the spatial and the synchronous distance.</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/dist_vs_sed.svg" alt="Difference between the spatial and the synchronous distance."></div></div></div><br class="figure-break"></div><p>A typical use for the <code class="varname">douglasPeuckerSimplify</code> function is to reduce the size of a dataset, in particular for visualization purposes. If the visualization is static, then the spatial distance should be preferred, if the visualization is dynamic or animated, the synchronized distance should be preferred.</p></li></ul></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch08s07.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch09s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Spatial Relationships </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Reduction</td></tr></table></div></body></html>
