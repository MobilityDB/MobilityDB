<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Bounding Box Operations</title><link rel="stylesheet" type="text/css" href="docbook.css"><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="MobilityDB 1.1 User's Manual"><link rel="up" href="ch03.html" title="Chapter 3. Bounding Box Types"><link rel="prev" href="ch03s08.html" title="Set Operations"><link rel="next" href="ch03s10.html" title="Comparisons"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Bounding Box Operations</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch03s08.html">Prev</a> </td><th width="60%" align="center">Chapter 3. Bounding Box Types</th><td width="20%" align="right"> <a accesskey="n" href="ch03s10.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="box_types_topo_pos"></a>Bounding Box Operations</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm2017"></a>Topological Operations</h3></div></div></div><p>There are five topological operators: overlaps (<code class="varname">&amp;&amp;</code>), contains (<code class="varname">@&gt;</code>), contained (<code class="varname">&lt;@</code>), same (<code class="varname">~=</code>), and adjacent (<code class="varname">-|-</code>). The operators verify the topological relationship between the bounding boxes taking into account the value and/or the time dimension for as many dimensions that are present on both arguments.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="box_overlap"></a><a class="indexterm" name="idm2027"></a><p>Do the bounding boxes overlap?</p><p><code class="varname">box &amp;&amp; box → boolean</code></p><pre class="programlisting">
SELECT tbox 'TBOXFLOAT XT((1,3),[2001-01-01,2001-01-03])' &amp;&amp;
  tbox 'TBOXFLOAT XT((2,4),[2001-01-02,2001-01-04])';
-- true
SELECT stbox 'STBOX XT(((1,1),(2,2)),[2001-01-01,2001-01-02])' &amp;&amp;
  stbox 'STBOX T([2001-01-02,2001-01-02])';
-- true
</pre></li><li class="listitem"><a name="box_contains"></a><a class="indexterm" name="idm2035"></a><p>Does the first bounding box contain the second one?</p><p><code class="varname">box @&gt; box → boolean</code></p><pre class="programlisting">
SELECT tbox 'TBOXFLOAT XT((1,4),[2001-01-01,2001-01-04])' @&gt;
  tbox 'TBOXFLOAT XT((2,3),[2001-01-01,2001-01-02])';
-- true
SELECT stbox 'STBOX Z((1,1,1),(3,3,3))' @&gt;
  stbox 'STBOX XT(((1,1),(2,2)),[2001-01-01,2001-01-02])';
-- true
</pre></li><li class="listitem"><a name="box_containedby"></a><a class="indexterm" name="idm2043"></a><p>Is the first bounding box contained in the second one?</p><p><code class="varname">box &lt;@ box → boolean</code></p><pre class="programlisting">
SELECT tbox 'TBOXFLOAT XT((1,2),[2001-01-01,2001-01-02])' &lt;@
  tbox 'TBOXFLOAT XT((1,2),[2001-01-01,2001-01-02])';
-- true
SELECT stbox 'STBOX XT(((1,1),(2,2)),[2001-01-01,2001-01-02])' &lt;@
  stbox 'STBOX ZT(((1,1,1),(2,2,2)),[2001-01-01,2001-01-02])';
-- true
</pre></li><li class="listitem"><a name="box_same"></a><a class="indexterm" name="idm2051"></a><p>Are the bounding boxes equal in their common dimensions?</p><p><code class="varname">box ~= box → boolean</code></p><pre class="programlisting">
SELECT tbox 'TBOXFLOAT XT((1,2),[2001-01-01,2001-01-02])' ~=
  tbox 'TBOXFLOAT T([2001-01-01,2001-01-02])';
-- true
SELECT stbox 'STBOX XT(((1,1),(3,3)),[2001-01-01,2001-01-03])' ~=
  stbox 'STBOX Z((1,1,1),(3,3,3))';
-- true
</pre></li><li class="listitem"><a name="box_adjacent"></a><a class="indexterm" name="idm2059"></a><p>Are the bounding boxes adjacent?</p><p><code class="varname">box -|- box → boolean</code></p><p>Two boxes are adjacent if they share <span class="emphasis"><em>n</em></span> dimensions and their intersection is at most of <span class="emphasis"><em>n</em></span>-1 dimensions.</p><pre class="programlisting">
SELECT tbox 'TBOXINT XT([1,2),[2001-01-01,2001-01-02])' -|-
  tbox 'TBOXINT XT([2,3),[2001-01-02,2001-01-03])';
-- true
SELECT tbox 'TBOXFLOAT XT((1,2),[2001-01-01,2001-01-02])' -|-
  tbox 'TBOX T([2001-01-02,2001-01-03])';
-- true
SELECT stbox 'STBOX XT(((1,1),(3,3)),[2001-01-01,2001-01-03])' -|-
  stbox 'STBOX XT(((2,2),(4,4)),[2001-01-03,2001-01-04])';
-- true
</pre></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm2069"></a>Position Operations</h3></div></div></div><p>The position operators consider the relative position of the bounding boxes. The operators <code class="varname">&lt;&lt;</code>, <code class="varname">&gt;&gt;</code>, <code class="varname">&amp;&lt;</code>, and <code class="varname">&amp;&gt;</code> consider the X value for the <code class="varname">tbox</code> type and the X coordinates for the <code class="varname">stbox</code> type, the operators <code class="varname">&lt;&lt;|</code>, <code class="varname">|&gt;&gt;</code>, <code class="varname">&amp;&lt;|</code>, and <code class="varname">|&amp;&gt;</code> consider the Y coordinates for the <code class="varname">stbox</code> type, the operators <code class="varname">&lt;&lt;/</code>, <code class="varname">/&gt;&gt;</code>, <code class="varname">&amp;&lt;/</code>, and <code class="varname">/&amp;&gt;</code> consider the Z coordinates for the <code class="varname">stbox</code> type, and the operators <code class="varname">&lt;&lt;#</code>, <code class="varname">#&gt;&gt;</code>, <code class="varname">#&amp;&lt;</code>, and <code class="varname">#&amp;&gt;</code> consider the time dimension for the <code class="varname">tbox</code> and <code class="varname">stbox</code> types. The operators raise an error if both boxes do not have the required dimension.</p><p>The operators for the numeric dimension of the <code class="varname">tbox</code> type are given next.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="tbox_left"></a><a class="indexterm" name="idm2098"></a><a class="indexterm" name="idm2101"></a><a class="indexterm" name="idm2104"></a><a class="indexterm" name="idm2107"></a><p>Are the X/Y/Z/T values of the first bounding box strictly less than those of the second one?</p><p><code class="varname">{tbox,stbox} &lt;&lt; {tbox,stbox} → boolean</code></p><p><code class="varname">stbox &lt;&lt;| stbox → boolean</code></p><p><code class="varname">stbox &lt;&lt;/ stbox → boolean</code></p><p><code class="varname">{tbox,stbox} &lt;&lt;# {tbox,stbox} → boolean</code></p><pre class="programlisting">
SELECT tbox 'TBOXFLOAT XT((1,2),[2001-01-01,2001-01-02])' &lt;&lt;
  tbox 'TBOXFLOAT XT((3,4),[2001-01-03,2001-01-04])';
-- true
SELECT tbox 'TBOXFLOAT XT((1,2),[2001-01-01,2001-01-02])' &lt;&lt;
  tbox 'TBOXFLOAT T([2001-01-03,2001-01-04])';
-- ERROR:  The box must have value dimension
SELECT stbox 'STBOX Z((1,1,1),(2,2,2))' &lt;&lt;| stbox 'STBOX Z((3,3,3),(4,4,4))';
-- true
SELECT stbox 'STBOX Z((1,1,1),(2,2,2))' &lt;&lt;/ stbox 'STBOX Z((3,3,3),(4,4,4))';
-- true
SELECT tbox 'TBOXFLOAT XT((1,2),[2001-01-01,2001-01-02])' &lt;&lt;#
  tbox 'TBOXFLOAT XT((3,4),[2001-01-03,2001-01-04])';
-- true
</pre></li><li class="listitem"><a name="tbox_right"></a><a class="indexterm" name="idm2121"></a><a class="indexterm" name="idm2124"></a><a class="indexterm" name="idm2127"></a><a class="indexterm" name="idm2130"></a><p>Are the X/Y/Z/T values of the first bounding box strictly greater than those of the second one?</p><p><code class="varname">{tbox,stbox} &gt;&gt; {tbox,stbox} → boolean</code></p><p><code class="varname">stbox |&gt;&gt; stbox → boolean</code></p><p><code class="varname">stbox /&gt;&gt; stbox → boolean</code></p><p><code class="varname">{tbox,stbox} #&gt;&gt; {tbox,stbox} → boolean</code></p><pre class="programlisting">
SELECT tbox 'TBOXFLOAT XT((3,4),[2001-01-03,2001-01-04])' &gt;&gt;
  tbox 'TBOXFLOAT XT((1,2),[2001-01-01,2001-01-02])';
-- true
SELECT stbox 'STBOX Z((3,3,3),(4,4,4))' |&gt;&gt; stbox 'STBOX Z((1,1,1),(2,2,2))';
-- true
SELECT stbox 'STBOX Z((3,3,3),(4,4,4))' /&gt;&gt; stbox 'STBOX Z((1,1,1),(2,2,2))';
-- true
SELECT stbox 'STBOX XT(((3,3),(4,4)),[2001-01-03,2001-01-04])'  #&gt;&gt;
  stbox 'STBOX XT(((1,1),(2,2)),[2001-01-01,2001-01-02])';
-- true
</pre></li><li class="listitem"><a name="tbox_overleft"></a><a class="indexterm" name="idm2144"></a><a class="indexterm" name="idm2147"></a><a class="indexterm" name="idm2150"></a><a class="indexterm" name="idm2153"></a><p>Are the X/Y/Z/T values of the first bounding box not greater than those of the second one?</p><p><code class="varname">{tbox,stbox} &amp;&lt; {tbox,stbox} → boolean</code></p><p><code class="varname">stbox &amp;&lt;| stbox → boolean</code></p><p><code class="varname">stbox &amp;&lt;/ stbox → boolean</code></p><p><code class="varname">stbox &amp;&lt;# stbox → boolean</code></p><pre class="programlisting">
SELECT tbox 'TBOXFLOAT XT((1,4),[2001-01-01,2001-01-04])' &amp;&lt;
  tbox 'TBOXFLOAT XT((3,4),[2001-01-03,2001-01-04])';
-- true
SELECT stbox 'STBOX Z((1,1,1),(4,4,4))' &amp;&lt;| stbox 'STBOX Z((3,3,3),(4,4,4))';
-- true
SELECT stbox 'STBOX Z((1,1,1),(4,4,4))' &amp;&lt;/ stbox 'STBOX Z((3,3,3),(4,4,4))';
-- true
SELECT tbox 'TBOXFLOAT XT((1,4),[2001-01-01,2001-01-04])' &amp;&lt;#
  tbox 'TBOXFLOAT XT((3,4),[2001-01-03,2001-01-04])';
-- true
</pre></li><li class="listitem"><a name="tbox_overright"></a><a class="indexterm" name="idm2167"></a><a class="indexterm" name="idm2170"></a><a class="indexterm" name="idm2173"></a><a class="indexterm" name="idm2176"></a><p>Are the X/Y/Z/T values of the first bounding box not less than those of the second one?</p><p><code class="varname">{tbox,stbox} &amp;&gt; {tbox,stbox} → boolean</code></p><p><code class="varname">stbox |&amp;&gt; stbox → boolean</code></p><p><code class="varname">stbox /&amp;&gt; stbox → boolean</code></p><p><code class="varname">{tbox,stbox} #&amp;&gt; {tbox,stbox} → boolean</code></p><pre class="programlisting">
SELECT tbox 'TBOXFLOAT XT((1,2),[2001-01-01,2001-01-02])' &amp;&gt;
  tbox 'TBOXFLOAT XT((1,4),[2001-01-01,2001-01-04])';
-- true
SELECT stbox 'STBOX Z((3,3,3),(4,4,4))' |&amp;&gt; stbox 'STBOX Z((1,1,1),(2,2,2))';
-- false
SELECT stbox 'STBOX Z((3,3,3),(4,4,4))' /&amp;&gt; stbox 'STBOX Z((1,1,1),(2,2,2))';
-- true
SELECT stbox 'STBOX XT(((1,1),(2,2)),[2001-01-01,2001-01-02])' #&amp;&gt;
  stbox 'STBOX XT(((1,1),(4,4)),[2001-01-01,2001-01-04])';
-- true
</pre></li></ul></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03s08.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch03.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch03s10.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Set Operations </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Comparisons</td></tr></table></div></body></html>
