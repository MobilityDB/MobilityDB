<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter 4. Temporal Types (Part 1)</title><link rel="stylesheet" type="text/css" href="docbook.css"><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="MobilityDB 1.3 User's Manual"><link rel="up" href="index.html" title="MobilityDB 1.3 User's Manual"><link rel="prev" href="ch03s12.html" title="Indexing"><link rel="next" href="ch04s02.html" title="Examples of Temporal Types"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 4. Temporal Types (Part 1)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch03s12.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch04s02.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="ttype_p1"></a>Chapter 4. Temporal Types (Part 1)</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="ch04.html#ttype_introduction">Introduction</a></span></dt><dt><span class="sect1"><a href="ch04s02.html">Examples of Temporal Types</a></span></dt><dt><span class="sect1"><a href="ch04s03.html">Validity of Temporal Types</a></span></dt><dt><span class="sect1"><a href="ch04s04.html">Temporalizing Operations</a></span></dt><dt><span class="sect1"><a href="ch04s05.html">Notation</a></span></dt><dt><span class="sect1"><a href="ch04s06.html">Input and Output</a></span></dt><dt><span class="sect1"><a href="ch04s07.html">Constructors</a></span></dt><dt><span class="sect1"><a href="ch04s08.html">Conversions</a></span></dt><dt><span class="sect1"><a href="ch04s09.html">Accessors</a></span></dt><dt><span class="sect1"><a href="ch04s10.html">Transformations</a></span></dt></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ttype_introduction"></a>Introduction</h2></div></div></div><p>
			MobilityDB provides several temporal types based on PostgreSQL or PostGIS types, namely, <code class="varname">tbool</code>, <code class="varname">tint</code>, <code class="varname">tfloat</code>, <code class="varname">ttext</code>, <code class="varname">tgeometry</code>, <code class="varname">tgeography</code>, <code class="varname">tgeompoint</code>, and <code class="varname">tgeogpoint</code>, which are, respectively, based on the base types <code class="varname">bool</code>, <code class="varname">integer</code>, <code class="varname">float</code>, <code class="varname">text</code>, <code class="varname">geometry</code>, and <code class="varname">geography</code>, where <code class="varname">tgeometry</code> and <code class="varname">tgeography</code> accept arbitrary geometries/geographies, while <code class="varname">tgeompoint</code> and <code class="varname">tgeogpoint</code> only accept 2D or 3D points with Z dimension. In addition, MobilityDB provides other specific spatial types, namely, <code class="varname">cbuffer</code> (circular buffer), <code class="varname">npoint</code> (network point), and <code class="varname">pose</code>, and its corresponding spatiotemporal types, namely, <code class="varname">tcbuffer</code>, <code class="varname">tnpoint</code>, <code class="varname">tpose</code> and <code class="varname">trgeometry</code> (temporal rigid geometry). In this chapter and the next one we present the functions and operators available for all temporal types, while the specific functions for the spatiotemporal types will be given in subsequenct chapters.
		</p><p>
			The <span class="emphasis"><em>interpolation</em></span> of a temporal value states how the value evolves between successive instants. The interpolation is <span class="emphasis"><em>discrete</em></span> when the value is unknown between two successive instants. They can represent, for example, checkins/checkouts when using an RFID card reader to enter or exit a building. The interpolation is <span class="emphasis"><em>step</em></span> when the value remains constant between two successive instants. For example, the gear used by a moving car may be represented with a temporal integer, which indicates that its value is constant between two time instants. On the other hand, the interpolation is <span class="emphasis"><em>linear</em></span> when the value evolves linearly between two successive instants. For example, the speed of a car may be represented with a temporal float, which indicates that the values are known at the time instants but continuously evolve between them. Similarly, the location of a vehicule may be represented by a temporal point where the location between two consecutive GPS readings is obtained by linear interpolation. Temporal types based on discrete base types, that is the <code class="varname">tbool</code>, <code class="varname">tint</code>, or <code class="varname">ttext</code> evolve necesssarily in a step manner. On the other hand, temporal types based on continuous base types, that is <code class="varname">tfloat</code>, <code class="varname">tgeompoint</code>, or <code class="varname">tgeogpoint</code> may evolve in a step or linear manner. Note that the types <code class="varname">tgeometry</code> and <code class="varname">tgeography</code> only support discrete or step interpolation, since it is not possible to linearly interpolate two arbitrary geometries/geographies.
		</p><p>
			The <span class="emphasis"><em>subtype</em></span> of a temporal value states the temporal extent at which the evolution of values is recorded. Temporal values come in three subtypes, explained next.
		</p><p>
			A temporal value of <span class="emphasis"><em>instant</em></span> subtype (briefly, <span class="emphasis"><em>an instant value</em></span>) represents the value at a time instant, for example
			</p><pre class="programlisting">
SELECT tfloat '17@2018-01-01 08:00:00';
</pre><p>
		</p><p>
			A temporal value of <span class="emphasis"><em>sequence</em></span> subtype (briefly, a <span class="emphasis"><em>sequence value</em></span>) represents the evolution of the value during a sequence of time instants, where the values between these instants are interpolated using a discrete, step, or a linear function (see above). An example is as follows:
			</p><pre class="programlisting">
-- Discrete interpolation
SELECT tfloat '{17@2018-01-01 08:00:00, 17.5@2018-01-01 08:05:00, 18@2018-01-01 08:10:00}';
-- Step interpolation
SELECT tfloat 'Interp=Step;(10@2018-01-01 08:00:00, 20@2018-01-01 08:05:00,
  15@2018-01-01 08:10:00]';
-- Linear interpolation
SELECT tfloat '(10@2018-01-01 08:00:00, 20@2018-01-01 08:05:00, 15@2018-01-01 08:10:00]';
</pre><p>
		</p><p>
			As can be seen, a sequence value has a lower and an upper bound that can be inclusive (represented by ‘<code class="varname">[</code>’ and ‘<code class="varname">]</code>’) or exclusive (represented by ‘<code class="varname">(</code>' and ‘<code class="varname">)</code>'). By definition, both bounds must be inclusive when the interpolation is discrete or when the sequence has a single instant (called an <span class="emphasis"><em>instantaneous sequence</em></span>), as the next example
			</p><pre class="programlisting">
SELECT tint '[10@2018-01-01 08:00:00]';
</pre><p>
			Sequence values must be <span class="emphasis"><em>uniform</em></span>, that is, they must be composed of instant values of the same base type. Sequence values with step or linear interpolation are referred to as <span class="emphasis"><em>continuous sequences</em></span>.
		</p><p>
			The value of a temporal sequence is interpreted by assuming that the period of time defined by every pair of consecutive values <code class="varname">v1@t1</code> and <code class="varname">v2@t2</code> is lower inclusive and upper exclusive, unless they are the first or the last instants of the sequence and in that case the bounds of the whole sequence apply. Furthermore, the value taken by the temporal sequence between two consecutive instants depends on whether the interpolation is step or linear. For example, the temporal sequence above represents that the value is <code class="varname">10</code> during <code class="varname">(2018-01-01 08:00:00, 2018-01-01 08:05:00)</code>, <code class="varname">20</code> during <code class="varname">[2018-01-01 08:05:00, 2018-01-01 08:10:00)</code>, and <code class="varname">15</code> at the end instant <code class="varname">2018-01-01 08:10:00</code>. On the other hand, the following temporal sequence
			</p><pre class="programlisting">
SELECT tfloat '(10@2018-01-01 08:00:00, 20@2018-01-01 08:05:00, 15@2018-01-01 08:10:00]';
</pre><p>
			represents that the value evolves linearly from <code class="varname">10</code> to <code class="varname">20</code> during <code class="varname">(2018-01-01 08:00:00, 2018-01-01 08:05:00)</code> and evolves from <code class="varname">20</code> to <code class="varname">15</code> during <code class="varname">[2018-01-01 08:05:00, 2018-01-01 08:10:00]</code>.
		</p><p>
			Finally, a temporal value of <span class="emphasis"><em>sequence set</em></span> subtype (briefly, a <span class="emphasis"><em>sequence set value</em></span>) represents the evolution of the value at a set of sequences, where the values between these sequences are unknown. An example is as follows:
			</p><pre class="programlisting">
SELECT tfloat '{[17@2018-01-01 08:00:00, 17.5@2018-01-01 08:05:00],
  [18@2018-01-01 08:10:00, 18@2018-01-01 08:15:00]}';
</pre><p>
			As shown in the above examples, sequence set values can only be of step or linear interpolation. Furtheremore, all composing sequences of a sequence set value must be of the same base type and the same interpolation.
		</p><p>
			Continuous sequence values are converted into <span class="emphasis"><em>normal form</em></span> so that equivalent values have identical representations. For this, consecutive instant values are merged when possible. For step interpolation, three consecutive instant values can be merged into two if they have the same value. For linear interpolation, three consecutive instant values can be merged into two if the linear functions defining the evolution of values are the same. Examples of transformation into normal form are as follows.
			</p><pre class="programlisting">
SELECT tint '[1@2001-01-01, 2@2001-01-03, 2@2001-01-04, 2@2001-01-05)';
-- [1@2001-01-01 00:00:00+00, 2@2001-01-03 00:00:00+00, 2@2001-01-05 00:00:00+00)
SELECT asText(tgeompoint '[Point(1 1)@2001-01-01 08:00:00, Point(1 1)@2001-01-01 08:05:00,
  Point(1 1)@2001-01-01 08:10:00)');
-- [Point(1 1)@2001-01-01 08:00:00, Point(1 1)@2001-01-01 08:10:00)
SELECT tfloat '[1@2001-01-01, 2@2001-01-03, 3@2001-01-05]';
-- [1@2001-01-01 00:00:00+00, 3@2001-01-05 00:00:00+00]
SELECT asText(tgeompoint '[Point(1 1)@2001-01-01 08:00:00, Point(2 2)@2001-01-01 08:05:00,
  Point(3 3)@2001-01-01 08:10:00]');
-- [Point(1 1)@2001-01-01 08:00:00, Point(3 3)@2001-01-01 08:10:00]
</pre><p>
		</p><p>
			Similary, temporal sequence set values are converted into normal form. For this, consecutive sequence values are merged when possible. Examples of transformation into a normal form are as follows.
			</p><pre class="programlisting">
SELECT tint '{[1@2001-01-01, 1@2001-01-03), [2@2001-01-03, 2@2001-01-05)}';
-- '{[1@2001-01-01, 2@2001-01-03, 2@2001-01-05)}'
SELECT tfloat '{[1@2001-01-01, 2@2001-01-03), [2@2001-01-03, 3@2001-01-05]}';
-- '{[1@2001-01-01, 3@2001-01-05]}'
SELECT tfloat '{[1@2001-01-01, 3@2001-01-05), [3@2001-01-05]}';
-- '{[1@2001-01-01, 3@2001-01-05]}'
SELECT asText(tgeompoint '{[Point(0 0)@2001-01-01 08:00:00,
  Point(1 1)@2001-01-01 08:05:00, Point(1 1)@2001-01-01 08:10:00),
  [Point(1 1)@2001-01-01 08:10:00, Point(1 1)@2001-01-01 08:15:00)}');
/* {[[Point(0 0)@2001-01-01 08:00:00, Point(1 1)@2001-01-01 08:05:00,
   Point(1 1)@2001-01-01 08:15:00)} */
SELECT asText(tgeompoint '{[Point(1 1)@2001-01-01 08:00:00,Point(2 2)@2001-01-01 08:05:00),
  [Point(2 2)@2001-01-01 08:05:00, Point(3 3)@2001-01-01 08:10:00]}');
-- {[Point(1 1)@2001-01-01 08:00:00, Point(3 3)@2001-01-01 08:10:00]}
SELECT asText(tgeompoint '{[Point(1 1)@2001-01-01 08:00:00,Point(3 3)@2001-01-01 08:10:00),
  [Point(3 3)@2001-01-01 08:10:00]}');
-- {[Point(1 1)@2001-01-01 08:00:00, Point(3 3)@2001-01-01 08:10:00]}
</pre><p>
		</p><p>
			Temporal types support <span class="emphasis"><em>type modifiers</em></span> (or <code class="varname">typmod</code> in PostgreSQL terminology), which specify additional information for a column definition. For example, in the following table definition:
			</p><pre class="programlisting">
CREATE TABLE Department(DeptNo integer, DeptName varchar(25), NoEmps tint(Sequence));
</pre><p>
			the type modifier for the type <code class="varname">varchar</code> is the value 25, which indicates the maximum length of the values of the column, while the type modifier for the type <code class="varname">tint</code> is the string <code class="varname">Sequence</code>, which restricts the subtype of the values of the column to be sequences. In the case of temporal alphanumeric types (that is, <code class="varname">tbool</code>, <code class="varname">tint</code>, <code class="varname">tfloat</code>, and <code class="varname">ttext</code>), the possible values for the type modifier are <code class="varname">Instant</code>, <code class="varname">Sequence</code>, and <code class="varname">SequenceSet</code>. If no type modifier is specified for a column, values of any subtype are allowed.
		</p><p>
			On the other hand, in the case of temporal geometry types (that is, <code class="varname">tgeompoint</code> <code class="varname">tgeogpoint</code>, <code class="varname">tgeometry</code>, or <code class="varname">tgeography</code>) the type modifier may be used to specify the subtype, the geometry type, and/or the spatial reference identifier (SRID). For example, in the following table definition:
			</p><pre class="programlisting">
CREATE TABLE Flight(FlightNo integer, Route tgeogpoint(Sequence, PointZ, 4326));
CREATE TABLE Storm(StormId integer, Route tgeography(Sequence, Linestring, 4326));
</pre><p>
			the type modifiers for the <code class="varname">tgeogpoint</code> and <code class="varname">tgeography</code> types are composed of three values, the first one indicating the subtype as above, the second one the spatial type of the geographies composing the temporal point and geographies, and the last one the SRID of the composing geographies. For temporal points, the possible values for the first argument of the type modifier are as above, those for the second argument are either <code class="varname">Point</code> or <code class="varname">PointZ</code>, and those for the third argument are valid SRIDs. All the three arguments are optional and if any of them is not specified for a column, values of any subtype, dimensionality, and/or SRID are allowed.
		</p><p>
			Each temporal type is associated to another type, referred to as its <span class="emphasis"><em>bounding box</em></span>, which represent its extent in the value and/or the time dimension. The bounding box of the various temporal types are as follows:
		</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The <code class="varname">tstzspan</code> type for the <code class="varname">tbool</code> and <code class="varname">ttext</code> types, where only the temporal extent is considered.</p></li><li class="listitem"><p>The <code class="varname">tbox</code> (temporal box) type for the <code class="varname">tint</code> and <code class="varname">tfloat</code> types, where the value and the time extents are defined, respectively, by a number span and a time span.</p></li><li class="listitem"><p>The <code class="varname">stbox</code> (spatiotemporal box) type for the <code class="varname">tgeompoint</code> and <code class="varname">tgeogpoint</code> types, where the spatial extent is defined in the X, Y, and Z dimensions, and the time extent by a time span.</p></li></ul></div><p>
		A rich set of functions and operators is available to perform various operations on temporal types. They are explained in this chapter and the following ones. Some of these operations, in particular those related to indexes, manipulate bounding boxes for efficiency reasons.
		</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03s12.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch04s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Indexing </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Examples of Temporal Types</td></tr></table></div></body></html>
